import{j as t,U as ve,S as Gx,a as Ut,T as Ve,C as Xr,H as Ap,b as Ir,A as ns,B as Ci,d as Oa,F as ma,e as Ai,f as pf,g as mt,h as Dp,i as Yr,L as Lx,c as Ms,X as ha,P as Op,k as Tp,M as Px,l as Zt,m as Di,n as Bl,o as Vx,p as Mp,q as od,r as cd,s as $t,t as Rp,u as zp,v as Ri,w as kp,G as Rs,x as Ol,y as fd,E as Up,z as xd,D as zi,I as Hx,J as $p,K as Ml,N as Bp,O as Zr,Q as Ta,R as Kr,V as qp,W as Gp,Y as dd,Z as Rl,_ as gd,$ as zs,a0 as Ix,a1 as Lp,a2 as Fr,a3 as Pp,a4 as bf,a5 as Yx,a6 as ki,a7 as Qx,a8 as zl,a9 as Vp,aa as Oi,ab as vf,ac as Hp,ad as kl,ae as Xx,af as Ui,ag as Ip,ah as $i,ai as Bi,aj as Yp,ak as Qp,al as Kc,am as Xp}from"./ui-vendor-BOQIs4ec.js";import{L as Be,r as v,R as yf,u as ke,c as pd,O as bd,N as Fp,d as ql,e as Fx,f as fe,g as Ti,h as Zp,H as Kp}from"./router-vendor-wSGMZ5EI.js";import{r as Jp,a as Wp}from"./react-vendor-CbKDpIlH.js";import{c as eb}from"./supabase-vendor-CzVIVmpl.js";import{S as tb}from"./forms-vendor-D4y6ReHK.js";import{R as Ye,B as Tt,C as Mt,X as Rt,Y as zt,T as Fe,d as kt,e as Zx,P as Kx,f as Jx,g as Wx,h as Si,L as is,i as Ul,j as $l,k as aa}from"./charts-vendor-BL9OqLFG.js";import{E as ab}from"./pdf-vendor-MfzqZsA5.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))u(m);new MutationObserver(m=>{for(const x of m)if(x.type==="childList")for(const p of x.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&u(p)}).observe(document,{childList:!0,subtree:!0});function r(m){const x={};return m.integrity&&(x.integrity=m.integrity),m.referrerPolicy&&(x.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?x.credentials="include":m.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function u(m){if(m.ep)return;m.ep=!0;const x=r(m);fetch(m.href,x)}})();var Jc={exports:{}},Br={},Wc={exports:{}},ed={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jf;function sb(){return jf||(jf=1,function(o){function n(T,H){var Q=T.length;T.push(H);e:for(;0<Q;){var U=Q-1>>>1,X=T[U];if(0<m(X,H))T[U]=H,T[Q]=X,Q=U;else break e}}function r(T){return T.length===0?null:T[0]}function u(T){if(T.length===0)return null;var H=T[0],Q=T.pop();if(Q!==H){T[0]=Q;e:for(var U=0,X=T.length,le=X>>>1;U<le;){var W=2*(U+1)-1,ne=T[W],oe=W+1,ge=T[oe];if(0>m(ne,Q))oe<X&&0>m(ge,ne)?(T[U]=ge,T[oe]=Q,U=oe):(T[U]=ne,T[W]=Q,U=W);else if(oe<X&&0>m(ge,Q))T[U]=ge,T[oe]=Q,U=oe;else break e}}return H}function m(T,H){var Q=T.sortIndex-H.sortIndex;return Q!==0?Q:T.id-H.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var x=performance;o.unstable_now=function(){return x.now()}}else{var p=Date,f=p.now();o.unstable_now=function(){return p.now()-f}}var c=[],h=[],w=1,j=null,C=3,y=!1,O=!1,_=!1,$=!1,q=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate!="undefined"?setImmediate:null;function F(T){for(var H=r(h);H!==null;){if(H.callback===null)u(h);else if(H.startTime<=T)u(h),H.sortIndex=H.expirationTime,n(c,H);else break;H=r(h)}}function E(T){if(_=!1,F(T),!O)if(r(c)!==null)O=!0,S||(S=!0,G());else{var H=r(h);H!==null&&re(E,H.startTime-T)}}var S=!1,D=-1,z=5,N=-1;function M(){return $?!0:!(o.unstable_now()-N<z)}function K(){if($=!1,S){var T=o.unstable_now();N=T;var H=!0;try{e:{O=!1,_&&(_=!1,k(D),D=-1),y=!0;var Q=C;try{t:{for(F(T),j=r(c);j!==null&&!(j.expirationTime>T&&M());){var U=j.callback;if(typeof U=="function"){j.callback=null,C=j.priorityLevel;var X=U(j.expirationTime<=T);if(T=o.unstable_now(),typeof X=="function"){j.callback=X,F(T),H=!0;break t}j===r(c)&&u(c),F(T)}else u(c);j=r(c)}if(j!==null)H=!0;else{var le=r(h);le!==null&&re(E,le.startTime-T),H=!1}}break e}finally{j=null,C=Q,y=!1}H=void 0}}finally{H?G():S=!1}}}var G;if(typeof V=="function")G=function(){V(K)};else if(typeof MessageChannel!="undefined"){var J=new MessageChannel,ae=J.port2;J.port1.onmessage=K,G=function(){ae.postMessage(null)}}else G=function(){q(K,0)};function re(T,H){D=q(function(){T(o.unstable_now())},H)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(T){T.callback=null},o.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<T?Math.floor(1e3/T):5},o.unstable_getCurrentPriorityLevel=function(){return C},o.unstable_next=function(T){switch(C){case 1:case 2:case 3:var H=3;break;default:H=C}var Q=C;C=H;try{return T()}finally{C=Q}},o.unstable_requestPaint=function(){$=!0},o.unstable_runWithPriority=function(T,H){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var Q=C;C=T;try{return H()}finally{C=Q}},o.unstable_scheduleCallback=function(T,H,Q){var U=o.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?U+Q:U):Q=U,T){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=Q+X,T={id:w++,callback:H,priorityLevel:T,startTime:Q,expirationTime:X,sortIndex:-1},Q>U?(T.sortIndex=Q,n(h,T),r(c)===null&&T===r(h)&&(_?(k(D),D=-1):_=!0,re(E,Q-U))):(T.sortIndex=X,n(c,T),O||y||(O=!0,S||(S=!0,G()))),T},o.unstable_shouldYield=M,o.unstable_wrapCallback=function(T){var H=C;return function(){var Q=C;C=H;try{return T.apply(this,arguments)}finally{C=Q}}}}(ed)),ed}var Nf;function lb(){return Nf||(Nf=1,Wc.exports=sb()),Wc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wf;function rb(){if(wf)return Br;wf=1;var o=lb(),n=Jp(),r=Wp();function u(e){var a="https://react.dev/errors/"+e;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)a+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function m(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function x(e){var a=e,s=e;if(e.alternate)for(;a.return;)a=a.return;else{e=a;do a=e,(a.flags&4098)!==0&&(s=a.return),e=a.return;while(e)}return a.tag===3?s:null}function p(e){if(e.tag===13){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function f(e){if(x(e)!==e)throw Error(u(188))}function c(e){var a=e.alternate;if(!a){if(a=x(e),a===null)throw Error(u(188));return a!==e?null:e}for(var s=e,l=a;;){var i=s.return;if(i===null)break;var d=i.alternate;if(d===null){if(l=i.return,l!==null){s=l;continue}break}if(i.child===d.child){for(d=i.child;d;){if(d===s)return f(i),e;if(d===l)return f(i),a;d=d.sibling}throw Error(u(188))}if(s.return!==l.return)s=i,l=d;else{for(var g=!1,b=i.child;b;){if(b===s){g=!0,s=i,l=d;break}if(b===l){g=!0,l=i,s=d;break}b=b.sibling}if(!g){for(b=d.child;b;){if(b===s){g=!0,s=d,l=i;break}if(b===l){g=!0,l=d,s=i;break}b=b.sibling}if(!g)throw Error(u(189))}}if(s.alternate!==l)throw Error(u(190))}if(s.tag!==3)throw Error(u(188));return s.stateNode.current===s?e:a}function h(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e;for(e=e.child;e!==null;){if(a=h(e),a!==null)return a;e=e.sibling}return null}var w=Object.assign,j=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),q=Symbol.for("react.provider"),k=Symbol.for("react.consumer"),V=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),K=Symbol.iterator;function G(e){return e===null||typeof e!="object"?null:(e=K&&e[K]||e["@@iterator"],typeof e=="function"?e:null)}var J=Symbol.for("react.client.reference");function ae(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===J?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case O:return"Fragment";case $:return"Profiler";case _:return"StrictMode";case E:return"Suspense";case S:return"SuspenseList";case N:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case y:return"Portal";case V:return(e.displayName||"Context")+".Provider";case k:return(e._context.displayName||"Context")+".Consumer";case F:var a=e.render;return e=e.displayName,e||(e=a.displayName||a.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case D:return a=e.displayName||null,a!==null?a:ae(e.type)||"Memo";case z:a=e._payload,e=e._init;try{return ae(e(a))}catch(s){}}return null}var re=Array.isArray,T=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},U=[],X=-1;function le(e){return{current:e}}function W(e){0>X||(e.current=U[X],U[X]=null,X--)}function ne(e,a){X++,U[X]=e.current,e.current=a}var oe=le(null),ge=le(null),xe=le(null),je=le(null);function me(e,a){switch(ne(xe,a),ne(ge,e),ne(oe,null),a.nodeType){case 9:case 11:e=(e=a.documentElement)&&(e=e.namespaceURI)?Hh(e):0;break;default:if(e=a.tagName,a=a.namespaceURI)a=Hh(a),e=Ih(a,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}W(oe),ne(oe,e)}function pe(){W(oe),W(ge),W(xe)}function st(e){e.memoizedState!==null&&ne(je,e);var a=oe.current,s=Ih(a,e.type);a!==s&&(ne(ge,e),ne(oe,s))}function lt(e){ge.current===e&&(W(oe),W(ge)),je.current===e&&(W(je),Rr._currentValue=Q)}var os=Object.prototype.hasOwnProperty,Ze=o.unstable_scheduleCallback,Ma=o.unstable_cancelCallback,_d=o.unstable_shouldYield,cs=o.unstable_requestPaint,qt=o.unstable_now,Jr=o.unstable_getCurrentPriorityLevel,Gl=o.unstable_ImmediatePriority,Sd=o.unstable_UserBlockingPriority,Wr=o.unstable_NormalPriority,c0=o.unstable_LowPriority,Ed=o.unstable_IdlePriority,d0=o.log,u0=o.unstable_setDisableYieldValue,Ll=null,yt=null;function Ra(e){if(typeof d0=="function"&&u0(e),yt&&typeof yt.setStrictMode=="function")try{yt.setStrictMode(Ll,e)}catch(a){}}var jt=Math.clz32?Math.clz32:f0,m0=Math.log,h0=Math.LN2;function f0(e){return e>>>=0,e===0?32:31-(m0(e)/h0|0)|0}var en=256,tn=4194304;function ds(e){var a=e&42;if(a!==0)return a;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function an(e,a,s){var l=e.pendingLanes;if(l===0)return 0;var i=0,d=e.suspendedLanes,g=e.pingedLanes;e=e.warmLanes;var b=l&134217727;return b!==0?(l=b&~d,l!==0?i=ds(l):(g&=b,g!==0?i=ds(g):s||(s=b&~e,s!==0&&(i=ds(s))))):(b=l&~d,b!==0?i=ds(b):g!==0?i=ds(g):s||(s=l&~e,s!==0&&(i=ds(s)))),i===0?0:a!==0&&a!==i&&(a&d)===0&&(d=i&-i,s=a&-a,d>=s||d===32&&(s&4194048)!==0)?a:i}function Pl(e,a){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&a)===0}function x0(e,a){switch(e){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cd(){var e=en;return en<<=1,(en&4194048)===0&&(en=256),e}function Ad(){var e=tn;return tn<<=1,(tn&62914560)===0&&(tn=4194304),e}function qi(e){for(var a=[],s=0;31>s;s++)a.push(e);return a}function Vl(e,a){e.pendingLanes|=a,a!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function g0(e,a,s,l,i,d){var g=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var b=e.entanglements,A=e.expirationTimes,P=e.hiddenUpdates;for(s=g&~s;0<s;){var ee=31-jt(s),se=1<<ee;b[ee]=0,A[ee]=-1;var I=P[ee];if(I!==null)for(P[ee]=null,ee=0;ee<I.length;ee++){var Y=I[ee];Y!==null&&(Y.lane&=-536870913)}s&=~se}l!==0&&Dd(e,l,0),d!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=d&~(g&~a))}function Dd(e,a,s){e.pendingLanes|=a,e.suspendedLanes&=~a;var l=31-jt(a);e.entangledLanes|=a,e.entanglements[l]=e.entanglements[l]|1073741824|s&4194090}function Od(e,a){var s=e.entangledLanes|=a;for(e=e.entanglements;s;){var l=31-jt(s),i=1<<l;i&a|e[l]&a&&(e[l]|=a),s&=~i}}function Gi(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Li(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Td(){var e=H.p;return e!==0?e:(e=window.event,e===void 0?32:uf(e.type))}function p0(e,a){var s=H.p;try{return H.p=e,a()}finally{H.p=s}}var za=Math.random().toString(36).slice(2),ot="__reactFiber$"+za,xt="__reactProps$"+za,ks="__reactContainer$"+za,Pi="__reactEvents$"+za,b0="__reactListeners$"+za,v0="__reactHandles$"+za,Md="__reactResources$"+za,Hl="__reactMarker$"+za;function Vi(e){delete e[ot],delete e[xt],delete e[Pi],delete e[b0],delete e[v0]}function Us(e){var a=e[ot];if(a)return a;for(var s=e.parentNode;s;){if(a=s[ks]||s[ot]){if(s=a.alternate,a.child!==null||s!==null&&s.child!==null)for(e=Fh(e);e!==null;){if(s=e[ot])return s;e=Fh(e)}return a}e=s,s=e.parentNode}return null}function $s(e){if(e=e[ot]||e[ks]){var a=e.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return e}return null}function Il(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e.stateNode;throw Error(u(33))}function Bs(e){var a=e[Md];return a||(a=e[Md]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function We(e){e[Hl]=!0}var Rd=new Set,zd={};function us(e,a){qs(e,a),qs(e+"Capture",a)}function qs(e,a){for(zd[e]=a,e=0;e<a.length;e++)Rd.add(a[e])}var y0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),kd={},Ud={};function j0(e){return os.call(Ud,e)?!0:os.call(kd,e)?!1:y0.test(e)?Ud[e]=!0:(kd[e]=!0,!1)}function sn(e,a,s){if(j0(a))if(s===null)e.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(a);return;case"boolean":var l=a.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(a);return}}e.setAttribute(a,""+s)}}function ln(e,a,s){if(s===null)e.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttribute(a,""+s)}}function fa(e,a,s,l){if(l===null)e.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(a,s,""+l)}}var Hi,$d;function Gs(e){if(Hi===void 0)try{throw Error()}catch(s){var a=s.stack.trim().match(/\n( *(at )?)/);Hi=a&&a[1]||"",$d=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Hi+e+$d}var Ii=!1;function Yi(e,a){if(!e||Ii)return"";Ii=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(a){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(Y){var I=Y}Reflect.construct(e,[],se)}else{try{se.call()}catch(Y){I=Y}e.call(se.prototype)}}else{try{throw Error()}catch(Y){I=Y}(se=e())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(Y){if(Y&&I&&typeof Y.stack=="string")return[Y.stack,I.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),g=d[0],b=d[1];if(g&&b){var A=g.split(`
`),P=b.split(`
`);for(i=l=0;l<A.length&&!A[l].includes("DetermineComponentFrameRoot");)l++;for(;i<P.length&&!P[i].includes("DetermineComponentFrameRoot");)i++;if(l===A.length||i===P.length)for(l=A.length-1,i=P.length-1;1<=l&&0<=i&&A[l]!==P[i];)i--;for(;1<=l&&0<=i;l--,i--)if(A[l]!==P[i]){if(l!==1||i!==1)do if(l--,i--,0>i||A[l]!==P[i]){var ee=`
`+A[l].replace(" at new "," at ");return e.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",e.displayName)),ee}while(1<=l&&0<=i);break}}}finally{Ii=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?Gs(s):""}function N0(e){switch(e.tag){case 26:case 27:case 5:return Gs(e.type);case 16:return Gs("Lazy");case 13:return Gs("Suspense");case 19:return Gs("SuspenseList");case 0:case 15:return Yi(e.type,!1);case 11:return Yi(e.type.render,!1);case 1:return Yi(e.type,!0);case 31:return Gs("Activity");default:return""}}function Bd(e){try{var a="";do a+=N0(e),e=e.return;while(e);return a}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}function Gt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function qd(e){var a=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function w0(e){var a=qd(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,a),l=""+e[a];if(!e.hasOwnProperty(a)&&typeof s!="undefined"&&typeof s.get=="function"&&typeof s.set=="function"){var i=s.get,d=s.set;return Object.defineProperty(e,a,{configurable:!0,get:function(){return i.call(this)},set:function(g){l=""+g,d.call(this,g)}}),Object.defineProperty(e,a,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(g){l=""+g},stopTracking:function(){e._valueTracker=null,delete e[a]}}}}function rn(e){e._valueTracker||(e._valueTracker=w0(e))}function Gd(e){if(!e)return!1;var a=e._valueTracker;if(!a)return!0;var s=a.getValue(),l="";return e&&(l=qd(e)?e.checked?"true":"false":e.value),e=l,e!==s?(a.setValue(e),!0):!1}function nn(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch(a){return e.body}}var _0=/[\n"\\]/g;function Lt(e){return e.replace(_0,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Qi(e,a,s,l,i,d,g,b){e.name="",g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?e.type=g:e.removeAttribute("type"),a!=null?g==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+Gt(a)):e.value!==""+Gt(a)&&(e.value=""+Gt(a)):g!=="submit"&&g!=="reset"||e.removeAttribute("value"),a!=null?Xi(e,g,Gt(a)):s!=null?Xi(e,g,Gt(s)):l!=null&&e.removeAttribute("value"),i==null&&d!=null&&(e.defaultChecked=!!d),i!=null&&(e.checked=i&&typeof i!="function"&&typeof i!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.name=""+Gt(b):e.removeAttribute("name")}function Ld(e,a,s,l,i,d,g,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),a!=null||s!=null){if(!(d!=="submit"&&d!=="reset"||a!=null))return;s=s!=null?""+Gt(s):"",a=a!=null?""+Gt(a):s,b||a===e.value||(e.value=a),e.defaultValue=a}l=l!=null?l:i,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=b?e.checked:!!l,e.defaultChecked=!!l,g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.name=g)}function Xi(e,a,s){a==="number"&&nn(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function Ls(e,a,s,l){if(e=e.options,a){a={};for(var i=0;i<s.length;i++)a["$"+s[i]]=!0;for(s=0;s<e.length;s++)i=a.hasOwnProperty("$"+e[s].value),e[s].selected!==i&&(e[s].selected=i),i&&l&&(e[s].defaultSelected=!0)}else{for(s=""+Gt(s),a=null,i=0;i<e.length;i++){if(e[i].value===s){e[i].selected=!0,l&&(e[i].defaultSelected=!0);return}a!==null||e[i].disabled||(a=e[i])}a!==null&&(a.selected=!0)}}function Pd(e,a,s){if(a!=null&&(a=""+Gt(a),a!==e.value&&(e.value=a),s==null)){e.defaultValue!==a&&(e.defaultValue=a);return}e.defaultValue=s!=null?""+Gt(s):""}function Vd(e,a,s,l){if(a==null){if(l!=null){if(s!=null)throw Error(u(92));if(re(l)){if(1<l.length)throw Error(u(93));l=l[0]}s=l}s==null&&(s=""),a=s}s=Gt(a),e.defaultValue=s,l=e.textContent,l===s&&l!==""&&l!==null&&(e.value=l)}function Ps(e,a){if(a){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=a;return}}e.textContent=a}var S0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Hd(e,a,s){var l=a.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?l?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="":l?e.setProperty(a,s):typeof s!="number"||s===0||S0.has(a)?a==="float"?e.cssFloat=s:e[a]=(""+s).trim():e[a]=s+"px"}function Id(e,a,s){if(a!=null&&typeof a!="object")throw Error(u(62));if(e=e.style,s!=null){for(var l in s)!s.hasOwnProperty(l)||a!=null&&a.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var i in a)l=a[i],a.hasOwnProperty(i)&&s[i]!==l&&Hd(e,i,l)}else for(var d in a)a.hasOwnProperty(d)&&Hd(e,d,a[d])}function Fi(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var E0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),C0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function on(e){return C0.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Zi=null;function Ki(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Vs=null,Hs=null;function Yd(e){var a=$s(e);if(a&&(e=a.stateNode)){var s=e[xt]||null;e:switch(e=a.stateNode,a.type){case"input":if(Qi(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),a=s.name,s.type==="radio"&&a!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+Lt(""+a)+'"][type="radio"]'),a=0;a<s.length;a++){var l=s[a];if(l!==e&&l.form===e.form){var i=l[xt]||null;if(!i)throw Error(u(90));Qi(l,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(a=0;a<s.length;a++)l=s[a],l.form===e.form&&Gd(l)}break e;case"textarea":Pd(e,s.value,s.defaultValue);break e;case"select":a=s.value,a!=null&&Ls(e,!!s.multiple,a,!1)}}}var Ji=!1;function Qd(e,a,s){if(Ji)return e(a,s);Ji=!0;try{var l=e(a);return l}finally{if(Ji=!1,(Vs!==null||Hs!==null)&&(Qn(),Vs&&(a=Vs,e=Hs,Hs=Vs=null,Yd(a),e)))for(a=0;a<e.length;a++)Yd(e[a])}}function Yl(e,a){var s=e.stateNode;if(s===null)return null;var l=s[xt]||null;if(l===null)return null;s=l[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(u(231,a,typeof s));return s}var xa=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Wi=!1;if(xa)try{var Ql={};Object.defineProperty(Ql,"passive",{get:function(){Wi=!0}}),window.addEventListener("test",Ql,Ql),window.removeEventListener("test",Ql,Ql)}catch(e){Wi=!1}var ka=null,eo=null,cn=null;function Xd(){if(cn)return cn;var e,a=eo,s=a.length,l,i="value"in ka?ka.value:ka.textContent,d=i.length;for(e=0;e<s&&a[e]===i[e];e++);var g=s-e;for(l=1;l<=g&&a[s-l]===i[d-l];l++);return cn=i.slice(e,1<l?1-l:void 0)}function dn(e){var a=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&a===13&&(e=13)):e=a,e===10&&(e=13),32<=e||e===13?e:0}function un(){return!0}function Fd(){return!1}function gt(e){function a(s,l,i,d,g){this._reactName=s,this._targetInst=i,this.type=l,this.nativeEvent=d,this.target=g,this.currentTarget=null;for(var b in e)e.hasOwnProperty(b)&&(s=e[b],this[b]=s?s(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?un:Fd,this.isPropagationStopped=Fd,this}return w(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=un)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=un)},persist:function(){},isPersistent:un}),a}var ms={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mn=gt(ms),Xl=w({},ms,{view:0,detail:0}),A0=gt(Xl),to,ao,Fl,hn=w({},Xl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Fl&&(Fl&&e.type==="mousemove"?(to=e.screenX-Fl.screenX,ao=e.screenY-Fl.screenY):ao=to=0,Fl=e),to)},movementY:function(e){return"movementY"in e?e.movementY:ao}}),Zd=gt(hn),D0=w({},hn,{dataTransfer:0}),O0=gt(D0),T0=w({},Xl,{relatedTarget:0}),so=gt(T0),M0=w({},ms,{animationName:0,elapsedTime:0,pseudoElement:0}),R0=gt(M0),z0=w({},ms,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),k0=gt(z0),U0=w({},ms,{data:0}),Kd=gt(U0),$0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},B0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},q0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function G0(e){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(e):(e=q0[e])?!!a[e]:!1}function lo(){return G0}var L0=w({},Xl,{key:function(e){if(e.key){var a=$0[e.key]||e.key;if(a!=="Unidentified")return a}return e.type==="keypress"?(e=dn(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?B0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lo,charCode:function(e){return e.type==="keypress"?dn(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?dn(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),P0=gt(L0),V0=w({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jd=gt(V0),H0=w({},Xl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lo}),I0=gt(H0),Y0=w({},ms,{propertyName:0,elapsedTime:0,pseudoElement:0}),Q0=gt(Y0),X0=w({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),F0=gt(X0),Z0=w({},ms,{newState:0,oldState:0}),K0=gt(Z0),J0=[9,13,27,32],ro=xa&&"CompositionEvent"in window,Zl=null;xa&&"documentMode"in document&&(Zl=document.documentMode);var W0=xa&&"TextEvent"in window&&!Zl,Wd=xa&&(!ro||Zl&&8<Zl&&11>=Zl),eu=" ",tu=!1;function au(e,a){switch(e){case"keyup":return J0.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function su(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Is=!1;function eg(e,a){switch(e){case"compositionend":return su(a);case"keypress":return a.which!==32?null:(tu=!0,eu);case"textInput":return e=a.data,e===eu&&tu?null:e;default:return null}}function tg(e,a){if(Is)return e==="compositionend"||!ro&&au(e,a)?(e=Xd(),cn=eo=ka=null,Is=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Wd&&a.locale!=="ko"?null:a.data;default:return null}}var ag={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lu(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a==="input"?!!ag[e.type]:a==="textarea"}function ru(e,a,s,l){Vs?Hs?Hs.push(l):Hs=[l]:Vs=l,a=Wn(a,"onChange"),0<a.length&&(s=new mn("onChange","change",null,s,l),e.push({event:s,listeners:a}))}var Kl=null,Jl=null;function sg(e){qh(e,0)}function fn(e){var a=Il(e);if(Gd(a))return e}function nu(e,a){if(e==="change")return a}var iu=!1;if(xa){var no;if(xa){var io="oninput"in document;if(!io){var ou=document.createElement("div");ou.setAttribute("oninput","return;"),io=typeof ou.oninput=="function"}no=io}else no=!1;iu=no&&(!document.documentMode||9<document.documentMode)}function cu(){Kl&&(Kl.detachEvent("onpropertychange",du),Jl=Kl=null)}function du(e){if(e.propertyName==="value"&&fn(Jl)){var a=[];ru(a,Jl,e,Ki(e)),Qd(sg,a)}}function lg(e,a,s){e==="focusin"?(cu(),Kl=a,Jl=s,Kl.attachEvent("onpropertychange",du)):e==="focusout"&&cu()}function rg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return fn(Jl)}function ng(e,a){if(e==="click")return fn(a)}function ig(e,a){if(e==="input"||e==="change")return fn(a)}function og(e,a){return e===a&&(e!==0||1/e===1/a)||e!==e&&a!==a}var Nt=typeof Object.is=="function"?Object.is:og;function Wl(e,a){if(Nt(e,a))return!0;if(typeof e!="object"||e===null||typeof a!="object"||a===null)return!1;var s=Object.keys(e),l=Object.keys(a);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var i=s[l];if(!os.call(a,i)||!Nt(e[i],a[i]))return!1}return!0}function uu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function mu(e,a){var s=uu(e);e=0;for(var l;s;){if(s.nodeType===3){if(l=e+s.textContent.length,e<=a&&l>=a)return{node:s,offset:a-e};e=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=uu(s)}}function hu(e,a){return e&&a?e===a?!0:e&&e.nodeType===3?!1:a&&a.nodeType===3?hu(e,a.parentNode):"contains"in e?e.contains(a):e.compareDocumentPosition?!!(e.compareDocumentPosition(a)&16):!1:!1}function fu(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var a=nn(e.document);a instanceof e.HTMLIFrameElement;){try{var s=typeof a.contentWindow.location.href=="string"}catch(l){s=!1}if(s)e=a.contentWindow;else break;a=nn(e.document)}return a}function oo(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a&&(a==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||a==="textarea"||e.contentEditable==="true")}var cg=xa&&"documentMode"in document&&11>=document.documentMode,Ys=null,co=null,er=null,uo=!1;function xu(e,a,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;uo||Ys==null||Ys!==nn(l)||(l=Ys,"selectionStart"in l&&oo(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),er&&Wl(er,l)||(er=l,l=Wn(co,"onSelect"),0<l.length&&(a=new mn("onSelect","select",null,a,s),e.push({event:a,listeners:l}),a.target=Ys)))}function hs(e,a){var s={};return s[e.toLowerCase()]=a.toLowerCase(),s["Webkit"+e]="webkit"+a,s["Moz"+e]="moz"+a,s}var Qs={animationend:hs("Animation","AnimationEnd"),animationiteration:hs("Animation","AnimationIteration"),animationstart:hs("Animation","AnimationStart"),transitionrun:hs("Transition","TransitionRun"),transitionstart:hs("Transition","TransitionStart"),transitioncancel:hs("Transition","TransitionCancel"),transitionend:hs("Transition","TransitionEnd")},mo={},gu={};xa&&(gu=document.createElement("div").style,"AnimationEvent"in window||(delete Qs.animationend.animation,delete Qs.animationiteration.animation,delete Qs.animationstart.animation),"TransitionEvent"in window||delete Qs.transitionend.transition);function fs(e){if(mo[e])return mo[e];if(!Qs[e])return e;var a=Qs[e],s;for(s in a)if(a.hasOwnProperty(s)&&s in gu)return mo[e]=a[s];return e}var pu=fs("animationend"),bu=fs("animationiteration"),vu=fs("animationstart"),dg=fs("transitionrun"),ug=fs("transitionstart"),mg=fs("transitioncancel"),yu=fs("transitionend"),ju=new Map,ho="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ho.push("scrollEnd");function Kt(e,a){ju.set(e,a),us(a,[e])}var Nu=new WeakMap;function Pt(e,a){if(typeof e=="object"&&e!==null){var s=Nu.get(e);return s!==void 0?s:(a={value:e,source:a,stack:Bd(a)},Nu.set(e,a),a)}return{value:e,source:a,stack:Bd(a)}}var Vt=[],Xs=0,fo=0;function xn(){for(var e=Xs,a=fo=Xs=0;a<e;){var s=Vt[a];Vt[a++]=null;var l=Vt[a];Vt[a++]=null;var i=Vt[a];Vt[a++]=null;var d=Vt[a];if(Vt[a++]=null,l!==null&&i!==null){var g=l.pending;g===null?i.next=i:(i.next=g.next,g.next=i),l.pending=i}d!==0&&wu(s,i,d)}}function gn(e,a,s,l){Vt[Xs++]=e,Vt[Xs++]=a,Vt[Xs++]=s,Vt[Xs++]=l,fo|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function xo(e,a,s,l){return gn(e,a,s,l),pn(e)}function Fs(e,a){return gn(e,null,null,a),pn(e)}function wu(e,a,s){e.lanes|=s;var l=e.alternate;l!==null&&(l.lanes|=s);for(var i=!1,d=e.return;d!==null;)d.childLanes|=s,l=d.alternate,l!==null&&(l.childLanes|=s),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(i=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,i&&a!==null&&(i=31-jt(s),e=d.hiddenUpdates,l=e[i],l===null?e[i]=[a]:l.push(a),a.lane=s|536870912),d):null}function pn(e){if(50<Sr)throw Sr=0,jc=null,Error(u(185));for(var a=e.return;a!==null;)e=a,a=e.return;return e.tag===3?e.stateNode:null}var Zs={};function hg(e,a,s,l){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wt(e,a,s,l){return new hg(e,a,s,l)}function go(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ga(e,a){var s=e.alternate;return s===null?(s=wt(e.tag,a,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=a,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,a=e.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function _u(e,a){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=a,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,a=s.dependencies,e.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),e}function bn(e,a,s,l,i,d){var g=0;if(l=e,typeof e=="function")go(e)&&(g=1);else if(typeof e=="string")g=xp(e,s,oe.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case N:return e=wt(31,s,a,i),e.elementType=N,e.lanes=d,e;case O:return xs(s.children,i,d,a);case _:g=8,i|=24;break;case $:return e=wt(12,s,a,i|2),e.elementType=$,e.lanes=d,e;case E:return e=wt(13,s,a,i),e.elementType=E,e.lanes=d,e;case S:return e=wt(19,s,a,i),e.elementType=S,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case q:case V:g=10;break e;case k:g=9;break e;case F:g=11;break e;case D:g=14;break e;case z:g=16,l=null;break e}g=29,s=Error(u(130,e===null?"null":typeof e,"")),l=null}return a=wt(g,s,a,i),a.elementType=e,a.type=l,a.lanes=d,a}function xs(e,a,s,l){return e=wt(7,e,l,a),e.lanes=s,e}function po(e,a,s){return e=wt(6,e,null,a),e.lanes=s,e}function bo(e,a,s){return a=wt(4,e.children!==null?e.children:[],e.key,a),a.lanes=s,a.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},a}var Ks=[],Js=0,vn=null,yn=0,Ht=[],It=0,gs=null,pa=1,ba="";function ps(e,a){Ks[Js++]=yn,Ks[Js++]=vn,vn=e,yn=a}function Su(e,a,s){Ht[It++]=pa,Ht[It++]=ba,Ht[It++]=gs,gs=e;var l=pa;e=ba;var i=32-jt(l)-1;l&=~(1<<i),s+=1;var d=32-jt(a)+i;if(30<d){var g=i-i%5;d=(l&(1<<g)-1).toString(32),l>>=g,i-=g,pa=1<<32-jt(a)+i|s<<i|l,ba=d+e}else pa=1<<d|s<<i|l,ba=e}function vo(e){e.return!==null&&(ps(e,1),Su(e,1,0))}function yo(e){for(;e===vn;)vn=Ks[--Js],Ks[Js]=null,yn=Ks[--Js],Ks[Js]=null;for(;e===gs;)gs=Ht[--It],Ht[It]=null,ba=Ht[--It],Ht[It]=null,pa=Ht[--It],Ht[It]=null}var ht=null,Le=null,Ce=!1,bs=null,sa=!1,jo=Error(u(519));function vs(e){var a=Error(u(418,""));throw sr(Pt(a,e)),jo}function Eu(e){var a=e.stateNode,s=e.type,l=e.memoizedProps;switch(a[ot]=e,a[xt]=l,s){case"dialog":we("cancel",a),we("close",a);break;case"iframe":case"object":case"embed":we("load",a);break;case"video":case"audio":for(s=0;s<Cr.length;s++)we(Cr[s],a);break;case"source":we("error",a);break;case"img":case"image":case"link":we("error",a),we("load",a);break;case"details":we("toggle",a);break;case"input":we("invalid",a),Ld(a,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),rn(a);break;case"select":we("invalid",a);break;case"textarea":we("invalid",a),Vd(a,l.value,l.defaultValue,l.children),rn(a)}s=l.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||a.textContent===""+s||l.suppressHydrationWarning===!0||Vh(a.textContent,s)?(l.popover!=null&&(we("beforetoggle",a),we("toggle",a)),l.onScroll!=null&&we("scroll",a),l.onScrollEnd!=null&&we("scrollend",a),l.onClick!=null&&(a.onclick=ei),a=!0):a=!1,a||vs(e)}function Cu(e){for(ht=e.return;ht;)switch(ht.tag){case 5:case 13:sa=!1;return;case 27:case 3:sa=!0;return;default:ht=ht.return}}function tr(e){if(e!==ht)return!1;if(!Ce)return Cu(e),Ce=!0,!1;var a=e.tag,s;if((s=a!==3&&a!==27)&&((s=a===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||$c(e.type,e.memoizedProps)),s=!s),s&&Le&&vs(e),Cu(e),a===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));e:{for(e=e.nextSibling,a=0;e;){if(e.nodeType===8)if(s=e.data,s==="/$"){if(a===0){Le=Wt(e.nextSibling);break e}a--}else s!=="$"&&s!=="$!"&&s!=="$?"||a++;e=e.nextSibling}Le=null}}else a===27?(a=Le,Ka(e.type)?(e=Lc,Lc=null,Le=e):Le=a):Le=ht?Wt(e.stateNode.nextSibling):null;return!0}function ar(){Le=ht=null,Ce=!1}function Au(){var e=bs;return e!==null&&(vt===null?vt=e:vt.push.apply(vt,e),bs=null),e}function sr(e){bs===null?bs=[e]:bs.push(e)}var No=le(null),ys=null,va=null;function Ua(e,a,s){ne(No,a._currentValue),a._currentValue=s}function ya(e){e._currentValue=No.current,W(No)}function wo(e,a,s){for(;e!==null;){var l=e.alternate;if((e.childLanes&a)!==a?(e.childLanes|=a,l!==null&&(l.childLanes|=a)):l!==null&&(l.childLanes&a)!==a&&(l.childLanes|=a),e===s)break;e=e.return}}function _o(e,a,s,l){var i=e.child;for(i!==null&&(i.return=e);i!==null;){var d=i.dependencies;if(d!==null){var g=i.child;d=d.firstContext;e:for(;d!==null;){var b=d;d=i;for(var A=0;A<a.length;A++)if(b.context===a[A]){d.lanes|=s,b=d.alternate,b!==null&&(b.lanes|=s),wo(d.return,s,e),l||(g=null);break e}d=b.next}}else if(i.tag===18){if(g=i.return,g===null)throw Error(u(341));g.lanes|=s,d=g.alternate,d!==null&&(d.lanes|=s),wo(g,s,e),g=null}else g=i.child;if(g!==null)g.return=i;else for(g=i;g!==null;){if(g===e){g=null;break}if(i=g.sibling,i!==null){i.return=g.return,g=i;break}g=g.return}i=g}}function lr(e,a,s,l){e=null;for(var i=a,d=!1;i!==null;){if(!d){if((i.flags&524288)!==0)d=!0;else if((i.flags&262144)!==0)break}if(i.tag===10){var g=i.alternate;if(g===null)throw Error(u(387));if(g=g.memoizedProps,g!==null){var b=i.type;Nt(i.pendingProps.value,g.value)||(e!==null?e.push(b):e=[b])}}else if(i===je.current){if(g=i.alternate,g===null)throw Error(u(387));g.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(e!==null?e.push(Rr):e=[Rr])}i=i.return}e!==null&&_o(a,e,s,l),a.flags|=262144}function jn(e){for(e=e.firstContext;e!==null;){if(!Nt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function js(e){ys=e,va=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ct(e){return Du(ys,e)}function Nn(e,a){return ys===null&&js(e),Du(e,a)}function Du(e,a){var s=a._currentValue;if(a={context:a,memoizedValue:s,next:null},va===null){if(e===null)throw Error(u(308));va=a,e.dependencies={lanes:0,firstContext:a},e.flags|=524288}else va=va.next=a;return s}var fg=typeof AbortController!="undefined"?AbortController:function(){var e=[],a=this.signal={aborted:!1,addEventListener:function(s,l){e.push(l)}};this.abort=function(){a.aborted=!0,e.forEach(function(s){return s()})}},xg=o.unstable_scheduleCallback,gg=o.unstable_NormalPriority,Ke={$$typeof:V,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function So(){return{controller:new fg,data:new Map,refCount:0}}function rr(e){e.refCount--,e.refCount===0&&xg(gg,function(){e.controller.abort()})}var nr=null,Eo=0,Ws=0,el=null;function pg(e,a){if(nr===null){var s=nr=[];Eo=0,Ws=Ac(),el={status:"pending",value:void 0,then:function(l){s.push(l)}}}return Eo++,a.then(Ou,Ou),a}function Ou(){if(--Eo===0&&nr!==null){el!==null&&(el.status="fulfilled");var e=nr;nr=null,Ws=0,el=null;for(var a=0;a<e.length;a++)(0,e[a])()}}function bg(e,a){var s=[],l={status:"pending",value:null,reason:null,then:function(i){s.push(i)}};return e.then(function(){l.status="fulfilled",l.value=a;for(var i=0;i<s.length;i++)(0,s[i])(a)},function(i){for(l.status="rejected",l.reason=i,i=0;i<s.length;i++)(0,s[i])(void 0)}),l}var Tu=T.S;T.S=function(e,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&pg(e,a),Tu!==null&&Tu(e,a)};var Ns=le(null);function Co(){var e=Ns.current;return e!==null?e:ze.pooledCache}function wn(e,a){a===null?ne(Ns,Ns.current):ne(Ns,a.pool)}function Mu(){var e=Co();return e===null?null:{parent:Ke._currentValue,pool:e}}var ir=Error(u(460)),Ru=Error(u(474)),_n=Error(u(542)),Ao={then:function(){}};function zu(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Sn(){}function ku(e,a,s){switch(s=e[s],s===void 0?e.push(a):s!==a&&(a.then(Sn,Sn),a=s),a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,$u(e),e;default:if(typeof a.status=="string")a.then(Sn,Sn);else{if(e=ze,e!==null&&100<e.shellSuspendCounter)throw Error(u(482));e=a,e.status="pending",e.then(function(l){if(a.status==="pending"){var i=a;i.status="fulfilled",i.value=l}},function(l){if(a.status==="pending"){var i=a;i.status="rejected",i.reason=l}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,$u(e),e}throw or=a,ir}}var or=null;function Uu(){if(or===null)throw Error(u(459));var e=or;return or=null,e}function $u(e){if(e===ir||e===_n)throw Error(u(483))}var $a=!1;function Do(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Oo(e,a){e=e.updateQueue,a.updateQueue===e&&(a.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ba(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function qa(e,a,s){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Ae&2)!==0){var i=l.pending;return i===null?a.next=a:(a.next=i.next,i.next=a),l.pending=a,a=pn(e),wu(e,null,s),a}return gn(e,l,a,s),pn(e)}function cr(e,a,s){if(a=a.updateQueue,a!==null&&(a=a.shared,(s&4194048)!==0)){var l=a.lanes;l&=e.pendingLanes,s|=l,a.lanes=s,Od(e,s)}}function To(e,a){var s=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var i=null,d=null;if(s=s.firstBaseUpdate,s!==null){do{var g={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};d===null?i=d=g:d=d.next=g,s=s.next}while(s!==null);d===null?i=d=a:d=d.next=a}else i=d=a;s={baseState:l.baseState,firstBaseUpdate:i,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=a:e.next=a,s.lastBaseUpdate=a}var Mo=!1;function dr(){if(Mo){var e=el;if(e!==null)throw e}}function ur(e,a,s,l){Mo=!1;var i=e.updateQueue;$a=!1;var d=i.firstBaseUpdate,g=i.lastBaseUpdate,b=i.shared.pending;if(b!==null){i.shared.pending=null;var A=b,P=A.next;A.next=null,g===null?d=P:g.next=P,g=A;var ee=e.alternate;ee!==null&&(ee=ee.updateQueue,b=ee.lastBaseUpdate,b!==g&&(b===null?ee.firstBaseUpdate=P:b.next=P,ee.lastBaseUpdate=A))}if(d!==null){var se=i.baseState;g=0,ee=P=A=null,b=d;do{var I=b.lane&-536870913,Y=I!==b.lane;if(Y?(Se&I)===I:(l&I)===I){I!==0&&I===Ws&&(Mo=!0),ee!==null&&(ee=ee.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var he=e,de=b;I=a;var Me=s;switch(de.tag){case 1:if(he=de.payload,typeof he=="function"){se=he.call(Me,se,I);break e}se=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=de.payload,I=typeof he=="function"?he.call(Me,se,I):he,I==null)break e;se=w({},se,I);break e;case 2:$a=!0}}I=b.callback,I!==null&&(e.flags|=64,Y&&(e.flags|=8192),Y=i.callbacks,Y===null?i.callbacks=[I]:Y.push(I))}else Y={lane:I,tag:b.tag,payload:b.payload,callback:b.callback,next:null},ee===null?(P=ee=Y,A=se):ee=ee.next=Y,g|=I;if(b=b.next,b===null){if(b=i.shared.pending,b===null)break;Y=b,b=Y.next,Y.next=null,i.lastBaseUpdate=Y,i.shared.pending=null}}while(!0);ee===null&&(A=se),i.baseState=A,i.firstBaseUpdate=P,i.lastBaseUpdate=ee,d===null&&(i.shared.lanes=0),Qa|=g,e.lanes=g,e.memoizedState=se}}function Bu(e,a){if(typeof e!="function")throw Error(u(191,e));e.call(a)}function qu(e,a){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)Bu(s[e],a)}var tl=le(null),En=le(0);function Gu(e,a){e=Ca,ne(En,e),ne(tl,a),Ca=e|a.baseLanes}function Ro(){ne(En,Ca),ne(tl,tl.current)}function zo(){Ca=En.current,W(tl),W(En)}var Ga=0,be=null,Oe=null,Qe=null,Cn=!1,al=!1,ws=!1,An=0,mr=0,sl=null,vg=0;function He(){throw Error(u(321))}function ko(e,a){if(a===null)return!1;for(var s=0;s<a.length&&s<e.length;s++)if(!Nt(e[s],a[s]))return!1;return!0}function Uo(e,a,s,l,i,d){return Ga=d,be=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,T.H=e===null||e.memoizedState===null?wm:_m,ws=!1,d=s(l,i),ws=!1,al&&(d=Pu(a,s,l,i)),Lu(e),d}function Lu(e){T.H=zn;var a=Oe!==null&&Oe.next!==null;if(Ga=0,Qe=Oe=be=null,Cn=!1,mr=0,sl=null,a)throw Error(u(300));e===null||et||(e=e.dependencies,e!==null&&jn(e)&&(et=!0))}function Pu(e,a,s,l){be=e;var i=0;do{if(al&&(sl=null),mr=0,al=!1,25<=i)throw Error(u(301));if(i+=1,Qe=Oe=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}T.H=Eg,d=a(s,l)}while(al);return d}function yg(){var e=T.H,a=e.useState()[0];return a=typeof a.then=="function"?hr(a):a,e=e.useState()[0],(Oe!==null?Oe.memoizedState:null)!==e&&(be.flags|=1024),a}function $o(){var e=An!==0;return An=0,e}function Bo(e,a,s){a.updateQueue=e.updateQueue,a.flags&=-2053,e.lanes&=~s}function qo(e){if(Cn){for(e=e.memoizedState;e!==null;){var a=e.queue;a!==null&&(a.pending=null),e=e.next}Cn=!1}Ga=0,Qe=Oe=be=null,al=!1,mr=An=0,sl=null}function pt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?be.memoizedState=Qe=e:Qe=Qe.next=e,Qe}function Xe(){if(Oe===null){var e=be.alternate;e=e!==null?e.memoizedState:null}else e=Oe.next;var a=Qe===null?be.memoizedState:Qe.next;if(a!==null)Qe=a,Oe=e;else{if(e===null)throw be.alternate===null?Error(u(467)):Error(u(310));Oe=e,e={memoizedState:Oe.memoizedState,baseState:Oe.baseState,baseQueue:Oe.baseQueue,queue:Oe.queue,next:null},Qe===null?be.memoizedState=Qe=e:Qe=Qe.next=e}return Qe}function Go(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function hr(e){var a=mr;return mr+=1,sl===null&&(sl=[]),e=ku(sl,e,a),a=be,(Qe===null?a.memoizedState:Qe.next)===null&&(a=a.alternate,T.H=a===null||a.memoizedState===null?wm:_m),e}function Dn(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return hr(e);if(e.$$typeof===V)return ct(e)}throw Error(u(438,String(e)))}function Lo(e){var a=null,s=be.updateQueue;if(s!==null&&(a=s.memoCache),a==null){var l=be.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(a={data:l.data.map(function(i){return i.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),s===null&&(s=Go(),be.updateQueue=s),s.memoCache=a,s=a.data[a.index],s===void 0)for(s=a.data[a.index]=Array(e),l=0;l<e;l++)s[l]=M;return a.index++,s}function ja(e,a){return typeof a=="function"?a(e):a}function On(e){var a=Xe();return Po(a,Oe,e)}function Po(e,a,s){var l=e.queue;if(l===null)throw Error(u(311));l.lastRenderedReducer=s;var i=e.baseQueue,d=l.pending;if(d!==null){if(i!==null){var g=i.next;i.next=d.next,d.next=g}a.baseQueue=i=d,l.pending=null}if(d=e.baseState,i===null)e.memoizedState=d;else{a=i.next;var b=g=null,A=null,P=a,ee=!1;do{var se=P.lane&-536870913;if(se!==P.lane?(Se&se)===se:(Ga&se)===se){var I=P.revertLane;if(I===0)A!==null&&(A=A.next={lane:0,revertLane:0,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),se===Ws&&(ee=!0);else if((Ga&I)===I){P=P.next,I===Ws&&(ee=!0);continue}else se={lane:0,revertLane:P.revertLane,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},A===null?(b=A=se,g=d):A=A.next=se,be.lanes|=I,Qa|=I;se=P.action,ws&&s(d,se),d=P.hasEagerState?P.eagerState:s(d,se)}else I={lane:se,revertLane:P.revertLane,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},A===null?(b=A=I,g=d):A=A.next=I,be.lanes|=se,Qa|=se;P=P.next}while(P!==null&&P!==a);if(A===null?g=d:A.next=b,!Nt(d,e.memoizedState)&&(et=!0,ee&&(s=el,s!==null)))throw s;e.memoizedState=d,e.baseState=g,e.baseQueue=A,l.lastRenderedState=d}return i===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Vo(e){var a=Xe(),s=a.queue;if(s===null)throw Error(u(311));s.lastRenderedReducer=e;var l=s.dispatch,i=s.pending,d=a.memoizedState;if(i!==null){s.pending=null;var g=i=i.next;do d=e(d,g.action),g=g.next;while(g!==i);Nt(d,a.memoizedState)||(et=!0),a.memoizedState=d,a.baseQueue===null&&(a.baseState=d),s.lastRenderedState=d}return[d,l]}function Vu(e,a,s){var l=be,i=Xe(),d=Ce;if(d){if(s===void 0)throw Error(u(407));s=s()}else s=a();var g=!Nt((Oe||i).memoizedState,s);g&&(i.memoizedState=s,et=!0),i=i.queue;var b=Yu.bind(null,l,i,e);if(fr(2048,8,b,[e]),i.getSnapshot!==a||g||Qe!==null&&Qe.memoizedState.tag&1){if(l.flags|=2048,ll(9,Tn(),Iu.bind(null,l,i,s,a),null),ze===null)throw Error(u(349));d||(Ga&124)!==0||Hu(l,a,s)}return s}function Hu(e,a,s){e.flags|=16384,e={getSnapshot:a,value:s},a=be.updateQueue,a===null?(a=Go(),be.updateQueue=a,a.stores=[e]):(s=a.stores,s===null?a.stores=[e]:s.push(e))}function Iu(e,a,s,l){a.value=s,a.getSnapshot=l,Qu(a)&&Xu(e)}function Yu(e,a,s){return s(function(){Qu(a)&&Xu(e)})}function Qu(e){var a=e.getSnapshot;e=e.value;try{var s=a();return!Nt(e,s)}catch(l){return!0}}function Xu(e){var a=Fs(e,2);a!==null&&At(a,e,2)}function Ho(e){var a=pt();if(typeof e=="function"){var s=e;if(e=s(),ws){Ra(!0);try{s()}finally{Ra(!1)}}}return a.memoizedState=a.baseState=e,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:e},a}function Fu(e,a,s,l){return e.baseState=s,Po(e,Oe,typeof l=="function"?l:ja)}function jg(e,a,s,l,i){if(Rn(e))throw Error(u(485));if(e=a.action,e!==null){var d={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(g){d.listeners.push(g)}};T.T!==null?s(!0):d.isTransition=!1,l(d),s=a.pending,s===null?(d.next=a.pending=d,Zu(a,d)):(d.next=s.next,a.pending=s.next=d)}}function Zu(e,a){var s=a.action,l=a.payload,i=e.state;if(a.isTransition){var d=T.T,g={};T.T=g;try{var b=s(i,l),A=T.S;A!==null&&A(g,b),Ku(e,a,b)}catch(P){Io(e,a,P)}finally{T.T=d}}else try{d=s(i,l),Ku(e,a,d)}catch(P){Io(e,a,P)}}function Ku(e,a,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(l){Ju(e,a,l)},function(l){return Io(e,a,l)}):Ju(e,a,s)}function Ju(e,a,s){a.status="fulfilled",a.value=s,Wu(a),e.state=s,a=e.pending,a!==null&&(s=a.next,s===a?e.pending=null:(s=s.next,a.next=s,Zu(e,s)))}function Io(e,a,s){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do a.status="rejected",a.reason=s,Wu(a),a=a.next;while(a!==l)}e.action=null}function Wu(e){e=e.listeners;for(var a=0;a<e.length;a++)(0,e[a])()}function em(e,a){return a}function tm(e,a){if(Ce){var s=ze.formState;if(s!==null){e:{var l=be;if(Ce){if(Le){t:{for(var i=Le,d=sa;i.nodeType!==8;){if(!d){i=null;break t}if(i=Wt(i.nextSibling),i===null){i=null;break t}}d=i.data,i=d==="F!"||d==="F"?i:null}if(i){Le=Wt(i.nextSibling),l=i.data==="F!";break e}}vs(l)}l=!1}l&&(a=s[0])}}return s=pt(),s.memoizedState=s.baseState=a,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:em,lastRenderedState:a},s.queue=l,s=ym.bind(null,be,l),l.dispatch=s,l=Ho(!1),d=Zo.bind(null,be,!1,l.queue),l=pt(),i={state:a,dispatch:null,action:e,pending:null},l.queue=i,s=jg.bind(null,be,i,d,s),i.dispatch=s,l.memoizedState=e,[a,s,!1]}function am(e){var a=Xe();return sm(a,Oe,e)}function sm(e,a,s){if(a=Po(e,a,em)[0],e=On(ja)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var l=hr(a)}catch(g){throw g===ir?_n:g}else l=a;a=Xe();var i=a.queue,d=i.dispatch;return s!==a.memoizedState&&(be.flags|=2048,ll(9,Tn(),Ng.bind(null,i,s),null)),[l,d,e]}function Ng(e,a){e.action=a}function lm(e){var a=Xe(),s=Oe;if(s!==null)return sm(a,s,e);Xe(),a=a.memoizedState,s=Xe();var l=s.queue.dispatch;return s.memoizedState=e,[a,l,!1]}function ll(e,a,s,l){return e={tag:e,create:s,deps:l,inst:a,next:null},a=be.updateQueue,a===null&&(a=Go(),be.updateQueue=a),s=a.lastEffect,s===null?a.lastEffect=e.next=e:(l=s.next,s.next=e,e.next=l,a.lastEffect=e),e}function Tn(){return{destroy:void 0,resource:void 0}}function rm(){return Xe().memoizedState}function Mn(e,a,s,l){var i=pt();l=l===void 0?null:l,be.flags|=e,i.memoizedState=ll(1|a,Tn(),s,l)}function fr(e,a,s,l){var i=Xe();l=l===void 0?null:l;var d=i.memoizedState.inst;Oe!==null&&l!==null&&ko(l,Oe.memoizedState.deps)?i.memoizedState=ll(a,d,s,l):(be.flags|=e,i.memoizedState=ll(1|a,d,s,l))}function nm(e,a){Mn(8390656,8,e,a)}function im(e,a){fr(2048,8,e,a)}function om(e,a){return fr(4,2,e,a)}function cm(e,a){return fr(4,4,e,a)}function dm(e,a){if(typeof a=="function"){e=e();var s=a(e);return function(){typeof s=="function"?s():a(null)}}if(a!=null)return e=e(),a.current=e,function(){a.current=null}}function um(e,a,s){s=s!=null?s.concat([e]):null,fr(4,4,dm.bind(null,a,e),s)}function Yo(){}function mm(e,a){var s=Xe();a=a===void 0?null:a;var l=s.memoizedState;return a!==null&&ko(a,l[1])?l[0]:(s.memoizedState=[e,a],e)}function hm(e,a){var s=Xe();a=a===void 0?null:a;var l=s.memoizedState;if(a!==null&&ko(a,l[1]))return l[0];if(l=e(),ws){Ra(!0);try{e()}finally{Ra(!1)}}return s.memoizedState=[l,a],l}function Qo(e,a,s){return s===void 0||(Ga&1073741824)!==0?e.memoizedState=a:(e.memoizedState=s,e=gh(),be.lanes|=e,Qa|=e,s)}function fm(e,a,s,l){return Nt(s,a)?s:tl.current!==null?(e=Qo(e,s,l),Nt(e,a)||(et=!0),e):(Ga&42)===0?(et=!0,e.memoizedState=s):(e=gh(),be.lanes|=e,Qa|=e,a)}function xm(e,a,s,l,i){var d=H.p;H.p=d!==0&&8>d?d:8;var g=T.T,b={};T.T=b,Zo(e,!1,a,s);try{var A=i(),P=T.S;if(P!==null&&P(b,A),A!==null&&typeof A=="object"&&typeof A.then=="function"){var ee=bg(A,l);xr(e,a,ee,Ct(e))}else xr(e,a,l,Ct(e))}catch(se){xr(e,a,{then:function(){},status:"rejected",reason:se},Ct())}finally{H.p=d,T.T=g}}function wg(){}function Xo(e,a,s,l){if(e.tag!==5)throw Error(u(476));var i=gm(e).queue;xm(e,i,a,Q,s===null?wg:function(){return pm(e),s(l)})}function gm(e){var a=e.memoizedState;if(a!==null)return a;a={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:Q},next:null};var s={};return a.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:s},next:null},e.memoizedState=a,e=e.alternate,e!==null&&(e.memoizedState=a),a}function pm(e){var a=gm(e).next.queue;xr(e,a,{},Ct())}function Fo(){return ct(Rr)}function bm(){return Xe().memoizedState}function vm(){return Xe().memoizedState}function _g(e){for(var a=e.return;a!==null;){switch(a.tag){case 24:case 3:var s=Ct();e=Ba(s);var l=qa(a,e,s);l!==null&&(At(l,a,s),cr(l,a,s)),a={cache:So()},e.payload=a;return}a=a.return}}function Sg(e,a,s){var l=Ct();s={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},Rn(e)?jm(a,s):(s=xo(e,a,s,l),s!==null&&(At(s,e,l),Nm(s,a,l)))}function ym(e,a,s){var l=Ct();xr(e,a,s,l)}function xr(e,a,s,l){var i={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if(Rn(e))jm(a,i);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=a.lastRenderedReducer,d!==null))try{var g=a.lastRenderedState,b=d(g,s);if(i.hasEagerState=!0,i.eagerState=b,Nt(b,g))return gn(e,a,i,0),ze===null&&xn(),!1}catch(A){}finally{}if(s=xo(e,a,i,l),s!==null)return At(s,e,l),Nm(s,a,l),!0}return!1}function Zo(e,a,s,l){if(l={lane:2,revertLane:Ac(),action:l,hasEagerState:!1,eagerState:null,next:null},Rn(e)){if(a)throw Error(u(479))}else a=xo(e,s,l,2),a!==null&&At(a,e,2)}function Rn(e){var a=e.alternate;return e===be||a!==null&&a===be}function jm(e,a){al=Cn=!0;var s=e.pending;s===null?a.next=a:(a.next=s.next,s.next=a),e.pending=a}function Nm(e,a,s){if((s&4194048)!==0){var l=a.lanes;l&=e.pendingLanes,s|=l,a.lanes=s,Od(e,s)}}var zn={readContext:ct,use:Dn,useCallback:He,useContext:He,useEffect:He,useImperativeHandle:He,useLayoutEffect:He,useInsertionEffect:He,useMemo:He,useReducer:He,useRef:He,useState:He,useDebugValue:He,useDeferredValue:He,useTransition:He,useSyncExternalStore:He,useId:He,useHostTransitionStatus:He,useFormState:He,useActionState:He,useOptimistic:He,useMemoCache:He,useCacheRefresh:He},wm={readContext:ct,use:Dn,useCallback:function(e,a){return pt().memoizedState=[e,a===void 0?null:a],e},useContext:ct,useEffect:nm,useImperativeHandle:function(e,a,s){s=s!=null?s.concat([e]):null,Mn(4194308,4,dm.bind(null,a,e),s)},useLayoutEffect:function(e,a){return Mn(4194308,4,e,a)},useInsertionEffect:function(e,a){Mn(4,2,e,a)},useMemo:function(e,a){var s=pt();a=a===void 0?null:a;var l=e();if(ws){Ra(!0);try{e()}finally{Ra(!1)}}return s.memoizedState=[l,a],l},useReducer:function(e,a,s){var l=pt();if(s!==void 0){var i=s(a);if(ws){Ra(!0);try{s(a)}finally{Ra(!1)}}}else i=a;return l.memoizedState=l.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},l.queue=e,e=e.dispatch=Sg.bind(null,be,e),[l.memoizedState,e]},useRef:function(e){var a=pt();return e={current:e},a.memoizedState=e},useState:function(e){e=Ho(e);var a=e.queue,s=ym.bind(null,be,a);return a.dispatch=s,[e.memoizedState,s]},useDebugValue:Yo,useDeferredValue:function(e,a){var s=pt();return Qo(s,e,a)},useTransition:function(){var e=Ho(!1);return e=xm.bind(null,be,e.queue,!0,!1),pt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,a,s){var l=be,i=pt();if(Ce){if(s===void 0)throw Error(u(407));s=s()}else{if(s=a(),ze===null)throw Error(u(349));(Se&124)!==0||Hu(l,a,s)}i.memoizedState=s;var d={value:s,getSnapshot:a};return i.queue=d,nm(Yu.bind(null,l,d,e),[e]),l.flags|=2048,ll(9,Tn(),Iu.bind(null,l,d,s,a),null),s},useId:function(){var e=pt(),a=ze.identifierPrefix;if(Ce){var s=ba,l=pa;s=(l&~(1<<32-jt(l)-1)).toString(32)+s,a="«"+a+"R"+s,s=An++,0<s&&(a+="H"+s.toString(32)),a+="»"}else s=vg++,a="«"+a+"r"+s.toString(32)+"»";return e.memoizedState=a},useHostTransitionStatus:Fo,useFormState:tm,useActionState:tm,useOptimistic:function(e){var a=pt();a.memoizedState=a.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=s,a=Zo.bind(null,be,!0,s),s.dispatch=a,[e,a]},useMemoCache:Lo,useCacheRefresh:function(){return pt().memoizedState=_g.bind(null,be)}},_m={readContext:ct,use:Dn,useCallback:mm,useContext:ct,useEffect:im,useImperativeHandle:um,useInsertionEffect:om,useLayoutEffect:cm,useMemo:hm,useReducer:On,useRef:rm,useState:function(){return On(ja)},useDebugValue:Yo,useDeferredValue:function(e,a){var s=Xe();return fm(s,Oe.memoizedState,e,a)},useTransition:function(){var e=On(ja)[0],a=Xe().memoizedState;return[typeof e=="boolean"?e:hr(e),a]},useSyncExternalStore:Vu,useId:bm,useHostTransitionStatus:Fo,useFormState:am,useActionState:am,useOptimistic:function(e,a){var s=Xe();return Fu(s,Oe,e,a)},useMemoCache:Lo,useCacheRefresh:vm},Eg={readContext:ct,use:Dn,useCallback:mm,useContext:ct,useEffect:im,useImperativeHandle:um,useInsertionEffect:om,useLayoutEffect:cm,useMemo:hm,useReducer:Vo,useRef:rm,useState:function(){return Vo(ja)},useDebugValue:Yo,useDeferredValue:function(e,a){var s=Xe();return Oe===null?Qo(s,e,a):fm(s,Oe.memoizedState,e,a)},useTransition:function(){var e=Vo(ja)[0],a=Xe().memoizedState;return[typeof e=="boolean"?e:hr(e),a]},useSyncExternalStore:Vu,useId:bm,useHostTransitionStatus:Fo,useFormState:lm,useActionState:lm,useOptimistic:function(e,a){var s=Xe();return Oe!==null?Fu(s,Oe,e,a):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:Lo,useCacheRefresh:vm},rl=null,gr=0;function kn(e){var a=gr;return gr+=1,rl===null&&(rl=[]),ku(rl,e,a)}function pr(e,a){a=a.props.ref,e.ref=a!==void 0?a:null}function Un(e,a){throw a.$$typeof===j?Error(u(525)):(e=Object.prototype.toString.call(a),Error(u(31,e==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":e)))}function Sm(e){var a=e._init;return a(e._payload)}function Em(e){function a(B,R){if(e){var L=B.deletions;L===null?(B.deletions=[R],B.flags|=16):L.push(R)}}function s(B,R){if(!e)return null;for(;R!==null;)a(B,R),R=R.sibling;return null}function l(B){for(var R=new Map;B!==null;)B.key!==null?R.set(B.key,B):R.set(B.index,B),B=B.sibling;return R}function i(B,R){return B=ga(B,R),B.index=0,B.sibling=null,B}function d(B,R,L){return B.index=L,e?(L=B.alternate,L!==null?(L=L.index,L<R?(B.flags|=67108866,R):L):(B.flags|=67108866,R)):(B.flags|=1048576,R)}function g(B){return e&&B.alternate===null&&(B.flags|=67108866),B}function b(B,R,L,te){return R===null||R.tag!==6?(R=po(L,B.mode,te),R.return=B,R):(R=i(R,L),R.return=B,R)}function A(B,R,L,te){var ie=L.type;return ie===O?ee(B,R,L.props.children,te,L.key):R!==null&&(R.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===z&&Sm(ie)===R.type)?(R=i(R,L.props),pr(R,L),R.return=B,R):(R=bn(L.type,L.key,L.props,null,B.mode,te),pr(R,L),R.return=B,R)}function P(B,R,L,te){return R===null||R.tag!==4||R.stateNode.containerInfo!==L.containerInfo||R.stateNode.implementation!==L.implementation?(R=bo(L,B.mode,te),R.return=B,R):(R=i(R,L.children||[]),R.return=B,R)}function ee(B,R,L,te,ie){return R===null||R.tag!==7?(R=xs(L,B.mode,te,ie),R.return=B,R):(R=i(R,L),R.return=B,R)}function se(B,R,L){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return R=po(""+R,B.mode,L),R.return=B,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case C:return L=bn(R.type,R.key,R.props,null,B.mode,L),pr(L,R),L.return=B,L;case y:return R=bo(R,B.mode,L),R.return=B,R;case z:var te=R._init;return R=te(R._payload),se(B,R,L)}if(re(R)||G(R))return R=xs(R,B.mode,L,null),R.return=B,R;if(typeof R.then=="function")return se(B,kn(R),L);if(R.$$typeof===V)return se(B,Nn(B,R),L);Un(B,R)}return null}function I(B,R,L,te){var ie=R!==null?R.key:null;if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return ie!==null?null:b(B,R,""+L,te);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case C:return L.key===ie?A(B,R,L,te):null;case y:return L.key===ie?P(B,R,L,te):null;case z:return ie=L._init,L=ie(L._payload),I(B,R,L,te)}if(re(L)||G(L))return ie!==null?null:ee(B,R,L,te,null);if(typeof L.then=="function")return I(B,R,kn(L),te);if(L.$$typeof===V)return I(B,R,Nn(B,L),te);Un(B,L)}return null}function Y(B,R,L,te,ie){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return B=B.get(L)||null,b(R,B,""+te,ie);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case C:return B=B.get(te.key===null?L:te.key)||null,A(R,B,te,ie);case y:return B=B.get(te.key===null?L:te.key)||null,P(R,B,te,ie);case z:var ye=te._init;return te=ye(te._payload),Y(B,R,L,te,ie)}if(re(te)||G(te))return B=B.get(L)||null,ee(R,B,te,ie,null);if(typeof te.then=="function")return Y(B,R,L,kn(te),ie);if(te.$$typeof===V)return Y(B,R,L,Nn(R,te),ie);Un(R,te)}return null}function he(B,R,L,te){for(var ie=null,ye=null,ce=R,ue=R=0,at=null;ce!==null&&ue<L.length;ue++){ce.index>ue?(at=ce,ce=null):at=ce.sibling;var Ee=I(B,ce,L[ue],te);if(Ee===null){ce===null&&(ce=at);break}e&&ce&&Ee.alternate===null&&a(B,ce),R=d(Ee,R,ue),ye===null?ie=Ee:ye.sibling=Ee,ye=Ee,ce=at}if(ue===L.length)return s(B,ce),Ce&&ps(B,ue),ie;if(ce===null){for(;ue<L.length;ue++)ce=se(B,L[ue],te),ce!==null&&(R=d(ce,R,ue),ye===null?ie=ce:ye.sibling=ce,ye=ce);return Ce&&ps(B,ue),ie}for(ce=l(ce);ue<L.length;ue++)at=Y(ce,B,ue,L[ue],te),at!==null&&(e&&at.alternate!==null&&ce.delete(at.key===null?ue:at.key),R=d(at,R,ue),ye===null?ie=at:ye.sibling=at,ye=at);return e&&ce.forEach(function(as){return a(B,as)}),Ce&&ps(B,ue),ie}function de(B,R,L,te){if(L==null)throw Error(u(151));for(var ie=null,ye=null,ce=R,ue=R=0,at=null,Ee=L.next();ce!==null&&!Ee.done;ue++,Ee=L.next()){ce.index>ue?(at=ce,ce=null):at=ce.sibling;var as=I(B,ce,Ee.value,te);if(as===null){ce===null&&(ce=at);break}e&&ce&&as.alternate===null&&a(B,ce),R=d(as,R,ue),ye===null?ie=as:ye.sibling=as,ye=as,ce=at}if(Ee.done)return s(B,ce),Ce&&ps(B,ue),ie;if(ce===null){for(;!Ee.done;ue++,Ee=L.next())Ee=se(B,Ee.value,te),Ee!==null&&(R=d(Ee,R,ue),ye===null?ie=Ee:ye.sibling=Ee,ye=Ee);return Ce&&ps(B,ue),ie}for(ce=l(ce);!Ee.done;ue++,Ee=L.next())Ee=Y(ce,B,ue,Ee.value,te),Ee!==null&&(e&&Ee.alternate!==null&&ce.delete(Ee.key===null?ue:Ee.key),R=d(Ee,R,ue),ye===null?ie=Ee:ye.sibling=Ee,ye=Ee);return e&&ce.forEach(function(Cp){return a(B,Cp)}),Ce&&ps(B,ue),ie}function Me(B,R,L,te){if(typeof L=="object"&&L!==null&&L.type===O&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case C:e:{for(var ie=L.key;R!==null;){if(R.key===ie){if(ie=L.type,ie===O){if(R.tag===7){s(B,R.sibling),te=i(R,L.props.children),te.return=B,B=te;break e}}else if(R.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===z&&Sm(ie)===R.type){s(B,R.sibling),te=i(R,L.props),pr(te,L),te.return=B,B=te;break e}s(B,R);break}else a(B,R);R=R.sibling}L.type===O?(te=xs(L.props.children,B.mode,te,L.key),te.return=B,B=te):(te=bn(L.type,L.key,L.props,null,B.mode,te),pr(te,L),te.return=B,B=te)}return g(B);case y:e:{for(ie=L.key;R!==null;){if(R.key===ie)if(R.tag===4&&R.stateNode.containerInfo===L.containerInfo&&R.stateNode.implementation===L.implementation){s(B,R.sibling),te=i(R,L.children||[]),te.return=B,B=te;break e}else{s(B,R);break}else a(B,R);R=R.sibling}te=bo(L,B.mode,te),te.return=B,B=te}return g(B);case z:return ie=L._init,L=ie(L._payload),Me(B,R,L,te)}if(re(L))return he(B,R,L,te);if(G(L)){if(ie=G(L),typeof ie!="function")throw Error(u(150));return L=ie.call(L),de(B,R,L,te)}if(typeof L.then=="function")return Me(B,R,kn(L),te);if(L.$$typeof===V)return Me(B,R,Nn(B,L),te);Un(B,L)}return typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint"?(L=""+L,R!==null&&R.tag===6?(s(B,R.sibling),te=i(R,L),te.return=B,B=te):(s(B,R),te=po(L,B.mode,te),te.return=B,B=te),g(B)):s(B,R)}return function(B,R,L,te){try{gr=0;var ie=Me(B,R,L,te);return rl=null,ie}catch(ce){if(ce===ir||ce===_n)throw ce;var ye=wt(29,ce,null,B.mode);return ye.lanes=te,ye.return=B,ye}finally{}}}var nl=Em(!0),Cm=Em(!1),Yt=le(null),la=null;function La(e){var a=e.alternate;ne(Je,Je.current&1),ne(Yt,e),la===null&&(a===null||tl.current!==null||a.memoizedState!==null)&&(la=e)}function Am(e){if(e.tag===22){if(ne(Je,Je.current),ne(Yt,e),la===null){var a=e.alternate;a!==null&&a.memoizedState!==null&&(la=e)}}else Pa()}function Pa(){ne(Je,Je.current),ne(Yt,Yt.current)}function Na(e){W(Yt),la===e&&(la=null),W(Je)}var Je=le(0);function $n(e){for(var a=e;a!==null;){if(a.tag===13){var s=a.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||Gc(s)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function Ko(e,a,s,l){a=e.memoizedState,s=s(l,a),s=s==null?a:w({},a,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Jo={enqueueSetState:function(e,a,s){e=e._reactInternals;var l=Ct(),i=Ba(l);i.payload=a,s!=null&&(i.callback=s),a=qa(e,i,l),a!==null&&(At(a,e,l),cr(a,e,l))},enqueueReplaceState:function(e,a,s){e=e._reactInternals;var l=Ct(),i=Ba(l);i.tag=1,i.payload=a,s!=null&&(i.callback=s),a=qa(e,i,l),a!==null&&(At(a,e,l),cr(a,e,l))},enqueueForceUpdate:function(e,a){e=e._reactInternals;var s=Ct(),l=Ba(s);l.tag=2,a!=null&&(l.callback=a),a=qa(e,l,s),a!==null&&(At(a,e,s),cr(a,e,s))}};function Dm(e,a,s,l,i,d,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,d,g):a.prototype&&a.prototype.isPureReactComponent?!Wl(s,l)||!Wl(i,d):!0}function Om(e,a,s,l){e=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(s,l),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(s,l),a.state!==e&&Jo.enqueueReplaceState(a,a.state,null)}function _s(e,a){var s=a;if("ref"in a){s={};for(var l in a)l!=="ref"&&(s[l]=a[l])}if(e=e.defaultProps){s===a&&(s=w({},s));for(var i in e)s[i]===void 0&&(s[i]=e[i])}return s}var Bn=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Tm(e){Bn(e)}function Mm(e){console.error(e)}function Rm(e){Bn(e)}function qn(e,a){try{var s=e.onUncaughtError;s(a.value,{componentStack:a.stack})}catch(l){setTimeout(function(){throw l})}}function zm(e,a,s){try{var l=e.onCaughtError;l(s.value,{componentStack:s.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function Wo(e,a,s){return s=Ba(s),s.tag=3,s.payload={element:null},s.callback=function(){qn(e,a)},s}function km(e){return e=Ba(e),e.tag=3,e}function Um(e,a,s,l){var i=s.type.getDerivedStateFromError;if(typeof i=="function"){var d=l.value;e.payload=function(){return i(d)},e.callback=function(){zm(a,s,l)}}var g=s.stateNode;g!==null&&typeof g.componentDidCatch=="function"&&(e.callback=function(){zm(a,s,l),typeof i!="function"&&(Xa===null?Xa=new Set([this]):Xa.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function Cg(e,a,s,l,i){if(s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(a=s.alternate,a!==null&&lr(a,s,i,!0),s=Yt.current,s!==null){switch(s.tag){case 13:return la===null?wc():s.alternate===null&&Pe===0&&(Pe=3),s.flags&=-257,s.flags|=65536,s.lanes=i,l===Ao?s.flags|=16384:(a=s.updateQueue,a===null?s.updateQueue=new Set([l]):a.add(l),Sc(e,l,i)),!1;case 22:return s.flags|=65536,l===Ao?s.flags|=16384:(a=s.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([l])},s.updateQueue=a):(s=a.retryQueue,s===null?a.retryQueue=new Set([l]):s.add(l)),Sc(e,l,i)),!1}throw Error(u(435,s.tag))}return Sc(e,l,i),wc(),!1}if(Ce)return a=Yt.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=i,l!==jo&&(e=Error(u(422),{cause:l}),sr(Pt(e,s)))):(l!==jo&&(a=Error(u(423),{cause:l}),sr(Pt(a,s))),e=e.current.alternate,e.flags|=65536,i&=-i,e.lanes|=i,l=Pt(l,s),i=Wo(e.stateNode,l,i),To(e,i),Pe!==4&&(Pe=2)),!1;var d=Error(u(520),{cause:l});if(d=Pt(d,s),_r===null?_r=[d]:_r.push(d),Pe!==4&&(Pe=2),a===null)return!0;l=Pt(l,s),s=a;do{switch(s.tag){case 3:return s.flags|=65536,e=i&-i,s.lanes|=e,e=Wo(s.stateNode,l,e),To(s,e),!1;case 1:if(a=s.type,d=s.stateNode,(s.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Xa===null||!Xa.has(d))))return s.flags|=65536,i&=-i,s.lanes|=i,i=km(i),Um(i,e,s,l),To(s,i),!1}s=s.return}while(s!==null);return!1}var $m=Error(u(461)),et=!1;function rt(e,a,s,l){a.child=e===null?Cm(a,null,s,l):nl(a,e.child,s,l)}function Bm(e,a,s,l,i){s=s.render;var d=a.ref;if("ref"in l){var g={};for(var b in l)b!=="ref"&&(g[b]=l[b])}else g=l;return js(a),l=Uo(e,a,s,g,d,i),b=$o(),e!==null&&!et?(Bo(e,a,i),wa(e,a,i)):(Ce&&b&&vo(a),a.flags|=1,rt(e,a,l,i),a.child)}function qm(e,a,s,l,i){if(e===null){var d=s.type;return typeof d=="function"&&!go(d)&&d.defaultProps===void 0&&s.compare===null?(a.tag=15,a.type=d,Gm(e,a,d,l,i)):(e=bn(s.type,null,l,a,a.mode,i),e.ref=a.ref,e.return=a,a.child=e)}if(d=e.child,!ic(e,i)){var g=d.memoizedProps;if(s=s.compare,s=s!==null?s:Wl,s(g,l)&&e.ref===a.ref)return wa(e,a,i)}return a.flags|=1,e=ga(d,l),e.ref=a.ref,e.return=a,a.child=e}function Gm(e,a,s,l,i){if(e!==null){var d=e.memoizedProps;if(Wl(d,l)&&e.ref===a.ref)if(et=!1,a.pendingProps=l=d,ic(e,i))(e.flags&131072)!==0&&(et=!0);else return a.lanes=e.lanes,wa(e,a,i)}return ec(e,a,s,l,i)}function Lm(e,a,s){var l=a.pendingProps,i=l.children,d=e!==null?e.memoizedState:null;if(l.mode==="hidden"){if((a.flags&128)!==0){if(l=d!==null?d.baseLanes|s:s,e!==null){for(i=a.child=e.child,d=0;i!==null;)d=d|i.lanes|i.childLanes,i=i.sibling;a.childLanes=d&~l}else a.childLanes=0,a.child=null;return Pm(e,a,l,s)}if((s&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},e!==null&&wn(a,d!==null?d.cachePool:null),d!==null?Gu(a,d):Ro(),Am(a);else return a.lanes=a.childLanes=536870912,Pm(e,a,d!==null?d.baseLanes|s:s,s)}else d!==null?(wn(a,d.cachePool),Gu(a,d),Pa(),a.memoizedState=null):(e!==null&&wn(a,null),Ro(),Pa());return rt(e,a,i,s),a.child}function Pm(e,a,s,l){var i=Co();return i=i===null?null:{parent:Ke._currentValue,pool:i},a.memoizedState={baseLanes:s,cachePool:i},e!==null&&wn(a,null),Ro(),Am(a),e!==null&&lr(e,a,l,!0),null}function Gn(e,a){var s=a.ref;if(s===null)e!==null&&e.ref!==null&&(a.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(u(284));(e===null||e.ref!==s)&&(a.flags|=4194816)}}function ec(e,a,s,l,i){return js(a),s=Uo(e,a,s,l,void 0,i),l=$o(),e!==null&&!et?(Bo(e,a,i),wa(e,a,i)):(Ce&&l&&vo(a),a.flags|=1,rt(e,a,s,i),a.child)}function Vm(e,a,s,l,i,d){return js(a),a.updateQueue=null,s=Pu(a,l,s,i),Lu(e),l=$o(),e!==null&&!et?(Bo(e,a,d),wa(e,a,d)):(Ce&&l&&vo(a),a.flags|=1,rt(e,a,s,d),a.child)}function Hm(e,a,s,l,i){if(js(a),a.stateNode===null){var d=Zs,g=s.contextType;typeof g=="object"&&g!==null&&(d=ct(g)),d=new s(l,d),a.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Jo,a.stateNode=d,d._reactInternals=a,d=a.stateNode,d.props=l,d.state=a.memoizedState,d.refs={},Do(a),g=s.contextType,d.context=typeof g=="object"&&g!==null?ct(g):Zs,d.state=a.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(Ko(a,s,g,l),d.state=a.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(g=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),g!==d.state&&Jo.enqueueReplaceState(d,d.state,null),ur(a,l,d,i),dr(),d.state=a.memoizedState),typeof d.componentDidMount=="function"&&(a.flags|=4194308),l=!0}else if(e===null){d=a.stateNode;var b=a.memoizedProps,A=_s(s,b);d.props=A;var P=d.context,ee=s.contextType;g=Zs,typeof ee=="object"&&ee!==null&&(g=ct(ee));var se=s.getDerivedStateFromProps;ee=typeof se=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=a.pendingProps!==b,ee||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||P!==g)&&Om(a,d,l,g),$a=!1;var I=a.memoizedState;d.state=I,ur(a,l,d,i),dr(),P=a.memoizedState,b||I!==P||$a?(typeof se=="function"&&(Ko(a,s,se,l),P=a.memoizedState),(A=$a||Dm(a,s,A,l,I,P,g))?(ee||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(a.flags|=4194308)):(typeof d.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=l,a.memoizedState=P),d.props=l,d.state=P,d.context=g,l=A):(typeof d.componentDidMount=="function"&&(a.flags|=4194308),l=!1)}else{d=a.stateNode,Oo(e,a),g=a.memoizedProps,ee=_s(s,g),d.props=ee,se=a.pendingProps,I=d.context,P=s.contextType,A=Zs,typeof P=="object"&&P!==null&&(A=ct(P)),b=s.getDerivedStateFromProps,(P=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(g!==se||I!==A)&&Om(a,d,l,A),$a=!1,I=a.memoizedState,d.state=I,ur(a,l,d,i),dr();var Y=a.memoizedState;g!==se||I!==Y||$a||e!==null&&e.dependencies!==null&&jn(e.dependencies)?(typeof b=="function"&&(Ko(a,s,b,l),Y=a.memoizedState),(ee=$a||Dm(a,s,ee,l,I,Y,A)||e!==null&&e.dependencies!==null&&jn(e.dependencies))?(P||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,Y,A),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,Y,A)),typeof d.componentDidUpdate=="function"&&(a.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof d.componentDidUpdate!="function"||g===e.memoizedProps&&I===e.memoizedState||(a.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&I===e.memoizedState||(a.flags|=1024),a.memoizedProps=l,a.memoizedState=Y),d.props=l,d.state=Y,d.context=A,l=ee):(typeof d.componentDidUpdate!="function"||g===e.memoizedProps&&I===e.memoizedState||(a.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&I===e.memoizedState||(a.flags|=1024),l=!1)}return d=l,Gn(e,a),l=(a.flags&128)!==0,d||l?(d=a.stateNode,s=l&&typeof s.getDerivedStateFromError!="function"?null:d.render(),a.flags|=1,e!==null&&l?(a.child=nl(a,e.child,null,i),a.child=nl(a,null,s,i)):rt(e,a,s,i),a.memoizedState=d.state,e=a.child):e=wa(e,a,i),e}function Im(e,a,s,l){return ar(),a.flags|=256,rt(e,a,s,l),a.child}var tc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ac(e){return{baseLanes:e,cachePool:Mu()}}function sc(e,a,s){return e=e!==null?e.childLanes&~s:0,a&&(e|=Qt),e}function Ym(e,a,s){var l=a.pendingProps,i=!1,d=(a.flags&128)!==0,g;if((g=d)||(g=e!==null&&e.memoizedState===null?!1:(Je.current&2)!==0),g&&(i=!0,a.flags&=-129),g=(a.flags&32)!==0,a.flags&=-33,e===null){if(Ce){if(i?La(a):Pa(),Ce){var b=Le,A;if(A=b){e:{for(A=b,b=sa;A.nodeType!==8;){if(!b){b=null;break e}if(A=Wt(A.nextSibling),A===null){b=null;break e}}b=A}b!==null?(a.memoizedState={dehydrated:b,treeContext:gs!==null?{id:pa,overflow:ba}:null,retryLane:536870912,hydrationErrors:null},A=wt(18,null,null,0),A.stateNode=b,A.return=a,a.child=A,ht=a,Le=null,A=!0):A=!1}A||vs(a)}if(b=a.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return Gc(b)?a.lanes=32:a.lanes=536870912,null;Na(a)}return b=l.children,l=l.fallback,i?(Pa(),i=a.mode,b=Ln({mode:"hidden",children:b},i),l=xs(l,i,s,null),b.return=a,l.return=a,b.sibling=l,a.child=b,i=a.child,i.memoizedState=ac(s),i.childLanes=sc(e,g,s),a.memoizedState=tc,l):(La(a),lc(a,b))}if(A=e.memoizedState,A!==null&&(b=A.dehydrated,b!==null)){if(d)a.flags&256?(La(a),a.flags&=-257,a=rc(e,a,s)):a.memoizedState!==null?(Pa(),a.child=e.child,a.flags|=128,a=null):(Pa(),i=l.fallback,b=a.mode,l=Ln({mode:"visible",children:l.children},b),i=xs(i,b,s,null),i.flags|=2,l.return=a,i.return=a,l.sibling=i,a.child=l,nl(a,e.child,null,s),l=a.child,l.memoizedState=ac(s),l.childLanes=sc(e,g,s),a.memoizedState=tc,a=i);else if(La(a),Gc(b)){if(g=b.nextSibling&&b.nextSibling.dataset,g)var P=g.dgst;g=P,l=Error(u(419)),l.stack="",l.digest=g,sr({value:l,source:null,stack:null}),a=rc(e,a,s)}else if(et||lr(e,a,s,!1),g=(s&e.childLanes)!==0,et||g){if(g=ze,g!==null&&(l=s&-s,l=(l&42)!==0?1:Gi(l),l=(l&(g.suspendedLanes|s))!==0?0:l,l!==0&&l!==A.retryLane))throw A.retryLane=l,Fs(e,l),At(g,e,l),$m;b.data==="$?"||wc(),a=rc(e,a,s)}else b.data==="$?"?(a.flags|=192,a.child=e.child,a=null):(e=A.treeContext,Le=Wt(b.nextSibling),ht=a,Ce=!0,bs=null,sa=!1,e!==null&&(Ht[It++]=pa,Ht[It++]=ba,Ht[It++]=gs,pa=e.id,ba=e.overflow,gs=a),a=lc(a,l.children),a.flags|=4096);return a}return i?(Pa(),i=l.fallback,b=a.mode,A=e.child,P=A.sibling,l=ga(A,{mode:"hidden",children:l.children}),l.subtreeFlags=A.subtreeFlags&65011712,P!==null?i=ga(P,i):(i=xs(i,b,s,null),i.flags|=2),i.return=a,l.return=a,l.sibling=i,a.child=l,l=i,i=a.child,b=e.child.memoizedState,b===null?b=ac(s):(A=b.cachePool,A!==null?(P=Ke._currentValue,A=A.parent!==P?{parent:P,pool:P}:A):A=Mu(),b={baseLanes:b.baseLanes|s,cachePool:A}),i.memoizedState=b,i.childLanes=sc(e,g,s),a.memoizedState=tc,l):(La(a),s=e.child,e=s.sibling,s=ga(s,{mode:"visible",children:l.children}),s.return=a,s.sibling=null,e!==null&&(g=a.deletions,g===null?(a.deletions=[e],a.flags|=16):g.push(e)),a.child=s,a.memoizedState=null,s)}function lc(e,a){return a=Ln({mode:"visible",children:a},e.mode),a.return=e,e.child=a}function Ln(e,a){return e=wt(22,e,null,a),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function rc(e,a,s){return nl(a,e.child,null,s),e=lc(a,a.pendingProps.children),e.flags|=2,a.memoizedState=null,e}function Qm(e,a,s){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a),wo(e.return,a,s)}function nc(e,a,s,l,i){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:i}:(d.isBackwards=a,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=s,d.tailMode=i)}function Xm(e,a,s){var l=a.pendingProps,i=l.revealOrder,d=l.tail;if(rt(e,a,l.children,s),l=Je.current,(l&2)!==0)l=l&1|2,a.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=a.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Qm(e,s,a);else if(e.tag===19)Qm(e,s,a);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===a)break e;for(;e.sibling===null;){if(e.return===null||e.return===a)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}switch(ne(Je,l),i){case"forwards":for(s=a.child,i=null;s!==null;)e=s.alternate,e!==null&&$n(e)===null&&(i=s),s=s.sibling;s=i,s===null?(i=a.child,a.child=null):(i=s.sibling,s.sibling=null),nc(a,!1,i,s,d);break;case"backwards":for(s=null,i=a.child,a.child=null;i!==null;){if(e=i.alternate,e!==null&&$n(e)===null){a.child=i;break}e=i.sibling,i.sibling=s,s=i,i=e}nc(a,!0,s,null,d);break;case"together":nc(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function wa(e,a,s){if(e!==null&&(a.dependencies=e.dependencies),Qa|=a.lanes,(s&a.childLanes)===0)if(e!==null){if(lr(e,a,s,!1),(s&a.childLanes)===0)return null}else return null;if(e!==null&&a.child!==e.child)throw Error(u(153));if(a.child!==null){for(e=a.child,s=ga(e,e.pendingProps),a.child=s,s.return=a;e.sibling!==null;)e=e.sibling,s=s.sibling=ga(e,e.pendingProps),s.return=a;s.sibling=null}return a.child}function ic(e,a){return(e.lanes&a)!==0?!0:(e=e.dependencies,!!(e!==null&&jn(e)))}function Ag(e,a,s){switch(a.tag){case 3:me(a,a.stateNode.containerInfo),Ua(a,Ke,e.memoizedState.cache),ar();break;case 27:case 5:st(a);break;case 4:me(a,a.stateNode.containerInfo);break;case 10:Ua(a,a.type,a.memoizedProps.value);break;case 13:var l=a.memoizedState;if(l!==null)return l.dehydrated!==null?(La(a),a.flags|=128,null):(s&a.child.childLanes)!==0?Ym(e,a,s):(La(a),e=wa(e,a,s),e!==null?e.sibling:null);La(a);break;case 19:var i=(e.flags&128)!==0;if(l=(s&a.childLanes)!==0,l||(lr(e,a,s,!1),l=(s&a.childLanes)!==0),i){if(l)return Xm(e,a,s);a.flags|=128}if(i=a.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ne(Je,Je.current),l)break;return null;case 22:case 23:return a.lanes=0,Lm(e,a,s);case 24:Ua(a,Ke,e.memoizedState.cache)}return wa(e,a,s)}function Fm(e,a,s){if(e!==null)if(e.memoizedProps!==a.pendingProps)et=!0;else{if(!ic(e,s)&&(a.flags&128)===0)return et=!1,Ag(e,a,s);et=(e.flags&131072)!==0}else et=!1,Ce&&(a.flags&1048576)!==0&&Su(a,yn,a.index);switch(a.lanes=0,a.tag){case 16:e:{e=a.pendingProps;var l=a.elementType,i=l._init;if(l=i(l._payload),a.type=l,typeof l=="function")go(l)?(e=_s(l,e),a.tag=1,a=Hm(null,a,l,e,s)):(a.tag=0,a=ec(null,a,l,e,s));else{if(l!=null){if(i=l.$$typeof,i===F){a.tag=11,a=Bm(null,a,l,e,s);break e}else if(i===D){a.tag=14,a=qm(null,a,l,e,s);break e}}throw a=ae(l)||l,Error(u(306,a,""))}}return a;case 0:return ec(e,a,a.type,a.pendingProps,s);case 1:return l=a.type,i=_s(l,a.pendingProps),Hm(e,a,l,i,s);case 3:e:{if(me(a,a.stateNode.containerInfo),e===null)throw Error(u(387));l=a.pendingProps;var d=a.memoizedState;i=d.element,Oo(e,a),ur(a,l,null,s);var g=a.memoizedState;if(l=g.cache,Ua(a,Ke,l),l!==d.cache&&_o(a,[Ke],s,!0),dr(),l=g.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:g.cache},a.updateQueue.baseState=d,a.memoizedState=d,a.flags&256){a=Im(e,a,l,s);break e}else if(l!==i){i=Pt(Error(u(424)),a),sr(i),a=Im(e,a,l,s);break e}else{switch(e=a.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Le=Wt(e.firstChild),ht=a,Ce=!0,bs=null,sa=!0,s=Cm(a,null,l,s),a.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(ar(),l===i){a=wa(e,a,s);break e}rt(e,a,l,s)}a=a.child}return a;case 26:return Gn(e,a),e===null?(s=Wh(a.type,null,a.pendingProps,null))?a.memoizedState=s:Ce||(s=a.type,e=a.pendingProps,l=ti(xe.current).createElement(s),l[ot]=a,l[xt]=e,it(l,s,e),We(l),a.stateNode=l):a.memoizedState=Wh(a.type,e.memoizedProps,a.pendingProps,e.memoizedState),null;case 27:return st(a),e===null&&Ce&&(l=a.stateNode=Zh(a.type,a.pendingProps,xe.current),ht=a,sa=!0,i=Le,Ka(a.type)?(Lc=i,Le=Wt(l.firstChild)):Le=i),rt(e,a,a.pendingProps.children,s),Gn(e,a),e===null&&(a.flags|=4194304),a.child;case 5:return e===null&&Ce&&((i=l=Le)&&(l=ap(l,a.type,a.pendingProps,sa),l!==null?(a.stateNode=l,ht=a,Le=Wt(l.firstChild),sa=!1,i=!0):i=!1),i||vs(a)),st(a),i=a.type,d=a.pendingProps,g=e!==null?e.memoizedProps:null,l=d.children,$c(i,d)?l=null:g!==null&&$c(i,g)&&(a.flags|=32),a.memoizedState!==null&&(i=Uo(e,a,yg,null,null,s),Rr._currentValue=i),Gn(e,a),rt(e,a,l,s),a.child;case 6:return e===null&&Ce&&((e=s=Le)&&(s=sp(s,a.pendingProps,sa),s!==null?(a.stateNode=s,ht=a,Le=null,e=!0):e=!1),e||vs(a)),null;case 13:return Ym(e,a,s);case 4:return me(a,a.stateNode.containerInfo),l=a.pendingProps,e===null?a.child=nl(a,null,l,s):rt(e,a,l,s),a.child;case 11:return Bm(e,a,a.type,a.pendingProps,s);case 7:return rt(e,a,a.pendingProps,s),a.child;case 8:return rt(e,a,a.pendingProps.children,s),a.child;case 12:return rt(e,a,a.pendingProps.children,s),a.child;case 10:return l=a.pendingProps,Ua(a,a.type,l.value),rt(e,a,l.children,s),a.child;case 9:return i=a.type._context,l=a.pendingProps.children,js(a),i=ct(i),l=l(i),a.flags|=1,rt(e,a,l,s),a.child;case 14:return qm(e,a,a.type,a.pendingProps,s);case 15:return Gm(e,a,a.type,a.pendingProps,s);case 19:return Xm(e,a,s);case 31:return l=a.pendingProps,s=a.mode,l={mode:l.mode,children:l.children},e===null?(s=Ln(l,s),s.ref=a.ref,a.child=s,s.return=a,a=s):(s=ga(e.child,l),s.ref=a.ref,a.child=s,s.return=a,a=s),a;case 22:return Lm(e,a,s);case 24:return js(a),l=ct(Ke),e===null?(i=Co(),i===null&&(i=ze,d=So(),i.pooledCache=d,d.refCount++,d!==null&&(i.pooledCacheLanes|=s),i=d),a.memoizedState={parent:l,cache:i},Do(a),Ua(a,Ke,i)):((e.lanes&s)!==0&&(Oo(e,a),ur(a,null,null,s),dr()),i=e.memoizedState,d=a.memoizedState,i.parent!==l?(i={parent:l,cache:l},a.memoizedState=i,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=i),Ua(a,Ke,l)):(l=d.cache,Ua(a,Ke,l),l!==i.cache&&_o(a,[Ke],s,!0))),rt(e,a,a.pendingProps.children,s),a.child;case 29:throw a.pendingProps}throw Error(u(156,a.tag))}function _a(e){e.flags|=4}function Zm(e,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!lf(a)){if(a=Yt.current,a!==null&&((Se&4194048)===Se?la!==null:(Se&62914560)!==Se&&(Se&536870912)===0||a!==la))throw or=Ao,Ru;e.flags|=8192}}function Pn(e,a){a!==null&&(e.flags|=4),e.flags&16384&&(a=e.tag!==22?Ad():536870912,e.lanes|=a,dl|=a)}function br(e,a){if(!Ce)switch(e.tailMode){case"hidden":a=e.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?a||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Ge(e){var a=e.alternate!==null&&e.alternate.child===e.child,s=0,l=0;if(a)for(var i=e.child;i!==null;)s|=i.lanes|i.childLanes,l|=i.subtreeFlags&65011712,l|=i.flags&65011712,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)s|=i.lanes|i.childLanes,l|=i.subtreeFlags,l|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=l,e.childLanes=s,a}function Dg(e,a,s){var l=a.pendingProps;switch(yo(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ge(a),null;case 1:return Ge(a),null;case 3:return s=a.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),ya(Ke),pe(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(tr(a)?_a(a):e===null||e.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Au())),Ge(a),null;case 26:return s=a.memoizedState,e===null?(_a(a),s!==null?(Ge(a),Zm(a,s)):(Ge(a),a.flags&=-16777217)):s?s!==e.memoizedState?(_a(a),Ge(a),Zm(a,s)):(Ge(a),a.flags&=-16777217):(e.memoizedProps!==l&&_a(a),Ge(a),a.flags&=-16777217),null;case 27:lt(a),s=xe.current;var i=a.type;if(e!==null&&a.stateNode!=null)e.memoizedProps!==l&&_a(a);else{if(!l){if(a.stateNode===null)throw Error(u(166));return Ge(a),null}e=oe.current,tr(a)?Eu(a):(e=Zh(i,l,s),a.stateNode=e,_a(a))}return Ge(a),null;case 5:if(lt(a),s=a.type,e!==null&&a.stateNode!=null)e.memoizedProps!==l&&_a(a);else{if(!l){if(a.stateNode===null)throw Error(u(166));return Ge(a),null}if(e=oe.current,tr(a))Eu(a);else{switch(i=ti(xe.current),e){case 1:e=i.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:e=i.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":e=i.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":e=i.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof l.is=="string"?i.createElement("select",{is:l.is}):i.createElement("select"),l.multiple?e.multiple=!0:l.size&&(e.size=l.size);break;default:e=typeof l.is=="string"?i.createElement(s,{is:l.is}):i.createElement(s)}}e[ot]=a,e[xt]=l;e:for(i=a.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.tag!==27&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}a.stateNode=e;e:switch(it(e,s,l),s){case"button":case"input":case"select":case"textarea":e=!!l.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&_a(a)}}return Ge(a),a.flags&=-16777217,null;case 6:if(e&&a.stateNode!=null)e.memoizedProps!==l&&_a(a);else{if(typeof l!="string"&&a.stateNode===null)throw Error(u(166));if(e=xe.current,tr(a)){if(e=a.stateNode,s=a.memoizedProps,l=null,i=ht,i!==null)switch(i.tag){case 27:case 5:l=i.memoizedProps}e[ot]=a,e=!!(e.nodeValue===s||l!==null&&l.suppressHydrationWarning===!0||Vh(e.nodeValue,s)),e||vs(a)}else e=ti(e).createTextNode(l),e[ot]=a,a.stateNode=e}return Ge(a),null;case 13:if(l=a.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(i=tr(a),l!==null&&l.dehydrated!==null){if(e===null){if(!i)throw Error(u(318));if(i=a.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(u(317));i[ot]=a}else ar(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ge(a),i=!1}else i=Au(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return a.flags&256?(Na(a),a):(Na(a),null)}if(Na(a),(a.flags&128)!==0)return a.lanes=s,a;if(s=l!==null,e=e!==null&&e.memoizedState!==null,s){l=a.child,i=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(i=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==i&&(l.flags|=2048)}return s!==e&&s&&(a.child.flags|=8192),Pn(a,a.updateQueue),Ge(a),null;case 4:return pe(),e===null&&Mc(a.stateNode.containerInfo),Ge(a),null;case 10:return ya(a.type),Ge(a),null;case 19:if(W(Je),i=a.memoizedState,i===null)return Ge(a),null;if(l=(a.flags&128)!==0,d=i.rendering,d===null)if(l)br(i,!1);else{if(Pe!==0||e!==null&&(e.flags&128)!==0)for(e=a.child;e!==null;){if(d=$n(e),d!==null){for(a.flags|=128,br(i,!1),e=d.updateQueue,a.updateQueue=e,Pn(a,e),a.subtreeFlags=0,e=s,s=a.child;s!==null;)_u(s,e),s=s.sibling;return ne(Je,Je.current&1|2),a.child}e=e.sibling}i.tail!==null&&qt()>In&&(a.flags|=128,l=!0,br(i,!1),a.lanes=4194304)}else{if(!l)if(e=$n(d),e!==null){if(a.flags|=128,l=!0,e=e.updateQueue,a.updateQueue=e,Pn(a,e),br(i,!0),i.tail===null&&i.tailMode==="hidden"&&!d.alternate&&!Ce)return Ge(a),null}else 2*qt()-i.renderingStartTime>In&&s!==536870912&&(a.flags|=128,l=!0,br(i,!1),a.lanes=4194304);i.isBackwards?(d.sibling=a.child,a.child=d):(e=i.last,e!==null?e.sibling=d:a.child=d,i.last=d)}return i.tail!==null?(a=i.tail,i.rendering=a,i.tail=a.sibling,i.renderingStartTime=qt(),a.sibling=null,e=Je.current,ne(Je,l?e&1|2:e&1),a):(Ge(a),null);case 22:case 23:return Na(a),zo(),l=a.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(a.flags|=8192):l&&(a.flags|=8192),l?(s&536870912)!==0&&(a.flags&128)===0&&(Ge(a),a.subtreeFlags&6&&(a.flags|=8192)):Ge(a),s=a.updateQueue,s!==null&&Pn(a,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),l=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),l!==s&&(a.flags|=2048),e!==null&&W(Ns),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),a.memoizedState.cache!==s&&(a.flags|=2048),ya(Ke),Ge(a),null;case 25:return null;case 30:return null}throw Error(u(156,a.tag))}function Og(e,a){switch(yo(a),a.tag){case 1:return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 3:return ya(Ke),pe(),e=a.flags,(e&65536)!==0&&(e&128)===0?(a.flags=e&-65537|128,a):null;case 26:case 27:case 5:return lt(a),null;case 13:if(Na(a),e=a.memoizedState,e!==null&&e.dehydrated!==null){if(a.alternate===null)throw Error(u(340));ar()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 19:return W(Je),null;case 4:return pe(),null;case 10:return ya(a.type),null;case 22:case 23:return Na(a),zo(),e!==null&&W(Ns),e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 24:return ya(Ke),null;case 25:return null;default:return null}}function Km(e,a){switch(yo(a),a.tag){case 3:ya(Ke),pe();break;case 26:case 27:case 5:lt(a);break;case 4:pe();break;case 13:Na(a);break;case 19:W(Je);break;case 10:ya(a.type);break;case 22:case 23:Na(a),zo(),e!==null&&W(Ns);break;case 24:ya(Ke)}}function vr(e,a){try{var s=a.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var i=l.next;s=i;do{if((s.tag&e)===e){l=void 0;var d=s.create,g=s.inst;l=d(),g.destroy=l}s=s.next}while(s!==i)}}catch(b){Re(a,a.return,b)}}function Va(e,a,s){try{var l=a.updateQueue,i=l!==null?l.lastEffect:null;if(i!==null){var d=i.next;l=d;do{if((l.tag&e)===e){var g=l.inst,b=g.destroy;if(b!==void 0){g.destroy=void 0,i=a;var A=s,P=b;try{P()}catch(ee){Re(i,A,ee)}}}l=l.next}while(l!==d)}}catch(ee){Re(a,a.return,ee)}}function Jm(e){var a=e.updateQueue;if(a!==null){var s=e.stateNode;try{qu(a,s)}catch(l){Re(e,e.return,l)}}}function Wm(e,a,s){s.props=_s(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(l){Re(e,a,l)}}function yr(e,a){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof s=="function"?e.refCleanup=s(l):s.current=l}}catch(i){Re(e,a,i)}}function ra(e,a){var s=e.ref,l=e.refCleanup;if(s!==null)if(typeof l=="function")try{l()}catch(i){Re(e,a,i)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(i){Re(e,a,i)}else s.current=null}function eh(e){var a=e.type,s=e.memoizedProps,l=e.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":s.autoFocus&&l.focus();break e;case"img":s.src?l.src=s.src:s.srcSet&&(l.srcset=s.srcSet)}}catch(i){Re(e,e.return,i)}}function oc(e,a,s){try{var l=e.stateNode;Kg(l,e.type,s,a),l[xt]=a}catch(i){Re(e,e.return,i)}}function th(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ka(e.type)||e.tag===4}function cc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||th(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ka(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function dc(e,a,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,a?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,a):(a=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,a.appendChild(e),s=s._reactRootContainer,s!=null||a.onclick!==null||(a.onclick=ei));else if(l!==4&&(l===27&&Ka(e.type)&&(s=e.stateNode,a=null),e=e.child,e!==null))for(dc(e,a,s),e=e.sibling;e!==null;)dc(e,a,s),e=e.sibling}function Vn(e,a,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,a?s.insertBefore(e,a):s.appendChild(e);else if(l!==4&&(l===27&&Ka(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(Vn(e,a,s),e=e.sibling;e!==null;)Vn(e,a,s),e=e.sibling}function ah(e){var a=e.stateNode,s=e.memoizedProps;try{for(var l=e.type,i=a.attributes;i.length;)a.removeAttributeNode(i[0]);it(a,l,s),a[ot]=e,a[xt]=s}catch(d){Re(e,e.return,d)}}var Sa=!1,Ie=!1,uc=!1,sh=typeof WeakSet=="function"?WeakSet:Set,tt=null;function Tg(e,a){if(e=e.containerInfo,kc=ii,e=fu(e),oo(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var i=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{s.nodeType,d.nodeType}catch(de){s=null;break e}var g=0,b=-1,A=-1,P=0,ee=0,se=e,I=null;t:for(;;){for(var Y;se!==s||i!==0&&se.nodeType!==3||(b=g+i),se!==d||l!==0&&se.nodeType!==3||(A=g+l),se.nodeType===3&&(g+=se.nodeValue.length),(Y=se.firstChild)!==null;)I=se,se=Y;for(;;){if(se===e)break t;if(I===s&&++P===i&&(b=g),I===d&&++ee===l&&(A=g),(Y=se.nextSibling)!==null)break;se=I,I=se.parentNode}se=Y}s=b===-1||A===-1?null:{start:b,end:A}}else s=null}s=s||{start:0,end:0}}else s=null;for(Uc={focusedElem:e,selectionRange:s},ii=!1,tt=a;tt!==null;)if(a=tt,e=a.child,(a.subtreeFlags&1024)!==0&&e!==null)e.return=a,tt=e;else for(;tt!==null;){switch(a=tt,d=a.alternate,e=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,s=a,i=d.memoizedProps,d=d.memoizedState,l=s.stateNode;try{var he=_s(s.type,i,s.elementType===s.type);e=l.getSnapshotBeforeUpdate(he,d),l.__reactInternalSnapshotBeforeUpdate=e}catch(de){Re(s,s.return,de)}}break;case 3:if((e&1024)!==0){if(e=a.stateNode.containerInfo,s=e.nodeType,s===9)qc(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":qc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(u(163))}if(e=a.sibling,e!==null){e.return=a.return,tt=e;break}tt=a.return}}function lh(e,a,s){var l=s.flags;switch(s.tag){case 0:case 11:case 15:Ha(e,s),l&4&&vr(5,s);break;case 1:if(Ha(e,s),l&4)if(e=s.stateNode,a===null)try{e.componentDidMount()}catch(g){Re(s,s.return,g)}else{var i=_s(s.type,a.memoizedProps);a=a.memoizedState;try{e.componentDidUpdate(i,a,e.__reactInternalSnapshotBeforeUpdate)}catch(g){Re(s,s.return,g)}}l&64&&Jm(s),l&512&&yr(s,s.return);break;case 3:if(Ha(e,s),l&64&&(e=s.updateQueue,e!==null)){if(a=null,s.child!==null)switch(s.child.tag){case 27:case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}try{qu(e,a)}catch(g){Re(s,s.return,g)}}break;case 27:a===null&&l&4&&ah(s);case 26:case 5:Ha(e,s),a===null&&l&4&&eh(s),l&512&&yr(s,s.return);break;case 12:Ha(e,s);break;case 13:Ha(e,s),l&4&&ih(e,s),l&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=Gg.bind(null,s),lp(e,s))));break;case 22:if(l=s.memoizedState!==null||Sa,!l){a=a!==null&&a.memoizedState!==null||Ie,i=Sa;var d=Ie;Sa=l,(Ie=a)&&!d?Ia(e,s,(s.subtreeFlags&8772)!==0):Ha(e,s),Sa=i,Ie=d}break;case 30:break;default:Ha(e,s)}}function rh(e){var a=e.alternate;a!==null&&(e.alternate=null,rh(a)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(a=e.stateNode,a!==null&&Vi(a)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ue=null,bt=!1;function Ea(e,a,s){for(s=s.child;s!==null;)nh(e,a,s),s=s.sibling}function nh(e,a,s){if(yt&&typeof yt.onCommitFiberUnmount=="function")try{yt.onCommitFiberUnmount(Ll,s)}catch(d){}switch(s.tag){case 26:Ie||ra(s,a),Ea(e,a,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:Ie||ra(s,a);var l=Ue,i=bt;Ka(s.type)&&(Ue=s.stateNode,bt=!1),Ea(e,a,s),Dr(s.stateNode),Ue=l,bt=i;break;case 5:Ie||ra(s,a);case 6:if(l=Ue,i=bt,Ue=null,Ea(e,a,s),Ue=l,bt=i,Ue!==null)if(bt)try{(Ue.nodeType===9?Ue.body:Ue.nodeName==="HTML"?Ue.ownerDocument.body:Ue).removeChild(s.stateNode)}catch(d){Re(s,a,d)}else try{Ue.removeChild(s.stateNode)}catch(d){Re(s,a,d)}break;case 18:Ue!==null&&(bt?(e=Ue,Xh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),$r(e)):Xh(Ue,s.stateNode));break;case 4:l=Ue,i=bt,Ue=s.stateNode.containerInfo,bt=!0,Ea(e,a,s),Ue=l,bt=i;break;case 0:case 11:case 14:case 15:Ie||Va(2,s,a),Ie||Va(4,s,a),Ea(e,a,s);break;case 1:Ie||(ra(s,a),l=s.stateNode,typeof l.componentWillUnmount=="function"&&Wm(s,a,l)),Ea(e,a,s);break;case 21:Ea(e,a,s);break;case 22:Ie=(l=Ie)||s.memoizedState!==null,Ea(e,a,s),Ie=l;break;default:Ea(e,a,s)}}function ih(e,a){if(a.memoizedState===null&&(e=a.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{$r(e)}catch(s){Re(a,a.return,s)}}function Mg(e){switch(e.tag){case 13:case 19:var a=e.stateNode;return a===null&&(a=e.stateNode=new sh),a;case 22:return e=e.stateNode,a=e._retryCache,a===null&&(a=e._retryCache=new sh),a;default:throw Error(u(435,e.tag))}}function mc(e,a){var s=Mg(e);a.forEach(function(l){var i=Lg.bind(null,e,l);s.has(l)||(s.add(l),l.then(i,i))})}function _t(e,a){var s=a.deletions;if(s!==null)for(var l=0;l<s.length;l++){var i=s[l],d=e,g=a,b=g;e:for(;b!==null;){switch(b.tag){case 27:if(Ka(b.type)){Ue=b.stateNode,bt=!1;break e}break;case 5:Ue=b.stateNode,bt=!1;break e;case 3:case 4:Ue=b.stateNode.containerInfo,bt=!0;break e}b=b.return}if(Ue===null)throw Error(u(160));nh(d,g,i),Ue=null,bt=!1,d=i.alternate,d!==null&&(d.return=null),i.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)oh(a,e),a=a.sibling}var Jt=null;function oh(e,a){var s=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:_t(a,e),St(e),l&4&&(Va(3,e,e.return),vr(3,e),Va(5,e,e.return));break;case 1:_t(a,e),St(e),l&512&&(Ie||s===null||ra(s,s.return)),l&64&&Sa&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?l:s.concat(l))));break;case 26:var i=Jt;if(_t(a,e),St(e),l&512&&(Ie||s===null||ra(s,s.return)),l&4){var d=s!==null?s.memoizedState:null;if(l=e.memoizedState,s===null)if(l===null)if(e.stateNode===null){e:{l=e.type,s=e.memoizedProps,i=i.ownerDocument||i;t:switch(l){case"title":d=i.getElementsByTagName("title")[0],(!d||d[Hl]||d[ot]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=i.createElement(l),i.head.insertBefore(d,i.querySelector("head > title"))),it(d,l,s),d[ot]=e,We(d),l=d;break e;case"link":var g=af("link","href",i).get(l+(s.href||""));if(g){for(var b=0;b<g.length;b++)if(d=g[b],d.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&d.getAttribute("rel")===(s.rel==null?null:s.rel)&&d.getAttribute("title")===(s.title==null?null:s.title)&&d.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){g.splice(b,1);break t}}d=i.createElement(l),it(d,l,s),i.head.appendChild(d);break;case"meta":if(g=af("meta","content",i).get(l+(s.content||""))){for(b=0;b<g.length;b++)if(d=g[b],d.getAttribute("content")===(s.content==null?null:""+s.content)&&d.getAttribute("name")===(s.name==null?null:s.name)&&d.getAttribute("property")===(s.property==null?null:s.property)&&d.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&d.getAttribute("charset")===(s.charSet==null?null:s.charSet)){g.splice(b,1);break t}}d=i.createElement(l),it(d,l,s),i.head.appendChild(d);break;default:throw Error(u(468,l))}d[ot]=e,We(d),l=d}e.stateNode=l}else sf(i,e.type,e.stateNode);else e.stateNode=tf(i,l,e.memoizedProps);else d!==l?(d===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):d.count--,l===null?sf(i,e.type,e.stateNode):tf(i,l,e.memoizedProps)):l===null&&e.stateNode!==null&&oc(e,e.memoizedProps,s.memoizedProps)}break;case 27:_t(a,e),St(e),l&512&&(Ie||s===null||ra(s,s.return)),s!==null&&l&4&&oc(e,e.memoizedProps,s.memoizedProps);break;case 5:if(_t(a,e),St(e),l&512&&(Ie||s===null||ra(s,s.return)),e.flags&32){i=e.stateNode;try{Ps(i,"")}catch(Y){Re(e,e.return,Y)}}l&4&&e.stateNode!=null&&(i=e.memoizedProps,oc(e,i,s!==null?s.memoizedProps:i)),l&1024&&(uc=!0);break;case 6:if(_t(a,e),St(e),l&4){if(e.stateNode===null)throw Error(u(162));l=e.memoizedProps,s=e.stateNode;try{s.nodeValue=l}catch(Y){Re(e,e.return,Y)}}break;case 3:if(li=null,i=Jt,Jt=ai(a.containerInfo),_t(a,e),Jt=i,St(e),l&4&&s!==null&&s.memoizedState.isDehydrated)try{$r(a.containerInfo)}catch(Y){Re(e,e.return,Y)}uc&&(uc=!1,ch(e));break;case 4:l=Jt,Jt=ai(e.stateNode.containerInfo),_t(a,e),St(e),Jt=l;break;case 12:_t(a,e),St(e);break;case 13:_t(a,e),St(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(bc=qt()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,mc(e,l)));break;case 22:i=e.memoizedState!==null;var A=s!==null&&s.memoizedState!==null,P=Sa,ee=Ie;if(Sa=P||i,Ie=ee||A,_t(a,e),Ie=ee,Sa=P,St(e),l&8192)e:for(a=e.stateNode,a._visibility=i?a._visibility&-2:a._visibility|1,i&&(s===null||A||Sa||Ie||Ss(e)),s=null,a=e;;){if(a.tag===5||a.tag===26){if(s===null){A=s=a;try{if(d=A.stateNode,i)g=d.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{b=A.stateNode;var se=A.memoizedProps.style,I=se!=null&&se.hasOwnProperty("display")?se.display:null;b.style.display=I==null||typeof I=="boolean"?"":(""+I).trim()}}catch(Y){Re(A,A.return,Y)}}}else if(a.tag===6){if(s===null){A=a;try{A.stateNode.nodeValue=i?"":A.memoizedProps}catch(Y){Re(A,A.return,Y)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===e)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;s===a&&(s=null),a=a.return}s===a&&(s=null),a.sibling.return=a.return,a=a.sibling}l&4&&(l=e.updateQueue,l!==null&&(s=l.retryQueue,s!==null&&(l.retryQueue=null,mc(e,s))));break;case 19:_t(a,e),St(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,mc(e,l)));break;case 30:break;case 21:break;default:_t(a,e),St(e)}}function St(e){var a=e.flags;if(a&2){try{for(var s,l=e.return;l!==null;){if(th(l)){s=l;break}l=l.return}if(s==null)throw Error(u(160));switch(s.tag){case 27:var i=s.stateNode,d=cc(e);Vn(e,d,i);break;case 5:var g=s.stateNode;s.flags&32&&(Ps(g,""),s.flags&=-33);var b=cc(e);Vn(e,b,g);break;case 3:case 4:var A=s.stateNode.containerInfo,P=cc(e);dc(e,P,A);break;default:throw Error(u(161))}}catch(ee){Re(e,e.return,ee)}e.flags&=-3}a&4096&&(e.flags&=-4097)}function ch(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var a=e;ch(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),e=e.sibling}}function Ha(e,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)lh(e,a.alternate,a),a=a.sibling}function Ss(e){for(e=e.child;e!==null;){var a=e;switch(a.tag){case 0:case 11:case 14:case 15:Va(4,a,a.return),Ss(a);break;case 1:ra(a,a.return);var s=a.stateNode;typeof s.componentWillUnmount=="function"&&Wm(a,a.return,s),Ss(a);break;case 27:Dr(a.stateNode);case 26:case 5:ra(a,a.return),Ss(a);break;case 22:a.memoizedState===null&&Ss(a);break;case 30:Ss(a);break;default:Ss(a)}e=e.sibling}}function Ia(e,a,s){for(s=s&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var l=a.alternate,i=e,d=a,g=d.flags;switch(d.tag){case 0:case 11:case 15:Ia(i,d,s),vr(4,d);break;case 1:if(Ia(i,d,s),l=d,i=l.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(P){Re(l,l.return,P)}if(l=d,i=l.updateQueue,i!==null){var b=l.stateNode;try{var A=i.shared.hiddenCallbacks;if(A!==null)for(i.shared.hiddenCallbacks=null,i=0;i<A.length;i++)Bu(A[i],b)}catch(P){Re(l,l.return,P)}}s&&g&64&&Jm(d),yr(d,d.return);break;case 27:ah(d);case 26:case 5:Ia(i,d,s),s&&l===null&&g&4&&eh(d),yr(d,d.return);break;case 12:Ia(i,d,s);break;case 13:Ia(i,d,s),s&&g&4&&ih(i,d);break;case 22:d.memoizedState===null&&Ia(i,d,s),yr(d,d.return);break;case 30:break;default:Ia(i,d,s)}a=a.sibling}}function hc(e,a){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(e=a.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&rr(s))}function fc(e,a){e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&rr(e))}function na(e,a,s,l){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)dh(e,a,s,l),a=a.sibling}function dh(e,a,s,l){var i=a.flags;switch(a.tag){case 0:case 11:case 15:na(e,a,s,l),i&2048&&vr(9,a);break;case 1:na(e,a,s,l);break;case 3:na(e,a,s,l),i&2048&&(e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&rr(e)));break;case 12:if(i&2048){na(e,a,s,l),e=a.stateNode;try{var d=a.memoizedProps,g=d.id,b=d.onPostCommit;typeof b=="function"&&b(g,a.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(A){Re(a,a.return,A)}}else na(e,a,s,l);break;case 13:na(e,a,s,l);break;case 23:break;case 22:d=a.stateNode,g=a.alternate,a.memoizedState!==null?d._visibility&2?na(e,a,s,l):jr(e,a):d._visibility&2?na(e,a,s,l):(d._visibility|=2,il(e,a,s,l,(a.subtreeFlags&10256)!==0)),i&2048&&hc(g,a);break;case 24:na(e,a,s,l),i&2048&&fc(a.alternate,a);break;default:na(e,a,s,l)}}function il(e,a,s,l,i){for(i=i&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var d=e,g=a,b=s,A=l,P=g.flags;switch(g.tag){case 0:case 11:case 15:il(d,g,b,A,i),vr(8,g);break;case 23:break;case 22:var ee=g.stateNode;g.memoizedState!==null?ee._visibility&2?il(d,g,b,A,i):jr(d,g):(ee._visibility|=2,il(d,g,b,A,i)),i&&P&2048&&hc(g.alternate,g);break;case 24:il(d,g,b,A,i),i&&P&2048&&fc(g.alternate,g);break;default:il(d,g,b,A,i)}a=a.sibling}}function jr(e,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var s=e,l=a,i=l.flags;switch(l.tag){case 22:jr(s,l),i&2048&&hc(l.alternate,l);break;case 24:jr(s,l),i&2048&&fc(l.alternate,l);break;default:jr(s,l)}a=a.sibling}}var Nr=8192;function ol(e){if(e.subtreeFlags&Nr)for(e=e.child;e!==null;)uh(e),e=e.sibling}function uh(e){switch(e.tag){case 26:ol(e),e.flags&Nr&&e.memoizedState!==null&&pp(Jt,e.memoizedState,e.memoizedProps);break;case 5:ol(e);break;case 3:case 4:var a=Jt;Jt=ai(e.stateNode.containerInfo),ol(e),Jt=a;break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=Nr,Nr=16777216,ol(e),Nr=a):ol(e));break;default:ol(e)}}function mh(e){var a=e.alternate;if(a!==null&&(e=a.child,e!==null)){a.child=null;do a=e.sibling,e.sibling=null,e=a;while(e!==null)}}function wr(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var l=a[s];tt=l,fh(l,e)}mh(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)hh(e),e=e.sibling}function hh(e){switch(e.tag){case 0:case 11:case 15:wr(e),e.flags&2048&&Va(9,e,e.return);break;case 3:wr(e);break;case 12:wr(e);break;case 22:var a=e.stateNode;e.memoizedState!==null&&a._visibility&2&&(e.return===null||e.return.tag!==13)?(a._visibility&=-3,Hn(e)):wr(e);break;default:wr(e)}}function Hn(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var l=a[s];tt=l,fh(l,e)}mh(e)}for(e=e.child;e!==null;){switch(a=e,a.tag){case 0:case 11:case 15:Va(8,a,a.return),Hn(a);break;case 22:s=a.stateNode,s._visibility&2&&(s._visibility&=-3,Hn(a));break;default:Hn(a)}e=e.sibling}}function fh(e,a){for(;tt!==null;){var s=tt;switch(s.tag){case 0:case 11:case 15:Va(8,s,a);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var l=s.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:rr(s.memoizedState.cache)}if(l=s.child,l!==null)l.return=s,tt=l;else e:for(s=e;tt!==null;){l=tt;var i=l.sibling,d=l.return;if(rh(l),l===s){tt=null;break e}if(i!==null){i.return=d,tt=i;break e}tt=d}}}var Rg={getCacheForType:function(e){var a=ct(Ke),s=a.data.get(e);return s===void 0&&(s=e(),a.data.set(e,s)),s}},zg=typeof WeakMap=="function"?WeakMap:Map,Ae=0,ze=null,Ne=null,Se=0,De=0,Et=null,Ya=!1,cl=!1,xc=!1,Ca=0,Pe=0,Qa=0,Es=0,gc=0,Qt=0,dl=0,_r=null,vt=null,pc=!1,bc=0,In=1/0,Yn=null,Xa=null,nt=0,Fa=null,ul=null,ml=0,vc=0,yc=null,xh=null,Sr=0,jc=null;function Ct(){if((Ae&2)!==0&&Se!==0)return Se&-Se;if(T.T!==null){var e=Ws;return e!==0?e:Ac()}return Td()}function gh(){Qt===0&&(Qt=(Se&536870912)===0||Ce?Cd():536870912);var e=Yt.current;return e!==null&&(e.flags|=32),Qt}function At(e,a,s){(e===ze&&(De===2||De===9)||e.cancelPendingCommit!==null)&&(hl(e,0),Za(e,Se,Qt,!1)),Vl(e,s),((Ae&2)===0||e!==ze)&&(e===ze&&((Ae&2)===0&&(Es|=s),Pe===4&&Za(e,Se,Qt,!1)),ia(e))}function ph(e,a,s){if((Ae&6)!==0)throw Error(u(327));var l=!s&&(a&124)===0&&(a&e.expiredLanes)===0||Pl(e,a),i=l?$g(e,a):_c(e,a,!0),d=l;do{if(i===0){cl&&!l&&Za(e,a,0,!1);break}else{if(s=e.current.alternate,d&&!kg(s)){i=_c(e,a,!1),d=!1;continue}if(i===2){if(d=a,e.errorRecoveryDisabledLanes&d)var g=0;else g=e.pendingLanes&-536870913,g=g!==0?g:g&536870912?536870912:0;if(g!==0){a=g;e:{var b=e;i=_r;var A=b.current.memoizedState.isDehydrated;if(A&&(hl(b,g).flags|=256),g=_c(b,g,!1),g!==2){if(xc&&!A){b.errorRecoveryDisabledLanes|=d,Es|=d,i=4;break e}d=vt,vt=i,d!==null&&(vt===null?vt=d:vt.push.apply(vt,d))}i=g}if(d=!1,i!==2)continue}}if(i===1){hl(e,0),Za(e,a,0,!0);break}e:{switch(l=e,d=i,d){case 0:case 1:throw Error(u(345));case 4:if((a&4194048)!==a)break;case 6:Za(l,a,Qt,!Ya);break e;case 2:vt=null;break;case 3:case 5:break;default:throw Error(u(329))}if((a&62914560)===a&&(i=bc+300-qt(),10<i)){if(Za(l,a,Qt,!Ya),an(l,0,!0)!==0)break e;l.timeoutHandle=Yh(bh.bind(null,l,s,vt,Yn,pc,a,Qt,Es,dl,Ya,d,2,-0,0),i);break e}bh(l,s,vt,Yn,pc,a,Qt,Es,dl,Ya,d,0,-0,0)}}break}while(!0);ia(e)}function bh(e,a,s,l,i,d,g,b,A,P,ee,se,I,Y){if(e.timeoutHandle=-1,se=a.subtreeFlags,(se&8192||(se&16785408)===16785408)&&(Mr={stylesheets:null,count:0,unsuspend:gp},uh(a),se=bp(),se!==null)){e.cancelPendingCommit=se(Sh.bind(null,e,a,d,s,l,i,g,b,A,ee,1,I,Y)),Za(e,d,g,!P);return}Sh(e,a,d,s,l,i,g,b,A)}function kg(e){for(var a=e;;){var s=a.tag;if((s===0||s===11||s===15)&&a.flags&16384&&(s=a.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var l=0;l<s.length;l++){var i=s[l],d=i.getSnapshot;i=i.value;try{if(!Nt(d(),i))return!1}catch(g){return!1}}if(s=a.child,a.subtreeFlags&16384&&s!==null)s.return=a,a=s;else{if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Za(e,a,s,l){a&=~gc,a&=~Es,e.suspendedLanes|=a,e.pingedLanes&=~a,l&&(e.warmLanes|=a),l=e.expirationTimes;for(var i=a;0<i;){var d=31-jt(i),g=1<<d;l[d]=-1,i&=~g}s!==0&&Dd(e,s,a)}function Qn(){return(Ae&6)===0?(Er(0),!1):!0}function Nc(){if(Ne!==null){if(De===0)var e=Ne.return;else e=Ne,va=ys=null,qo(e),rl=null,gr=0,e=Ne;for(;e!==null;)Km(e.alternate,e),e=e.return;Ne=null}}function hl(e,a){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,Wg(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),Nc(),ze=e,Ne=s=ga(e.current,null),Se=a,De=0,Et=null,Ya=!1,cl=Pl(e,a),xc=!1,dl=Qt=gc=Es=Qa=Pe=0,vt=_r=null,pc=!1,(a&8)!==0&&(a|=a&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=a;0<l;){var i=31-jt(l),d=1<<i;a|=e[i],l&=~d}return Ca=a,xn(),s}function vh(e,a){be=null,T.H=zn,a===ir||a===_n?(a=Uu(),De=3):a===Ru?(a=Uu(),De=4):De=a===$m?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Et=a,Ne===null&&(Pe=1,qn(e,Pt(a,e.current)))}function yh(){var e=T.H;return T.H=zn,e===null?zn:e}function jh(){var e=T.A;return T.A=Rg,e}function wc(){Pe=4,Ya||(Se&4194048)!==Se&&Yt.current!==null||(cl=!0),(Qa&134217727)===0&&(Es&134217727)===0||ze===null||Za(ze,Se,Qt,!1)}function _c(e,a,s){var l=Ae;Ae|=2;var i=yh(),d=jh();(ze!==e||Se!==a)&&(Yn=null,hl(e,a)),a=!1;var g=Pe;e:do try{if(De!==0&&Ne!==null){var b=Ne,A=Et;switch(De){case 8:Nc(),g=6;break e;case 3:case 2:case 9:case 6:Yt.current===null&&(a=!0);var P=De;if(De=0,Et=null,fl(e,b,A,P),s&&cl){g=0;break e}break;default:P=De,De=0,Et=null,fl(e,b,A,P)}}Ug(),g=Pe;break}catch(ee){vh(e,ee)}while(!0);return a&&e.shellSuspendCounter++,va=ys=null,Ae=l,T.H=i,T.A=d,Ne===null&&(ze=null,Se=0,xn()),g}function Ug(){for(;Ne!==null;)Nh(Ne)}function $g(e,a){var s=Ae;Ae|=2;var l=yh(),i=jh();ze!==e||Se!==a?(Yn=null,In=qt()+500,hl(e,a)):cl=Pl(e,a);e:do try{if(De!==0&&Ne!==null){a=Ne;var d=Et;t:switch(De){case 1:De=0,Et=null,fl(e,a,d,1);break;case 2:case 9:if(zu(d)){De=0,Et=null,wh(a);break}a=function(){De!==2&&De!==9||ze!==e||(De=7),ia(e)},d.then(a,a);break e;case 3:De=7;break e;case 4:De=5;break e;case 7:zu(d)?(De=0,Et=null,wh(a)):(De=0,Et=null,fl(e,a,d,7));break;case 5:var g=null;switch(Ne.tag){case 26:g=Ne.memoizedState;case 5:case 27:var b=Ne;if(!g||lf(g)){De=0,Et=null;var A=b.sibling;if(A!==null)Ne=A;else{var P=b.return;P!==null?(Ne=P,Xn(P)):Ne=null}break t}}De=0,Et=null,fl(e,a,d,5);break;case 6:De=0,Et=null,fl(e,a,d,6);break;case 8:Nc(),Pe=6;break e;default:throw Error(u(462))}}Bg();break}catch(ee){vh(e,ee)}while(!0);return va=ys=null,T.H=l,T.A=i,Ae=s,Ne!==null?0:(ze=null,Se=0,xn(),Pe)}function Bg(){for(;Ne!==null&&!_d();)Nh(Ne)}function Nh(e){var a=Fm(e.alternate,e,Ca);e.memoizedProps=e.pendingProps,a===null?Xn(e):Ne=a}function wh(e){var a=e,s=a.alternate;switch(a.tag){case 15:case 0:a=Vm(s,a,a.pendingProps,a.type,void 0,Se);break;case 11:a=Vm(s,a,a.pendingProps,a.type.render,a.ref,Se);break;case 5:qo(a);default:Km(s,a),a=Ne=_u(a,Ca),a=Fm(s,a,Ca)}e.memoizedProps=e.pendingProps,a===null?Xn(e):Ne=a}function fl(e,a,s,l){va=ys=null,qo(a),rl=null,gr=0;var i=a.return;try{if(Cg(e,i,a,s,Se)){Pe=1,qn(e,Pt(s,e.current)),Ne=null;return}}catch(d){if(i!==null)throw Ne=i,d;Pe=1,qn(e,Pt(s,e.current)),Ne=null;return}a.flags&32768?(Ce||l===1?e=!0:cl||(Se&536870912)!==0?e=!1:(Ya=e=!0,(l===2||l===9||l===3||l===6)&&(l=Yt.current,l!==null&&l.tag===13&&(l.flags|=16384))),_h(a,e)):Xn(a)}function Xn(e){var a=e;do{if((a.flags&32768)!==0){_h(a,Ya);return}e=a.return;var s=Dg(a.alternate,a,Ca);if(s!==null){Ne=s;return}if(a=a.sibling,a!==null){Ne=a;return}Ne=a=e}while(a!==null);Pe===0&&(Pe=5)}function _h(e,a){do{var s=Og(e.alternate,e);if(s!==null){s.flags&=32767,Ne=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!a&&(e=e.sibling,e!==null)){Ne=e;return}Ne=e=s}while(e!==null);Pe=6,Ne=null}function Sh(e,a,s,l,i,d,g,b,A){e.cancelPendingCommit=null;do Fn();while(nt!==0);if((Ae&6)!==0)throw Error(u(327));if(a!==null){if(a===e.current)throw Error(u(177));if(d=a.lanes|a.childLanes,d|=fo,g0(e,s,d,g,b,A),e===ze&&(Ne=ze=null,Se=0),ul=a,Fa=e,ml=s,vc=d,yc=i,xh=l,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Pg(Wr,function(){return Oh(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||l){l=T.T,T.T=null,i=H.p,H.p=2,g=Ae,Ae|=4;try{Tg(e,a,s)}finally{Ae=g,H.p=i,T.T=l}}nt=1,Eh(),Ch(),Ah()}}function Eh(){if(nt===1){nt=0;var e=Fa,a=ul,s=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||s){s=T.T,T.T=null;var l=H.p;H.p=2;var i=Ae;Ae|=4;try{oh(a,e);var d=Uc,g=fu(e.containerInfo),b=d.focusedElem,A=d.selectionRange;if(g!==b&&b&&b.ownerDocument&&hu(b.ownerDocument.documentElement,b)){if(A!==null&&oo(b)){var P=A.start,ee=A.end;if(ee===void 0&&(ee=P),"selectionStart"in b)b.selectionStart=P,b.selectionEnd=Math.min(ee,b.value.length);else{var se=b.ownerDocument||document,I=se&&se.defaultView||window;if(I.getSelection){var Y=I.getSelection(),he=b.textContent.length,de=Math.min(A.start,he),Me=A.end===void 0?de:Math.min(A.end,he);!Y.extend&&de>Me&&(g=Me,Me=de,de=g);var B=mu(b,de),R=mu(b,Me);if(B&&R&&(Y.rangeCount!==1||Y.anchorNode!==B.node||Y.anchorOffset!==B.offset||Y.focusNode!==R.node||Y.focusOffset!==R.offset)){var L=se.createRange();L.setStart(B.node,B.offset),Y.removeAllRanges(),de>Me?(Y.addRange(L),Y.extend(R.node,R.offset)):(L.setEnd(R.node,R.offset),Y.addRange(L))}}}}for(se=[],Y=b;Y=Y.parentNode;)Y.nodeType===1&&se.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<se.length;b++){var te=se[b];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}ii=!!kc,Uc=kc=null}finally{Ae=i,H.p=l,T.T=s}}e.current=a,nt=2}}function Ch(){if(nt===2){nt=0;var e=Fa,a=ul,s=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||s){s=T.T,T.T=null;var l=H.p;H.p=2;var i=Ae;Ae|=4;try{lh(e,a.alternate,a)}finally{Ae=i,H.p=l,T.T=s}}nt=3}}function Ah(){if(nt===4||nt===3){nt=0,cs();var e=Fa,a=ul,s=ml,l=xh;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?nt=5:(nt=0,ul=Fa=null,Dh(e,e.pendingLanes));var i=e.pendingLanes;if(i===0&&(Xa=null),Li(s),a=a.stateNode,yt&&typeof yt.onCommitFiberRoot=="function")try{yt.onCommitFiberRoot(Ll,a,void 0,(a.current.flags&128)===128)}catch(A){}if(l!==null){a=T.T,i=H.p,H.p=2,T.T=null;try{for(var d=e.onRecoverableError,g=0;g<l.length;g++){var b=l[g];d(b.value,{componentStack:b.stack})}}finally{T.T=a,H.p=i}}(ml&3)!==0&&Fn(),ia(e),i=e.pendingLanes,(s&4194090)!==0&&(i&42)!==0?e===jc?Sr++:(Sr=0,jc=e):Sr=0,Er(0)}}function Dh(e,a){(e.pooledCacheLanes&=a)===0&&(a=e.pooledCache,a!=null&&(e.pooledCache=null,rr(a)))}function Fn(e){return Eh(),Ch(),Ah(),Oh()}function Oh(){if(nt!==5)return!1;var e=Fa,a=vc;vc=0;var s=Li(ml),l=T.T,i=H.p;try{H.p=32>s?32:s,T.T=null,s=yc,yc=null;var d=Fa,g=ml;if(nt=0,ul=Fa=null,ml=0,(Ae&6)!==0)throw Error(u(331));var b=Ae;if(Ae|=4,hh(d.current),dh(d,d.current,g,s),Ae=b,Er(0,!1),yt&&typeof yt.onPostCommitFiberRoot=="function")try{yt.onPostCommitFiberRoot(Ll,d)}catch(A){}return!0}finally{H.p=i,T.T=l,Dh(e,a)}}function Th(e,a,s){a=Pt(s,a),a=Wo(e.stateNode,a,2),e=qa(e,a,2),e!==null&&(Vl(e,2),ia(e))}function Re(e,a,s){if(e.tag===3)Th(e,e,s);else for(;a!==null;){if(a.tag===3){Th(a,e,s);break}else if(a.tag===1){var l=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Xa===null||!Xa.has(l))){e=Pt(s,e),s=km(2),l=qa(a,s,2),l!==null&&(Um(s,l,a,e),Vl(l,2),ia(l));break}}a=a.return}}function Sc(e,a,s){var l=e.pingCache;if(l===null){l=e.pingCache=new zg;var i=new Set;l.set(a,i)}else i=l.get(a),i===void 0&&(i=new Set,l.set(a,i));i.has(s)||(xc=!0,i.add(s),e=qg.bind(null,e,a,s),a.then(e,e))}function qg(e,a,s){var l=e.pingCache;l!==null&&l.delete(a),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,ze===e&&(Se&s)===s&&(Pe===4||Pe===3&&(Se&62914560)===Se&&300>qt()-bc?(Ae&2)===0&&hl(e,0):gc|=s,dl===Se&&(dl=0)),ia(e)}function Mh(e,a){a===0&&(a=Ad()),e=Fs(e,a),e!==null&&(Vl(e,a),ia(e))}function Gg(e){var a=e.memoizedState,s=0;a!==null&&(s=a.retryLane),Mh(e,s)}function Lg(e,a){var s=0;switch(e.tag){case 13:var l=e.stateNode,i=e.memoizedState;i!==null&&(s=i.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(u(314))}l!==null&&l.delete(a),Mh(e,s)}function Pg(e,a){return Ze(e,a)}var Zn=null,xl=null,Ec=!1,Kn=!1,Cc=!1,Cs=0;function ia(e){e!==xl&&e.next===null&&(xl===null?Zn=xl=e:xl=xl.next=e),Kn=!0,Ec||(Ec=!0,Hg())}function Er(e,a){if(!Cc&&Kn){Cc=!0;do for(var s=!1,l=Zn;l!==null;){if(e!==0){var i=l.pendingLanes;if(i===0)var d=0;else{var g=l.suspendedLanes,b=l.pingedLanes;d=(1<<31-jt(42|e)+1)-1,d&=i&~(g&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(s=!0,Uh(l,d))}else d=Se,d=an(l,l===ze?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Pl(l,d)||(s=!0,Uh(l,d));l=l.next}while(s);Cc=!1}}function Vg(){Rh()}function Rh(){Kn=Ec=!1;var e=0;Cs!==0&&(Jg()&&(e=Cs),Cs=0);for(var a=qt(),s=null,l=Zn;l!==null;){var i=l.next,d=zh(l,a);d===0?(l.next=null,s===null?Zn=i:s.next=i,i===null&&(xl=s)):(s=l,(e!==0||(d&3)!==0)&&(Kn=!0)),l=i}Er(e)}function zh(e,a){for(var s=e.suspendedLanes,l=e.pingedLanes,i=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var g=31-jt(d),b=1<<g,A=i[g];A===-1?((b&s)===0||(b&l)!==0)&&(i[g]=x0(b,a)):A<=a&&(e.expiredLanes|=b),d&=~b}if(a=ze,s=Se,s=an(e,e===a?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,s===0||e===a&&(De===2||De===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Ma(l),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||Pl(e,s)){if(a=s&-s,a===e.callbackPriority)return a;switch(l!==null&&Ma(l),Li(s)){case 2:case 8:s=Sd;break;case 32:s=Wr;break;case 268435456:s=Ed;break;default:s=Wr}return l=kh.bind(null,e),s=Ze(s,l),e.callbackPriority=a,e.callbackNode=s,a}return l!==null&&l!==null&&Ma(l),e.callbackPriority=2,e.callbackNode=null,2}function kh(e,a){if(nt!==0&&nt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(Fn()&&e.callbackNode!==s)return null;var l=Se;return l=an(e,e===ze?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(ph(e,l,a),zh(e,qt()),e.callbackNode!=null&&e.callbackNode===s?kh.bind(null,e):null)}function Uh(e,a){if(Fn())return null;ph(e,a,!0)}function Hg(){ep(function(){(Ae&6)!==0?Ze(Gl,Vg):Rh()})}function Ac(){return Cs===0&&(Cs=Cd()),Cs}function $h(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:on(""+e)}function Bh(e,a){var s=a.ownerDocument.createElement("input");return s.name=a.name,s.value=a.value,e.id&&s.setAttribute("form",e.id),a.parentNode.insertBefore(s,a),e=new FormData(e),s.parentNode.removeChild(s),e}function Ig(e,a,s,l,i){if(a==="submit"&&s&&s.stateNode===i){var d=$h((i[xt]||null).action),g=l.submitter;g&&(a=(a=g[xt]||null)?$h(a.formAction):g.getAttribute("formAction"),a!==null&&(d=a,g=null));var b=new mn("action","action",null,l,i);e.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Cs!==0){var A=g?Bh(i,g):new FormData(i);Xo(s,{pending:!0,data:A,method:i.method,action:d},null,A)}}else typeof d=="function"&&(b.preventDefault(),A=g?Bh(i,g):new FormData(i),Xo(s,{pending:!0,data:A,method:i.method,action:d},d,A))},currentTarget:i}]})}}for(var Dc=0;Dc<ho.length;Dc++){var Oc=ho[Dc],Yg=Oc.toLowerCase(),Qg=Oc[0].toUpperCase()+Oc.slice(1);Kt(Yg,"on"+Qg)}Kt(pu,"onAnimationEnd"),Kt(bu,"onAnimationIteration"),Kt(vu,"onAnimationStart"),Kt("dblclick","onDoubleClick"),Kt("focusin","onFocus"),Kt("focusout","onBlur"),Kt(dg,"onTransitionRun"),Kt(ug,"onTransitionStart"),Kt(mg,"onTransitionCancel"),Kt(yu,"onTransitionEnd"),qs("onMouseEnter",["mouseout","mouseover"]),qs("onMouseLeave",["mouseout","mouseover"]),qs("onPointerEnter",["pointerout","pointerover"]),qs("onPointerLeave",["pointerout","pointerover"]),us("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),us("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),us("onBeforeInput",["compositionend","keypress","textInput","paste"]),us("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),us("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),us("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Cr));function qh(e,a){a=(a&4)!==0;for(var s=0;s<e.length;s++){var l=e[s],i=l.event;l=l.listeners;e:{var d=void 0;if(a)for(var g=l.length-1;0<=g;g--){var b=l[g],A=b.instance,P=b.currentTarget;if(b=b.listener,A!==d&&i.isPropagationStopped())break e;d=b,i.currentTarget=P;try{d(i)}catch(ee){Bn(ee)}i.currentTarget=null,d=A}else for(g=0;g<l.length;g++){if(b=l[g],A=b.instance,P=b.currentTarget,b=b.listener,A!==d&&i.isPropagationStopped())break e;d=b,i.currentTarget=P;try{d(i)}catch(ee){Bn(ee)}i.currentTarget=null,d=A}}}}function we(e,a){var s=a[Pi];s===void 0&&(s=a[Pi]=new Set);var l=e+"__bubble";s.has(l)||(Gh(a,e,2,!1),s.add(l))}function Tc(e,a,s){var l=0;a&&(l|=4),Gh(s,e,l,a)}var Jn="_reactListening"+Math.random().toString(36).slice(2);function Mc(e){if(!e[Jn]){e[Jn]=!0,Rd.forEach(function(s){s!=="selectionchange"&&(Xg.has(s)||Tc(s,!1,e),Tc(s,!0,e))});var a=e.nodeType===9?e:e.ownerDocument;a===null||a[Jn]||(a[Jn]=!0,Tc("selectionchange",!1,a))}}function Gh(e,a,s,l){switch(uf(a)){case 2:var i=jp;break;case 8:i=Np;break;default:i=Yc}s=i.bind(null,a,s,e),i=void 0,!Wi||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(i=!0),l?i!==void 0?e.addEventListener(a,s,{capture:!0,passive:i}):e.addEventListener(a,s,!0):i!==void 0?e.addEventListener(a,s,{passive:i}):e.addEventListener(a,s,!1)}function Rc(e,a,s,l,i){var d=l;if((a&1)===0&&(a&2)===0&&l!==null)e:for(;;){if(l===null)return;var g=l.tag;if(g===3||g===4){var b=l.stateNode.containerInfo;if(b===i)break;if(g===4)for(g=l.return;g!==null;){var A=g.tag;if((A===3||A===4)&&g.stateNode.containerInfo===i)return;g=g.return}for(;b!==null;){if(g=Us(b),g===null)return;if(A=g.tag,A===5||A===6||A===26||A===27){l=d=g;continue e}b=b.parentNode}}l=l.return}Qd(function(){var P=d,ee=Ki(s),se=[];e:{var I=ju.get(e);if(I!==void 0){var Y=mn,he=e;switch(e){case"keypress":if(dn(s)===0)break e;case"keydown":case"keyup":Y=P0;break;case"focusin":he="focus",Y=so;break;case"focusout":he="blur",Y=so;break;case"beforeblur":case"afterblur":Y=so;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=Zd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=O0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=I0;break;case pu:case bu:case vu:Y=R0;break;case yu:Y=Q0;break;case"scroll":case"scrollend":Y=A0;break;case"wheel":Y=F0;break;case"copy":case"cut":case"paste":Y=k0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=Jd;break;case"toggle":case"beforetoggle":Y=K0}var de=(a&4)!==0,Me=!de&&(e==="scroll"||e==="scrollend"),B=de?I!==null?I+"Capture":null:I;de=[];for(var R=P,L;R!==null;){var te=R;if(L=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||L===null||B===null||(te=Yl(R,B),te!=null&&de.push(Ar(R,te,L))),Me)break;R=R.return}0<de.length&&(I=new Y(I,he,null,s,ee),se.push({event:I,listeners:de}))}}if((a&7)===0){e:{if(I=e==="mouseover"||e==="pointerover",Y=e==="mouseout"||e==="pointerout",I&&s!==Zi&&(he=s.relatedTarget||s.fromElement)&&(Us(he)||he[ks]))break e;if((Y||I)&&(I=ee.window===ee?ee:(I=ee.ownerDocument)?I.defaultView||I.parentWindow:window,Y?(he=s.relatedTarget||s.toElement,Y=P,he=he?Us(he):null,he!==null&&(Me=x(he),de=he.tag,he!==Me||de!==5&&de!==27&&de!==6)&&(he=null)):(Y=null,he=P),Y!==he)){if(de=Zd,te="onMouseLeave",B="onMouseEnter",R="mouse",(e==="pointerout"||e==="pointerover")&&(de=Jd,te="onPointerLeave",B="onPointerEnter",R="pointer"),Me=Y==null?I:Il(Y),L=he==null?I:Il(he),I=new de(te,R+"leave",Y,s,ee),I.target=Me,I.relatedTarget=L,te=null,Us(ee)===P&&(de=new de(B,R+"enter",he,s,ee),de.target=L,de.relatedTarget=Me,te=de),Me=te,Y&&he)t:{for(de=Y,B=he,R=0,L=de;L;L=gl(L))R++;for(L=0,te=B;te;te=gl(te))L++;for(;0<R-L;)de=gl(de),R--;for(;0<L-R;)B=gl(B),L--;for(;R--;){if(de===B||B!==null&&de===B.alternate)break t;de=gl(de),B=gl(B)}de=null}else de=null;Y!==null&&Lh(se,I,Y,de,!1),he!==null&&Me!==null&&Lh(se,Me,he,de,!0)}}e:{if(I=P?Il(P):window,Y=I.nodeName&&I.nodeName.toLowerCase(),Y==="select"||Y==="input"&&I.type==="file")var ie=nu;else if(lu(I))if(iu)ie=ig;else{ie=rg;var ye=lg}else Y=I.nodeName,!Y||Y.toLowerCase()!=="input"||I.type!=="checkbox"&&I.type!=="radio"?P&&Fi(P.elementType)&&(ie=nu):ie=ng;if(ie&&(ie=ie(e,P))){ru(se,ie,s,ee);break e}ye&&ye(e,I,P),e==="focusout"&&P&&I.type==="number"&&P.memoizedProps.value!=null&&Xi(I,"number",I.value)}switch(ye=P?Il(P):window,e){case"focusin":(lu(ye)||ye.contentEditable==="true")&&(Ys=ye,co=P,er=null);break;case"focusout":er=co=Ys=null;break;case"mousedown":uo=!0;break;case"contextmenu":case"mouseup":case"dragend":uo=!1,xu(se,s,ee);break;case"selectionchange":if(cg)break;case"keydown":case"keyup":xu(se,s,ee)}var ce;if(ro)e:{switch(e){case"compositionstart":var ue="onCompositionStart";break e;case"compositionend":ue="onCompositionEnd";break e;case"compositionupdate":ue="onCompositionUpdate";break e}ue=void 0}else Is?au(e,s)&&(ue="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(ue="onCompositionStart");ue&&(Wd&&s.locale!=="ko"&&(Is||ue!=="onCompositionStart"?ue==="onCompositionEnd"&&Is&&(ce=Xd()):(ka=ee,eo="value"in ka?ka.value:ka.textContent,Is=!0)),ye=Wn(P,ue),0<ye.length&&(ue=new Kd(ue,e,null,s,ee),se.push({event:ue,listeners:ye}),ce?ue.data=ce:(ce=su(s),ce!==null&&(ue.data=ce)))),(ce=W0?eg(e,s):tg(e,s))&&(ue=Wn(P,"onBeforeInput"),0<ue.length&&(ye=new Kd("onBeforeInput","beforeinput",null,s,ee),se.push({event:ye,listeners:ue}),ye.data=ce)),Ig(se,e,P,s,ee)}qh(se,a)})}function Ar(e,a,s){return{instance:e,listener:a,currentTarget:s}}function Wn(e,a){for(var s=a+"Capture",l=[];e!==null;){var i=e,d=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||d===null||(i=Yl(e,s),i!=null&&l.unshift(Ar(e,i,d)),i=Yl(e,a),i!=null&&l.push(Ar(e,i,d))),e.tag===3)return l;e=e.return}return[]}function gl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Lh(e,a,s,l,i){for(var d=a._reactName,g=[];s!==null&&s!==l;){var b=s,A=b.alternate,P=b.stateNode;if(b=b.tag,A!==null&&A===l)break;b!==5&&b!==26&&b!==27||P===null||(A=P,i?(P=Yl(s,d),P!=null&&g.unshift(Ar(s,P,A))):i||(P=Yl(s,d),P!=null&&g.push(Ar(s,P,A)))),s=s.return}g.length!==0&&e.push({event:a,listeners:g})}var Fg=/\r\n?/g,Zg=/\u0000|\uFFFD/g;function Ph(e){return(typeof e=="string"?e:""+e).replace(Fg,`
`).replace(Zg,"")}function Vh(e,a){return a=Ph(a),Ph(e)===a}function ei(){}function Te(e,a,s,l,i,d){switch(s){case"children":typeof l=="string"?a==="body"||a==="textarea"&&l===""||Ps(e,l):(typeof l=="number"||typeof l=="bigint")&&a!=="body"&&Ps(e,""+l);break;case"className":ln(e,"class",l);break;case"tabIndex":ln(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ln(e,s,l);break;case"style":Id(e,l,d);break;case"data":if(a!=="object"){ln(e,"data",l);break}case"src":case"href":if(l===""&&(a!=="a"||s!=="href")){e.removeAttribute(s);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(s);break}l=on(""+l),e.setAttribute(s,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(s==="formAction"?(a!=="input"&&Te(e,a,"name",i.name,i,null),Te(e,a,"formEncType",i.formEncType,i,null),Te(e,a,"formMethod",i.formMethod,i,null),Te(e,a,"formTarget",i.formTarget,i,null)):(Te(e,a,"encType",i.encType,i,null),Te(e,a,"method",i.method,i,null),Te(e,a,"target",i.target,i,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(s);break}l=on(""+l),e.setAttribute(s,l);break;case"onClick":l!=null&&(e.onclick=ei);break;case"onScroll":l!=null&&we("scroll",e);break;case"onScrollEnd":l!=null&&we("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(u(61));if(s=l.__html,s!=null){if(i.children!=null)throw Error(u(60));e.innerHTML=s}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}s=on(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,""+l):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":l===!0?e.setAttribute(s,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,l):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(s,l):e.removeAttribute(s);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(s):e.setAttribute(s,l);break;case"popover":we("beforetoggle",e),we("toggle",e),sn(e,"popover",l);break;case"xlinkActuate":fa(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":fa(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":fa(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":fa(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":fa(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":fa(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":fa(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":fa(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":fa(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":sn(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=E0.get(s)||s,sn(e,s,l))}}function zc(e,a,s,l,i,d){switch(s){case"style":Id(e,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(u(61));if(s=l.__html,s!=null){if(i.children!=null)throw Error(u(60));e.innerHTML=s}}break;case"children":typeof l=="string"?Ps(e,l):(typeof l=="number"||typeof l=="bigint")&&Ps(e,""+l);break;case"onScroll":l!=null&&we("scroll",e);break;case"onScrollEnd":l!=null&&we("scrollend",e);break;case"onClick":l!=null&&(e.onclick=ei);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!zd.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(i=s.endsWith("Capture"),a=s.slice(2,i?s.length-7:void 0),d=e[xt]||null,d=d!=null?d[s]:null,typeof d=="function"&&e.removeEventListener(a,d,i),typeof l=="function")){typeof d!="function"&&d!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(a,l,i);break e}s in e?e[s]=l:l===!0?e.setAttribute(s,""):sn(e,s,l)}}}function it(e,a,s){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":we("error",e),we("load",e);var l=!1,i=!1,d;for(d in s)if(s.hasOwnProperty(d)){var g=s[d];if(g!=null)switch(d){case"src":l=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(u(137,a));default:Te(e,a,d,g,s,null)}}i&&Te(e,a,"srcSet",s.srcSet,s,null),l&&Te(e,a,"src",s.src,s,null);return;case"input":we("invalid",e);var b=d=g=i=null,A=null,P=null;for(l in s)if(s.hasOwnProperty(l)){var ee=s[l];if(ee!=null)switch(l){case"name":i=ee;break;case"type":g=ee;break;case"checked":A=ee;break;case"defaultChecked":P=ee;break;case"value":d=ee;break;case"defaultValue":b=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(u(137,a));break;default:Te(e,a,l,ee,s,null)}}Ld(e,d,b,A,P,g,i,!1),rn(e);return;case"select":we("invalid",e),l=g=d=null;for(i in s)if(s.hasOwnProperty(i)&&(b=s[i],b!=null))switch(i){case"value":d=b;break;case"defaultValue":g=b;break;case"multiple":l=b;default:Te(e,a,i,b,s,null)}a=d,s=g,e.multiple=!!l,a!=null?Ls(e,!!l,a,!1):s!=null&&Ls(e,!!l,s,!0);return;case"textarea":we("invalid",e),d=i=l=null;for(g in s)if(s.hasOwnProperty(g)&&(b=s[g],b!=null))switch(g){case"value":l=b;break;case"defaultValue":i=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(u(91));break;default:Te(e,a,g,b,s,null)}Vd(e,l,i,d),rn(e);return;case"option":for(A in s)if(s.hasOwnProperty(A)&&(l=s[A],l!=null))switch(A){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Te(e,a,A,l,s,null)}return;case"dialog":we("beforetoggle",e),we("toggle",e),we("cancel",e),we("close",e);break;case"iframe":case"object":we("load",e);break;case"video":case"audio":for(l=0;l<Cr.length;l++)we(Cr[l],e);break;case"image":we("error",e),we("load",e);break;case"details":we("toggle",e);break;case"embed":case"source":case"link":we("error",e),we("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(P in s)if(s.hasOwnProperty(P)&&(l=s[P],l!=null))switch(P){case"children":case"dangerouslySetInnerHTML":throw Error(u(137,a));default:Te(e,a,P,l,s,null)}return;default:if(Fi(a)){for(ee in s)s.hasOwnProperty(ee)&&(l=s[ee],l!==void 0&&zc(e,a,ee,l,s,void 0));return}}for(b in s)s.hasOwnProperty(b)&&(l=s[b],l!=null&&Te(e,a,b,l,s,null))}function Kg(e,a,s,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,d=null,g=null,b=null,A=null,P=null,ee=null;for(Y in s){var se=s[Y];if(s.hasOwnProperty(Y)&&se!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":A=se;default:l.hasOwnProperty(Y)||Te(e,a,Y,null,l,se)}}for(var I in l){var Y=l[I];if(se=s[I],l.hasOwnProperty(I)&&(Y!=null||se!=null))switch(I){case"type":d=Y;break;case"name":i=Y;break;case"checked":P=Y;break;case"defaultChecked":ee=Y;break;case"value":g=Y;break;case"defaultValue":b=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(u(137,a));break;default:Y!==se&&Te(e,a,I,Y,l,se)}}Qi(e,g,b,A,P,ee,d,i);return;case"select":Y=g=b=I=null;for(d in s)if(A=s[d],s.hasOwnProperty(d)&&A!=null)switch(d){case"value":break;case"multiple":Y=A;default:l.hasOwnProperty(d)||Te(e,a,d,null,l,A)}for(i in l)if(d=l[i],A=s[i],l.hasOwnProperty(i)&&(d!=null||A!=null))switch(i){case"value":I=d;break;case"defaultValue":b=d;break;case"multiple":g=d;default:d!==A&&Te(e,a,i,d,l,A)}a=b,s=g,l=Y,I!=null?Ls(e,!!s,I,!1):!!l!=!!s&&(a!=null?Ls(e,!!s,a,!0):Ls(e,!!s,s?[]:"",!1));return;case"textarea":Y=I=null;for(b in s)if(i=s[b],s.hasOwnProperty(b)&&i!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:Te(e,a,b,null,l,i)}for(g in l)if(i=l[g],d=s[g],l.hasOwnProperty(g)&&(i!=null||d!=null))switch(g){case"value":I=i;break;case"defaultValue":Y=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(u(91));break;default:i!==d&&Te(e,a,g,i,l,d)}Pd(e,I,Y);return;case"option":for(var he in s)if(I=s[he],s.hasOwnProperty(he)&&I!=null&&!l.hasOwnProperty(he))switch(he){case"selected":e.selected=!1;break;default:Te(e,a,he,null,l,I)}for(A in l)if(I=l[A],Y=s[A],l.hasOwnProperty(A)&&I!==Y&&(I!=null||Y!=null))switch(A){case"selected":e.selected=I&&typeof I!="function"&&typeof I!="symbol";break;default:Te(e,a,A,I,l,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var de in s)I=s[de],s.hasOwnProperty(de)&&I!=null&&!l.hasOwnProperty(de)&&Te(e,a,de,null,l,I);for(P in l)if(I=l[P],Y=s[P],l.hasOwnProperty(P)&&I!==Y&&(I!=null||Y!=null))switch(P){case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(u(137,a));break;default:Te(e,a,P,I,l,Y)}return;default:if(Fi(a)){for(var Me in s)I=s[Me],s.hasOwnProperty(Me)&&I!==void 0&&!l.hasOwnProperty(Me)&&zc(e,a,Me,void 0,l,I);for(ee in l)I=l[ee],Y=s[ee],!l.hasOwnProperty(ee)||I===Y||I===void 0&&Y===void 0||zc(e,a,ee,I,l,Y);return}}for(var B in s)I=s[B],s.hasOwnProperty(B)&&I!=null&&!l.hasOwnProperty(B)&&Te(e,a,B,null,l,I);for(se in l)I=l[se],Y=s[se],!l.hasOwnProperty(se)||I===Y||I==null&&Y==null||Te(e,a,se,I,l,Y)}var kc=null,Uc=null;function ti(e){return e.nodeType===9?e:e.ownerDocument}function Hh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ih(e,a){if(e===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&a==="foreignObject"?0:e}function $c(e,a){return e==="textarea"||e==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Bc=null;function Jg(){var e=window.event;return e&&e.type==="popstate"?e===Bc?!1:(Bc=e,!0):(Bc=null,!1)}var Yh=typeof setTimeout=="function"?setTimeout:void 0,Wg=typeof clearTimeout=="function"?clearTimeout:void 0,Qh=typeof Promise=="function"?Promise:void 0,ep=typeof queueMicrotask=="function"?queueMicrotask:typeof Qh!="undefined"?function(e){return Qh.resolve(null).then(e).catch(tp)}:Yh;function tp(e){setTimeout(function(){throw e})}function Ka(e){return e==="head"}function Xh(e,a){var s=a,l=0,i=0;do{var d=s.nextSibling;if(e.removeChild(s),d&&d.nodeType===8)if(s=d.data,s==="/$"){if(0<l&&8>l){s=l;var g=e.ownerDocument;if(s&1&&Dr(g.documentElement),s&2&&Dr(g.body),s&4)for(s=g.head,Dr(s),g=s.firstChild;g;){var b=g.nextSibling,A=g.nodeName;g[Hl]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&g.rel.toLowerCase()==="stylesheet"||s.removeChild(g),g=b}}if(i===0){e.removeChild(d),$r(a);return}i--}else s==="$"||s==="$?"||s==="$!"?i++:l=s.charCodeAt(0)-48;else l=0;s=d}while(s);$r(a)}function qc(e){var a=e.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var s=a;switch(a=a.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":qc(s),Vi(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function ap(e,a,s,l){for(;e.nodeType===1;){var i=s;if(e.nodeName.toLowerCase()!==a.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Hl])switch(a){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==i.rel||e.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||e.getAttribute("title")!==(i.title==null?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(i.src==null?null:i.src)||e.getAttribute("type")!==(i.type==null?null:i.type)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(a==="input"&&e.type==="hidden"){var d=i.name==null?null:""+i.name;if(i.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=Wt(e.nextSibling),e===null)break}return null}function sp(e,a,s){if(a==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=Wt(e.nextSibling),e===null))return null;return e}function Gc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function lp(e,a){var s=e.ownerDocument;if(e.data!=="$?"||s.readyState==="complete")a();else{var l=function(){a(),s.removeEventListener("DOMContentLoaded",l)};s.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Wt(e){for(;e!=null;e=e.nextSibling){var a=e.nodeType;if(a===1||a===3)break;if(a===8){if(a=e.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return e}var Lc=null;function Fh(e){e=e.previousSibling;for(var a=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(a===0)return e;a--}else s==="/$"&&a++}e=e.previousSibling}return null}function Zh(e,a,s){switch(a=ti(s),e){case"html":if(e=a.documentElement,!e)throw Error(u(452));return e;case"head":if(e=a.head,!e)throw Error(u(453));return e;case"body":if(e=a.body,!e)throw Error(u(454));return e;default:throw Error(u(451))}}function Dr(e){for(var a=e.attributes;a.length;)e.removeAttributeNode(a[0]);Vi(e)}var Xt=new Map,Kh=new Set;function ai(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Aa=H.d;H.d={f:rp,r:np,D:ip,C:op,L:cp,m:dp,X:mp,S:up,M:hp};function rp(){var e=Aa.f(),a=Qn();return e||a}function np(e){var a=$s(e);a!==null&&a.tag===5&&a.type==="form"?pm(a):Aa.r(e)}var pl=typeof document=="undefined"?null:document;function Jh(e,a,s){var l=pl;if(l&&typeof a=="string"&&a){var i=Lt(a);i='link[rel="'+e+'"][href="'+i+'"]',typeof s=="string"&&(i+='[crossorigin="'+s+'"]'),Kh.has(i)||(Kh.add(i),e={rel:e,crossOrigin:s,href:a},l.querySelector(i)===null&&(a=l.createElement("link"),it(a,"link",e),We(a),l.head.appendChild(a)))}}function ip(e){Aa.D(e),Jh("dns-prefetch",e,null)}function op(e,a){Aa.C(e,a),Jh("preconnect",e,a)}function cp(e,a,s){Aa.L(e,a,s);var l=pl;if(l&&e&&a){var i='link[rel="preload"][as="'+Lt(a)+'"]';a==="image"&&s&&s.imageSrcSet?(i+='[imagesrcset="'+Lt(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(i+='[imagesizes="'+Lt(s.imageSizes)+'"]')):i+='[href="'+Lt(e)+'"]';var d=i;switch(a){case"style":d=bl(e);break;case"script":d=vl(e)}Xt.has(d)||(e=w({rel:"preload",href:a==="image"&&s&&s.imageSrcSet?void 0:e,as:a},s),Xt.set(d,e),l.querySelector(i)!==null||a==="style"&&l.querySelector(Or(d))||a==="script"&&l.querySelector(Tr(d))||(a=l.createElement("link"),it(a,"link",e),We(a),l.head.appendChild(a)))}}function dp(e,a){Aa.m(e,a);var s=pl;if(s&&e){var l=a&&typeof a.as=="string"?a.as:"script",i='link[rel="modulepreload"][as="'+Lt(l)+'"][href="'+Lt(e)+'"]',d=i;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=vl(e)}if(!Xt.has(d)&&(e=w({rel:"modulepreload",href:e},a),Xt.set(d,e),s.querySelector(i)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Tr(d)))return}l=s.createElement("link"),it(l,"link",e),We(l),s.head.appendChild(l)}}}function up(e,a,s){Aa.S(e,a,s);var l=pl;if(l&&e){var i=Bs(l).hoistableStyles,d=bl(e);a=a||"default";var g=i.get(d);if(!g){var b={loading:0,preload:null};if(g=l.querySelector(Or(d)))b.loading=5;else{e=w({rel:"stylesheet",href:e,"data-precedence":a},s),(s=Xt.get(d))&&Pc(e,s);var A=g=l.createElement("link");We(A),it(A,"link",e),A._p=new Promise(function(P,ee){A.onload=P,A.onerror=ee}),A.addEventListener("load",function(){b.loading|=1}),A.addEventListener("error",function(){b.loading|=2}),b.loading|=4,si(g,a,l)}g={type:"stylesheet",instance:g,count:1,state:b},i.set(d,g)}}}function mp(e,a){Aa.X(e,a);var s=pl;if(s&&e){var l=Bs(s).hoistableScripts,i=vl(e),d=l.get(i);d||(d=s.querySelector(Tr(i)),d||(e=w({src:e,async:!0},a),(a=Xt.get(i))&&Vc(e,a),d=s.createElement("script"),We(d),it(d,"link",e),s.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(i,d))}}function hp(e,a){Aa.M(e,a);var s=pl;if(s&&e){var l=Bs(s).hoistableScripts,i=vl(e),d=l.get(i);d||(d=s.querySelector(Tr(i)),d||(e=w({src:e,async:!0,type:"module"},a),(a=Xt.get(i))&&Vc(e,a),d=s.createElement("script"),We(d),it(d,"link",e),s.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(i,d))}}function Wh(e,a,s,l){var i=(i=xe.current)?ai(i):null;if(!i)throw Error(u(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(a=bl(s.href),s=Bs(i).hoistableStyles,l=s.get(a),l||(l={type:"style",instance:null,count:0,state:null},s.set(a,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=bl(s.href);var d=Bs(i).hoistableStyles,g=d.get(e);if(g||(i=i.ownerDocument||i,g={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,g),(d=i.querySelector(Or(e)))&&!d._p&&(g.instance=d,g.state.loading=5),Xt.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},Xt.set(e,s),d||fp(i,e,s,g.state))),a&&l===null)throw Error(u(528,""));return g}if(a&&l!==null)throw Error(u(529,""));return null;case"script":return a=s.async,s=s.src,typeof s=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=vl(s),s=Bs(i).hoistableScripts,l=s.get(a),l||(l={type:"script",instance:null,count:0,state:null},s.set(a,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(u(444,e))}}function bl(e){return'href="'+Lt(e)+'"'}function Or(e){return'link[rel="stylesheet"]['+e+"]"}function ef(e){return w({},e,{"data-precedence":e.precedence,precedence:null})}function fp(e,a,s,l){e.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=e.createElement("link"),l.preload=a,a.addEventListener("load",function(){return l.loading|=1}),a.addEventListener("error",function(){return l.loading|=2}),it(a,"link",s),We(a),e.head.appendChild(a))}function vl(e){return'[src="'+Lt(e)+'"]'}function Tr(e){return"script[async]"+e}function tf(e,a,s){if(a.count++,a.instance===null)switch(a.type){case"style":var l=e.querySelector('style[data-href~="'+Lt(s.href)+'"]');if(l)return a.instance=l,We(l),l;var i=w({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),We(l),it(l,"style",i),si(l,s.precedence,e),a.instance=l;case"stylesheet":i=bl(s.href);var d=e.querySelector(Or(i));if(d)return a.state.loading|=4,a.instance=d,We(d),d;l=ef(s),(i=Xt.get(i))&&Pc(l,i),d=(e.ownerDocument||e).createElement("link"),We(d);var g=d;return g._p=new Promise(function(b,A){g.onload=b,g.onerror=A}),it(d,"link",l),a.state.loading|=4,si(d,s.precedence,e),a.instance=d;case"script":return d=vl(s.src),(i=e.querySelector(Tr(d)))?(a.instance=i,We(i),i):(l=s,(i=Xt.get(d))&&(l=w({},s),Vc(l,i)),e=e.ownerDocument||e,i=e.createElement("script"),We(i),it(i,"link",l),e.head.appendChild(i),a.instance=i);case"void":return null;default:throw Error(u(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(l=a.instance,a.state.loading|=4,si(l,s.precedence,e));return a.instance}function si(e,a,s){for(var l=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=l.length?l[l.length-1]:null,d=i,g=0;g<l.length;g++){var b=l[g];if(b.dataset.precedence===a)d=b;else if(d!==i)break}d?d.parentNode.insertBefore(e,d.nextSibling):(a=s.nodeType===9?s.head:s,a.insertBefore(e,a.firstChild))}function Pc(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.title==null&&(e.title=a.title)}function Vc(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.integrity==null&&(e.integrity=a.integrity)}var li=null;function af(e,a,s){if(li===null){var l=new Map,i=li=new Map;i.set(s,l)}else i=li,l=i.get(s),l||(l=new Map,i.set(s,l));if(l.has(e))return l;for(l.set(e,null),s=s.getElementsByTagName(e),i=0;i<s.length;i++){var d=s[i];if(!(d[Hl]||d[ot]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var g=d.getAttribute(a)||"";g=e+g;var b=l.get(g);b?b.push(d):l.set(g,[d])}}return l}function sf(e,a,s){e=e.ownerDocument||e,e.head.insertBefore(s,a==="title"?e.querySelector("head > title"):null)}function xp(e,a,s){if(s===1||a.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return e=a.disabled,typeof a.precedence=="string"&&e==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function lf(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Mr=null;function gp(){}function pp(e,a,s){if(Mr===null)throw Error(u(475));var l=Mr;if(a.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var i=bl(s.href),d=e.querySelector(Or(i));if(d){e=d._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(l.count++,l=ri.bind(l),e.then(l,l)),a.state.loading|=4,a.instance=d,We(d);return}d=e.ownerDocument||e,s=ef(s),(i=Xt.get(i))&&Pc(s,i),d=d.createElement("link"),We(d);var g=d;g._p=new Promise(function(b,A){g.onload=b,g.onerror=A}),it(d,"link",s),a.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(a,e),(e=a.state.preload)&&(a.state.loading&3)===0&&(l.count++,a=ri.bind(l),e.addEventListener("load",a),e.addEventListener("error",a))}}function bp(){if(Mr===null)throw Error(u(475));var e=Mr;return e.stylesheets&&e.count===0&&Hc(e,e.stylesheets),0<e.count?function(a){var s=setTimeout(function(){if(e.stylesheets&&Hc(e,e.stylesheets),e.unsuspend){var l=e.unsuspend;e.unsuspend=null,l()}},6e4);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(s)}}:null}function ri(){if(this.count--,this.count===0){if(this.stylesheets)Hc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var ni=null;function Hc(e,a){e.stylesheets=null,e.unsuspend!==null&&(e.count++,ni=new Map,a.forEach(vp,e),ni=null,ri.call(e))}function vp(e,a){if(!(a.state.loading&4)){var s=ni.get(e);if(s)var l=s.get(null);else{s=new Map,ni.set(e,s);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<i.length;d++){var g=i[d];(g.nodeName==="LINK"||g.getAttribute("media")!=="not all")&&(s.set(g.dataset.precedence,g),l=g)}l&&s.set(null,l)}i=a.instance,g=i.getAttribute("data-precedence"),d=s.get(g)||l,d===l&&s.set(null,i),s.set(g,i),this.count++,l=ri.bind(this),i.addEventListener("load",l),i.addEventListener("error",l),d?d.parentNode.insertBefore(i,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(i,e.firstChild)),a.state.loading|=4}}var Rr={$$typeof:V,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function yp(e,a,s,l,i,d,g,b){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=qi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qi(0),this.hiddenUpdates=qi(null),this.identifierPrefix=l,this.onUncaughtError=i,this.onCaughtError=d,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function rf(e,a,s,l,i,d,g,b,A,P,ee,se){return e=new yp(e,a,s,g,b,A,P,se),a=1,d===!0&&(a|=24),d=wt(3,null,null,a),e.current=d,d.stateNode=e,a=So(),a.refCount++,e.pooledCache=a,a.refCount++,d.memoizedState={element:l,isDehydrated:s,cache:a},Do(d),e}function nf(e){return e?(e=Zs,e):Zs}function of(e,a,s,l,i,d){i=nf(i),l.context===null?l.context=i:l.pendingContext=i,l=Ba(a),l.payload={element:s},d=d===void 0?null:d,d!==null&&(l.callback=d),s=qa(e,l,a),s!==null&&(At(s,e,a),cr(s,e,a))}function cf(e,a){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<a?s:a}}function Ic(e,a){cf(e,a),(e=e.alternate)&&cf(e,a)}function df(e){if(e.tag===13){var a=Fs(e,67108864);a!==null&&At(a,e,67108864),Ic(e,67108864)}}var ii=!0;function jp(e,a,s,l){var i=T.T;T.T=null;var d=H.p;try{H.p=2,Yc(e,a,s,l)}finally{H.p=d,T.T=i}}function Np(e,a,s,l){var i=T.T;T.T=null;var d=H.p;try{H.p=8,Yc(e,a,s,l)}finally{H.p=d,T.T=i}}function Yc(e,a,s,l){if(ii){var i=Qc(l);if(i===null)Rc(e,a,l,oi,s),mf(e,l);else if(_p(i,e,a,s,l))l.stopPropagation();else if(mf(e,l),a&4&&-1<wp.indexOf(e)){for(;i!==null;){var d=$s(i);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var g=ds(d.pendingLanes);if(g!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;g;){var A=1<<31-jt(g);b.entanglements[1]|=A,g&=~A}ia(d),(Ae&6)===0&&(In=qt()+500,Er(0))}}break;case 13:b=Fs(d,2),b!==null&&At(b,d,2),Qn(),Ic(d,2)}if(d=Qc(l),d===null&&Rc(e,a,l,oi,s),d===i)break;i=d}i!==null&&l.stopPropagation()}else Rc(e,a,l,null,s)}}function Qc(e){return e=Ki(e),Xc(e)}var oi=null;function Xc(e){if(oi=null,e=Us(e),e!==null){var a=x(e);if(a===null)e=null;else{var s=a.tag;if(s===13){if(e=p(a),e!==null)return e;e=null}else if(s===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;e=null}else a!==e&&(e=null)}}return oi=e,null}function uf(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Jr()){case Gl:return 2;case Sd:return 8;case Wr:case c0:return 32;case Ed:return 268435456;default:return 32}default:return 32}}var Fc=!1,Ja=null,Wa=null,es=null,zr=new Map,kr=new Map,ts=[],wp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function mf(e,a){switch(e){case"focusin":case"focusout":Ja=null;break;case"dragenter":case"dragleave":Wa=null;break;case"mouseover":case"mouseout":es=null;break;case"pointerover":case"pointerout":zr.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":kr.delete(a.pointerId)}}function Ur(e,a,s,l,i,d){return e===null||e.nativeEvent!==d?(e={blockedOn:a,domEventName:s,eventSystemFlags:l,nativeEvent:d,targetContainers:[i]},a!==null&&(a=$s(a),a!==null&&df(a)),e):(e.eventSystemFlags|=l,a=e.targetContainers,i!==null&&a.indexOf(i)===-1&&a.push(i),e)}function _p(e,a,s,l,i){switch(a){case"focusin":return Ja=Ur(Ja,e,a,s,l,i),!0;case"dragenter":return Wa=Ur(Wa,e,a,s,l,i),!0;case"mouseover":return es=Ur(es,e,a,s,l,i),!0;case"pointerover":var d=i.pointerId;return zr.set(d,Ur(zr.get(d)||null,e,a,s,l,i)),!0;case"gotpointercapture":return d=i.pointerId,kr.set(d,Ur(kr.get(d)||null,e,a,s,l,i)),!0}return!1}function hf(e){var a=Us(e.target);if(a!==null){var s=x(a);if(s!==null){if(a=s.tag,a===13){if(a=p(s),a!==null){e.blockedOn=a,p0(e.priority,function(){if(s.tag===13){var l=Ct();l=Gi(l);var i=Fs(s,l);i!==null&&At(i,s,l),Ic(s,l)}});return}}else if(a===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ci(e){if(e.blockedOn!==null)return!1;for(var a=e.targetContainers;0<a.length;){var s=Qc(e.nativeEvent);if(s===null){s=e.nativeEvent;var l=new s.constructor(s.type,s);Zi=l,s.target.dispatchEvent(l),Zi=null}else return a=$s(s),a!==null&&df(a),e.blockedOn=s,!1;a.shift()}return!0}function ff(e,a,s){ci(e)&&s.delete(a)}function Sp(){Fc=!1,Ja!==null&&ci(Ja)&&(Ja=null),Wa!==null&&ci(Wa)&&(Wa=null),es!==null&&ci(es)&&(es=null),zr.forEach(ff),kr.forEach(ff)}function di(e,a){e.blockedOn===a&&(e.blockedOn=null,Fc||(Fc=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Sp)))}var ui=null;function xf(e){ui!==e&&(ui=e,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){ui===e&&(ui=null);for(var a=0;a<e.length;a+=3){var s=e[a],l=e[a+1],i=e[a+2];if(typeof l!="function"){if(Xc(l||s)===null)continue;break}var d=$s(s);d!==null&&(e.splice(a,3),a-=3,Xo(d,{pending:!0,data:i,method:s.method,action:l},l,i))}}))}function $r(e){function a(A){return di(A,e)}Ja!==null&&di(Ja,e),Wa!==null&&di(Wa,e),es!==null&&di(es,e),zr.forEach(a),kr.forEach(a);for(var s=0;s<ts.length;s++){var l=ts[s];l.blockedOn===e&&(l.blockedOn=null)}for(;0<ts.length&&(s=ts[0],s.blockedOn===null);)hf(s),s.blockedOn===null&&ts.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(l=0;l<s.length;l+=3){var i=s[l],d=s[l+1],g=i[xt]||null;if(typeof d=="function")g||xf(s);else if(g){var b=null;if(d&&d.hasAttribute("formAction")){if(i=d,g=d[xt]||null)b=g.formAction;else if(Xc(i)!==null)continue}else b=g.action;typeof b=="function"?s[l+1]=b:(s.splice(l,3),l-=3),xf(s)}}}function Zc(e){this._internalRoot=e}mi.prototype.render=Zc.prototype.render=function(e){var a=this._internalRoot;if(a===null)throw Error(u(409));var s=a.current,l=Ct();of(s,l,e,a,null,null)},mi.prototype.unmount=Zc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var a=e.containerInfo;of(e.current,2,null,e,null,null),Qn(),a[ks]=null}};function mi(e){this._internalRoot=e}mi.prototype.unstable_scheduleHydration=function(e){if(e){var a=Td();e={blockedOn:null,target:e,priority:a};for(var s=0;s<ts.length&&a!==0&&a<ts[s].priority;s++);ts.splice(s,0,e),s===0&&hf(e)}};var gf=n.version;if(gf!=="19.1.0")throw Error(u(527,gf,"19.1.0"));H.findDOMNode=function(e){var a=e._reactInternals;if(a===void 0)throw typeof e.render=="function"?Error(u(188)):(e=Object.keys(e).join(","),Error(u(268,e)));return e=c(a),e=e!==null?h(e):null,e=e===null?null:e.stateNode,e};var Ep={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:T,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var hi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hi.isDisabled&&hi.supportsFiber)try{Ll=hi.inject(Ep),yt=hi}catch(e){}}return Br.createRoot=function(e,a){if(!m(e))throw Error(u(299));var s=!1,l="",i=Tm,d=Mm,g=Rm,b=null;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(l=a.identifierPrefix),a.onUncaughtError!==void 0&&(i=a.onUncaughtError),a.onCaughtError!==void 0&&(d=a.onCaughtError),a.onRecoverableError!==void 0&&(g=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(b=a.unstable_transitionCallbacks)),a=rf(e,1,!1,null,null,s,l,i,d,g,b,null),e[ks]=a.current,Mc(e),new Zc(a)},Br.hydrateRoot=function(e,a,s){if(!m(e))throw Error(u(299));var l=!1,i="",d=Tm,g=Mm,b=Rm,A=null,P=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(i=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(b=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(A=s.unstable_transitionCallbacks),s.formState!==void 0&&(P=s.formState)),a=rf(e,1,!0,a,s!=null?s:null,l,i,d,g,b,A,P),a.context=nf(null),s=a.current,l=Ct(),l=Gi(l),i=Ba(l),i.callback=null,qa(s,i,l),s=l,a.current.lanes=s,Vl(a,s),ia(a),e[ks]=a.current,Mc(e),new mi(a)},Br.version="19.1.0",Br}var _f;function nb(){if(_f)return Jc.exports;_f=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(n){console.error(n)}}return o(),Jc.exports=rb(),Jc.exports}var ib=nb();const ob=()=>t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-100 to-indigo-200",children:t.jsxs("div",{className:"flex flex-col items-center justify-center p-6 pt-10",children:[t.jsxs("div",{className:"bg-white shadow-xl rounded-lg px-8 py-8 w-[1240px] text-center",children:[t.jsx("div",{className:"flex justify-center mb-6",children:t.jsx("img",{src:"/images/Bull-S.jpg",alt:"Cuestionario BULL-S",className:"h-auto rounded shadow-sm",style:{width:"1200px"}})}),t.jsx("p",{className:"text-gray-700 mb-6 text-lg",children:"¡Bienvenido/a! Por favor, selecciona tu rol para comenzar."}),t.jsxs("div",{className:"flex justify-center space-x-6 mb-8",children:[t.jsxs(Be,{to:"/auth/student",className:"flex items-center justify-center w-1/4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition duration-300 ease-in-out text-base font-medium shadow-sm",children:[t.jsx(ve,{className:"mr-2 h-5 w-5"}),"Soy Estudiante"]}),t.jsxs(Be,{to:"/auth/admin",className:"flex items-center justify-center w-1/4 px-4 py-2 bg-gray-700 text-white rounded-md hover:bg-gray-800 transition duration-300 ease-in-out text-base font-medium shadow-sm",children:[t.jsx(Gx,{className:"mr-2 h-5 w-5"}),"Soy Administrador/a"]}),t.jsxs(Be,{to:"/auth/serverless",className:"flex items-center justify-center w-1/4 px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition duration-300 ease-in-out text-base font-medium shadow-sm",children:[t.jsx(Ut,{className:"mr-2 h-5 w-5"}),"Funciones Serverless"]})]})]}),t.jsxs("footer",{className:"mt-8 text-sm text-gray-500",children:["BullsApp-Enhanced © ",new Date().getFullYear()]})]})});var cb=Object.defineProperty,db=Object.defineProperties,ub=Object.getOwnPropertyDescriptors,Sf=Object.getOwnPropertySymbols,mb=Object.prototype.hasOwnProperty,hb=Object.prototype.propertyIsEnumerable,ud=(o,n,r)=>n in o?cb(o,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[n]=r,fb=(o,n)=>{for(var r in n||(n={}))mb.call(n,r)&&ud(o,r,n[r]);if(Sf)for(var r of Sf(n))hb.call(n,r)&&ud(o,r,n[r]);return o},xb=(o,n)=>db(o,ub(n)),qr=(o,n,r)=>ud(o,typeof n!="symbol"?n+"":n,r),gb=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())}),Ft=(o=>(o.ERROR="error",o.CONNECTION="connection",o.PERFORMANCE="performance",o.USER_ACTION="user_action",o.AUTH="auth",o.DIAGNOSTIC="diagnostic",o))(Ft||{});class pb{constructor(){qr(this,"events",[]),qr(this,"maxEvents",100),qr(this,"isEnabled",!0),qr(this,"consoleLogging",!0),qr(this,"serverEndpoint",null)}trackEvent(n){this.isEnabled&&(this.events.push(xb(fb({},n),{timestamp:n.timestamp||Date.now()})),this.events.length>this.maxEvents&&this.events.shift(),this.consoleLogging&&console.log(`[Telemetry] ${n.type}:${n.name}`,n.data||""),this.sendToServer(n))}trackError(n,r,u){const m={type:"error",name:n,timestamp:Date.now(),error:{message:(r==null?void 0:r.message)||String(r),stack:r==null?void 0:r.stack,code:r==null?void 0:r.code},context:u};this.trackEvent(m)}trackConnection(n,r,u){const m={type:"connection",name:`connection_${n}`,timestamp:Date.now(),status:n,duration:r,endpoint:u};this.trackEvent(m)}trackAuth(n,r,u,m){const x={type:"auth",name:`auth_${n}`,timestamp:Date.now(),action:n,success:r,userId:u,error:m};this.trackEvent(x)}trackDiagnostic(n,r,u,m){const x={type:"diagnostic",name:`diagnostic_${n}_${u}`,timestamp:Date.now(),category:n,level:r,details:m};this.trackEvent(x),r==="critical"&&this.trackError(`Critical diagnostic: ${u}`,new Error(JSON.stringify(m)),{category:n})}sendToServer(n){return gb(this,null,function*(){if(this.serverEndpoint)try{yield fetch(this.serverEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),keepalive:!0})}catch(r){this.consoleLogging&&console.error("[Telemetry] Error sending event to server:",r)}})}getEvents(){return[...this.events]}clearEvents(){this.events=[]}setEnabled(n){this.isEnabled=n}setConsoleLogging(n){this.consoleLogging=n}setServerEndpoint(n){this.serverEndpoint=n}setMaxEvents(n){this.maxEvents=n}getStats(){let n=0,r=0,u=0,m=0;const x={info:0,warning:0,error:0,critical:0},p={auth:0,database:0,network:0,app:0,other:0};for(const f of this.events)switch(f.type){case"error":n++;break;case"connection":r++;break;case"auth":u++;break;case"diagnostic":m++;const c=f;x[c.level]++,p[c.category]++;break}return{totalEvents:this.events.length,errorCount:n,connectionCount:r,authCount:u,diagnosticCount:m,diagnosticsByLevel:x,diagnosticsByCategory:p}}}const _e=new pb;var bb=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});const md="https://eckuozleqbbcecaycmjt.supabase.co",e0="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVja3VvemxlcWJiY2VjYXljbWp0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDM3MjAwNjEsImV4cCI6MjA1OTI5NjA2MX0.S6KFjF2HYIArDSGeSu_iMXjgtaHivPPJdwRs60xB9_U",Z=eb(md,e0,{auth:{autoRefreshToken:!0,persistSession:!0,storageKey:"bulls.auth.token"}}),$e=o=>{console.error("Error de operación Supabase:",o);const n={code:o.code,message:o.message,details:o.details};switch(_e.trackError("Supabase operation error",o,n),o.code){case"PGRST116":console.error("Error de permisos RLS. Verifica las políticas de seguridad.");break;case"42P01":console.error("Error: Tabla no encontrada. Verifica el esquema de la base de datos.");break;case"42501":console.error("Error: Permisos insuficientes para la operación solicitada.");break;case"23505":console.error("Error: Violación de restricción única.");break;case"23503":console.error("Error: Violación de restricción de llave foránea.");break}throw o},vb=()=>bb(void 0,null,function*(){const o=Date.now();try{const{error:n}=yield Z.auth.getSession(),r=Date.now()-o,u=!n;return _e.trackConnection(u?"success":"failure",r,"auth/getSession"),{success:u,details:{auth:{error:n?{message:n.message,code:n.code}:null},environment:{supabaseUrl:md,hasAnonKey:!!e0},responseTime:r,timestamp:new Date().toISOString()}}}catch(n){const r=Date.now()-o,u=n instanceof Error?n.message:"Error desconocido";return _e.trackConnection("failure",r,"auth/getSession"),_e.trackError("Connection check failed",n,{component:"supabaseClient",method:"checkSupabaseConnection"}),{success:!1,details:{error:u,environment:{supabaseUrl:md,hasAnonKey:!0},responseTime:r,timestamp:new Date().toISOString()}}}});var yb=Object.defineProperty,jb=(o,n,r)=>n in o?yb(o,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[n]=r,Gr=(o,n,r)=>jb(o,typeof n!="symbol"?n+"":n,r),Nb=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});class wb{constructor(){Gr(this,"cache",new Map),Gr(this,"defaultExpiry",5*60*1e3),Gr(this,"maxCacheSize",100),Gr(this,"lastCleanup",Date.now()),Gr(this,"cleanupInterval",10*60*1e3)}get(n){const r=this.cache.get(n);return r?Date.now()>r.timestamp+r.expiry?(this.cache.delete(n),null):r.data:null}set(n,r,u=this.defaultExpiry){if(this.checkAndCleanUp(),this.cache.size>=this.maxCacheSize){let m=null,x=1/0;for(const[p,f]of this.cache.entries())f.timestamp<x&&(x=f.timestamp,m=p);m&&this.cache.delete(m)}this.cache.set(n,{data:r,timestamp:Date.now(),expiry:u})}remove(n){this.cache.delete(n)}clear(){this.cache.clear(),this.lastCleanup=Date.now()}cleanExpired(){const n=Date.now();for(const[r,u]of this.cache.entries())n>u.timestamp+u.expiry&&this.cache.delete(r);this.lastCleanup=n}checkAndCleanUp(){Date.now()-this.lastCleanup>this.cleanupInterval&&this.cleanExpired()}getOrFetch(n,r){return Nb(this,arguments,function*(u,m,x=this.defaultExpiry){const p=this.get(u);if(p!==null)return p;try{const f=yield m();return f!=null&&this.set(u,f,x),f}catch(f){throw f}})}setDefaultExpiry(n){this.defaultExpiry=n}setMaxSize(n){if(n<1)throw new Error("El tamaño máximo del caché debe ser al menos 1");this.maxCacheSize=n,this.cache.size>n&&[...this.cache.keys()].slice(0,this.cache.size-n).forEach(u=>this.cache.delete(u))}has(n){const r=this.cache.get(n);return r?Date.now()>r.timestamp+r.expiry?(this.cache.delete(n),!1):!0:!1}getStats(){const n=Date.now();let r=0,u=n,m=0,x=0;for(const p of this.cache.values()){const f=p.timestamp+p.expiry;n<=f&&(r++,x+=n-p.timestamp,p.timestamp<u&&(u=p.timestamp),p.timestamp>m&&(m=p.timestamp))}return{size:this.cache.size,activeItems:r,oldestItem:r?n-u:0,newestItem:r?n-m:0,averageAge:r?x/r:0}}}const Da=new wb;var _b=Object.defineProperty,Sb=(o,n,r)=>n in o?_b(o,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[n]=r,Dt=(o,n,r)=>Sb(o,typeof n!="symbol"?n+"":n,r);class Eb{constructor(){Dt(this,"timeout",30*60*1e3),Dt(this,"warningTime",1*60*1e3),Dt(this,"timer",null),Dt(this,"warningTimer",null),Dt(this,"onInactive",null),Dt(this,"onWarning",null),Dt(this,"events",["mousedown","mousemove","keypress","scroll","touchstart"]),Dt(this,"isEnabled",!1),Dt(this,"lastActivity",Date.now()),Dt(this,"boundResetTimer"),Dt(this,"debounceTimeout",null),Dt(this,"throttleLastCall",0),Dt(this,"throttleDelay",200),this.boundResetTimer=this.resetTimer.bind(this)}initialize(n){this.isEnabled&&this.stop(),this.timeout=n.timeout,this.warningTime=n.warningTime,this.onInactive=n.onInactive,this.onWarning=n.onWarning,n.events&&n.events.length>0&&(this.events=n.events),this.start(),_e.trackEvent({type:Ft.USER_ACTION,name:"inactivity_service_initialized",timestamp:Date.now(),data:{timeout:this.timeout,warningTime:this.warningTime}})}start(){this.isEnabled||(this.isEnabled=!0,this.lastActivity=Date.now(),this.events.forEach(n=>{window.addEventListener(n,this.boundResetTimer,{passive:!0})}),this.resetTimer(),_e.trackEvent({type:Ft.USER_ACTION,name:"inactivity_monitoring_started",timestamp:Date.now()}))}stop(){this.isEnabled&&(this.isEnabled=!1,this.events.forEach(n=>{window.removeEventListener(n,this.boundResetTimer)}),this.clearTimers(),_e.trackEvent({type:Ft.USER_ACTION,name:"inactivity_monitoring_stopped",timestamp:Date.now()}))}clearTimers(){this.timer!==null&&(window.clearTimeout(this.timer),this.timer=null),this.warningTimer!==null&&(window.clearTimeout(this.warningTimer),this.warningTimer=null),this.debounceTimeout!==null&&(window.clearTimeout(this.debounceTimeout),this.debounceTimeout=null)}resetTimer(){const n=Date.now();n-this.throttleLastCall<this.throttleDelay||(this.throttleLastCall=n,this.debounceTimeout!==null&&window.clearTimeout(this.debounceTimeout),this.debounceTimeout=window.setTimeout(()=>this.doResetTimer(),100))}doResetTimer(){if(this.lastActivity=Date.now(),this.timer!==null&&(window.clearTimeout(this.timer),this.timer=null),this.warningTimer!==null&&(window.clearTimeout(this.warningTimer),this.warningTimer=null),this.isEnabled){const n=this.timeout-this.warningTime;n>0&&(this.warningTimer=window.setTimeout(()=>{this.onWarning&&(this.onWarning(),_e.trackEvent({type:Ft.USER_ACTION,name:"inactivity_warning_triggered",timestamp:Date.now(),data:{inactiveTime:Date.now()-this.lastActivity}}))},n)),this.timer=window.setTimeout(()=>{this.onInactive&&(this.onInactive(),_e.trackEvent({type:Ft.USER_ACTION,name:"inactivity_logout_triggered",timestamp:Date.now(),data:{inactiveTime:Date.now()-this.lastActivity}}))},this.timeout)}}getRemainingTime(){const n=Date.now()-this.lastActivity;return Math.max(0,this.timeout-n)}isActive(){return this.isEnabled}extendSession(){this.isEnabled&&(this.lastActivity=Date.now(),this.resetTimer(),_e.trackEvent({type:Ft.USER_ACTION,name:"inactivity_session_extended",timestamp:Date.now()}))}updateConfig(n){const r=this.isEnabled;r&&this.stop(),n.timeout!==void 0&&(this.timeout=n.timeout),n.warningTime!==void 0&&(this.warningTime=n.warningTime),n.onInactive!==void 0&&(this.onInactive=n.onInactive),n.onWarning!==void 0&&(this.onWarning=n.onWarning),n.events!==void 0&&n.events.length>0&&(this.events=n.events),r&&this.start(),_e.trackEvent({type:Ft.USER_ACTION,name:"inactivity_config_updated",timestamp:Date.now(),data:{timeout:this.timeout,warningTime:this.warningTime,isEnabled:this.isEnabled}})}}const Dl=new Eb,Cb=({onContinue:o,onLogout:n})=>{const[r,u]=v.useState(0),[m,x]=v.useState(!1);v.useEffect(()=>{if(!m)return;const h=setInterval(()=>{const w=Dl.getRemainingTime();u(w),w<=0&&(x(!1),n())},1e3);return()=>clearInterval(h)},[m,n]);const p=h=>{const w=Math.floor(h/1e3),j=Math.floor(w/60),C=w%60;return`${j}:${C.toString().padStart(2,"0")}`},f=()=>{u(Dl.getRemainingTime()),x(!0)},c=()=>{x(!1),o()};return yf.useImperativeHandle(yf.createRef(),()=>({showWarning:f})),m?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6 mx-4",children:[t.jsxs("div",{className:"flex items-center mb-4 text-yellow-600",children:[t.jsx(Ve,{className:"h-6 w-6 mr-2"}),t.jsx("h2",{className:"text-lg font-semibold",children:"Sesión a punto de expirar"})]}),t.jsx("p",{className:"text-gray-600 mb-4",children:"Tu sesión está a punto de expirar por inactividad. Serás desconectado automáticamente en:"}),t.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-3 mb-4 flex items-center justify-center",children:[t.jsx(Xr,{className:"h-5 w-5 text-yellow-600 mr-2"}),t.jsx("span",{className:"text-xl font-mono font-semibold text-yellow-700",children:p(r)})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-3",children:[t.jsx("button",{onClick:n,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition-colors",children:"Cerrar sesión ahora"}),t.jsx("button",{onClick:c,className:"px-4 py-2 bg-blue-dark text-white rounded-md hover:bg-blue-900 transition-colors",children:"Continuar sesión"})]})]})}):null};var ss=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});const Ef=5e3,Cf=5*60*1e3,Af=5*60*1e3,t0=v.createContext(void 0),Bt=()=>{const o=v.useContext(t0);if(!o)throw new Error("useAuth debe ser usado dentro de un AuthProvider");return o},Ab=({children:o})=>{const[n,r]=v.useState(null),[u,m]=v.useState(null),[x,p]=v.useState(null),[f,c]=v.useState(!0),[h,w]=v.useState(!1),[j,C]=v.useState(!1),[y,O]=v.useState(!1),_=v.useRef(30*60*1e3),$=v.useRef(1*60*1e3),q=v.useCallback(ae=>ss(void 0,null,function*(){if(!ae)return console.warn("No se proporcionó ID de usuario para obtener perfil"),null;const re=Date.now(),T=`user_profile_${ae}`;try{const H=Da.get(T);if(H)return H;const Q=new Promise((le,W)=>{setTimeout(()=>{W(new Error("Timeout al obtener perfil de usuario"))},1e4)}),U=Z.from("user_profiles").select("*").eq("id",ae).single(),X=yield Promise.race([U,Q]);if(X&&!X.error&&X.data){const le={id:X.data.id,email:X.data.email,firstName:X.data.firstname,lastName:X.data.lastname,role:X.data.role,permissions:X.data.permissions||[],active:X.data.active,createdAt:X.data.fecha_creacion,updatedAt:X.data.fecha_actualizacion};Da.set(T,le,Cf);const W=Date.now()-re;return _e.trackConnection("success",W,"supabase:user_profile"),le}try{const{data:le,error:W}=yield Z.from("user_profiles").select("*").eq("user_id",ae).single();if(!W&&le){const ne={id:le.id,email:le.email,firstName:le.firstname,lastName:le.lastname,role:le.role,permissions:le.permissions||[],active:le.active,createdAt:le.fecha_creacion,updatedAt:le.fecha_actualizacion};return Da.set(T,ne,Cf),ne}}catch(le){console.warn("Error al buscar perfil con user_id:",le)}return _e.trackConnection("failure",Date.now()-re,"supabase:user_profile"),null}catch(H){const Q=Date.now()-re;return console.error("Error al obtener perfil:",H),_e.trackError("Error fetching user profile",H,{userId:ae}),_e.trackConnection("failure",Q,"supabase:user_profile"),null}}),[]),k=v.useCallback(()=>ss(void 0,null,function*(){try{const ae=Z.auth.getSession(),re=new Promise((H,Q)=>{setTimeout(()=>{Q(new Error("Timeout al obtener sesión"))},Ef)});return yield Promise.race([ae,re])}catch(ae){return console.error("Error al obtener sesión:",ae),{data:{session:null},error:ae}}}),[]),V=v.useCallback(()=>ss(void 0,null,function*(){if(!(f&&y))try{c(!0);const{data:ae,error:re}=yield k();if(re){console.warn("Error al obtener sesión:",re),p(null),r(null),m(null);return}if(ae!=null&&ae.session){if(p(ae.session),ae.session.user){if(r(ae.session.user),!u||u.id!==ae.session.user.id){const T=yield q(ae.session.user.id);m(T)}return}}else p(null),r(null),m(null)}catch(ae){console.error("Error al refrescar usuario:",ae),_e.trackError("Error refreshing user",ae)}finally{c(!1)}}),[k,q,u,y,f]);v.useEffect(()=>{y||ss(void 0,null,function*(){var T;try{c(!0),_e.trackEvent({type:Ft.AUTH,name:"initial_session_loading",timestamp:Date.now()});const H=setTimeout(()=>{f&&(c(!1),console.warn("Timeout alcanzado para carga de sesión inicial"),_e.trackEvent({type:Ft.AUTH,name:"initial_session_timeout",timestamp:Date.now()}))},Ef),{data:Q,error:U}=yield k();if(clearTimeout(H),U){console.warn("Error al cargar sesión inicial:",U),_e.trackError("Initial session loading error",U),c(!1),O(!0);return}Q!=null&&Q.session?(p(Q.session),Q.session.user&&(r(Q.session.user),q(Q.session.user.id).then(X=>{X&&m(X),_e.trackEvent({type:Ft.AUTH,name:"user_profile_loaded",timestamp:Date.now(),data:{userId:Q.session.user.id,hasProfile:!!X}})})),_e.trackEvent({type:Ft.AUTH,name:"initial_session_loaded",timestamp:Date.now(),data:{userId:(T=Q.session.user)==null?void 0:T.id}})):console.log("No hay sesión activa")}catch(H){console.error("Error al cargar sesión inicial:",H),_e.trackError("Error al cargar sesión inicial",H)}finally{c(!1),O(!0)}});const{data:{subscription:re}}=Z.auth.onAuthStateChange((T,H)=>ss(void 0,null,function*(){if(T!=="TOKEN_REFRESHED"&&console.log("Auth state changed:",T),T==="SIGNED_IN")p(H),H!=null&&H.user&&(r(H.user),q(H.user.id).then(Q=>{m(Q)}),_e.trackAuth("login",!0,H.user.id,"Auto login via session")),c(!1);else if(T==="SIGNED_OUT"){const Q=n==null?void 0:n.id;p(null),r(null),m(null),Q&&_e.trackAuth("logout",!0,Q,"Auto logout via session"),c(!1)}else T==="TOKEN_REFRESHED"&&H&&p(H)}));return()=>{re.unsubscribe()}},[q,k,n,y]);const F=v.useCallback((ae,re)=>ss(void 0,null,function*(){var T,H,Q,U,X,le,W;try{c(!0),console.log("Iniciando login con:",ae);let ne=0;const oe=1;let ge,xe;for(;ne<=oe;)try{console.log(`Intento de autenticación ${ne+1}/${oe+1}`);const je=Z.auth.signInWithPassword({email:ae,password:re}),me=new Promise((st,lt)=>{setTimeout(()=>{lt(new Error("Timeout al intentar autenticar"))},1e4)}),pe=yield Promise.race([je,me]);if(pe.error){if(xe=pe.error,!((T=xe.message)!=null&&T.includes("timeout"))&&!((H=xe.message)!=null&&H.includes("fetch")))break;ne++,ne<=oe&&(yield new Promise(st=>setTimeout(st,1e3)))}else{ge=pe.data;break}}catch(je){if(xe=je,(Q=je.message)!=null&&Q.includes("timeout")||(U=je.message)!=null&&U.includes("fetch"))ne++,ne<=oe&&(yield new Promise(me=>setTimeout(me,1e3)));else break}return xe?(console.error("Error de autenticación:",xe),(X=xe.message)!=null&&X.includes("Invalid login credentials")?{success:!1,message:"Credenciales inválidas. Por favor verifica tu correo electrónico y contraseña."}:(le=xe.message)!=null&&le.includes("timeout")||(W=xe.message)!=null&&W.includes("fetch")?{success:!1,message:"Timeout al intentar conectar con el servidor. Por favor intenta de nuevo."}:{success:!1,message:xe.message||"Error de autenticación"}):!ge||!ge.session||!ge.user?{success:!1,message:"Error al iniciar sesión. No se recibieron datos válidos."}:(console.log("Login exitoso"),_e.trackAuth("login",!0,ge.user.id),p(ge.session),r(ge.user),q(ge.user.id).then(je=>{m(je)}),{success:!0,message:"Login exitoso"})}catch(ne){return console.error("Error inesperado en login:",ne),{success:!1,message:"Error inesperado durante el login. Por favor intenta de nuevo."}}finally{c(!1)}}),[q]),E=v.useCallback(()=>ss(void 0,null,function*(){const ae=n==null?void 0:n.id;try{c(!0),p(null),r(null),m(null);const{error:re}=yield Z.auth.signOut();re&&(console.error("Error al cerrar sesión:",re),_e.trackError("Error al cerrar sesión",re,{userId:ae})),ae&&Da.remove(`user_profile_${ae}`);try{localStorage.removeItem("bulls.auth.token"),sessionStorage.removeItem("bulls.auth.token"),localStorage.removeItem("supabase.auth.token"),sessionStorage.removeItem("supabase.auth.token")}catch(T){console.error("Error al limpiar tokens:",T)}_e.trackAuth("logout",!0,ae)}catch(re){console.error("Error inesperado al cerrar sesión:",re),_e.trackError("Error inesperado al cerrar sesión",re,{userId:ae})}finally{c(!1)}}),[n]),S=v.useCallback(()=>ss(void 0,null,function*(){var ae,re;const T="access_token";try{const H=Da.get(T);if(H)return H;if(x!=null&&x.access_token)return Da.set(T,x.access_token,Af),x.access_token;const Q=Z.auth.getSession(),U=new Promise((le,W)=>{setTimeout(()=>{W(new Error("Timeout al obtener token"))},5e3)}),X=yield Promise.race([Q,U]);if(X&&((re=(ae=X.data)==null?void 0:ae.session)!=null&&re.access_token)){const le=X.data.session.access_token;return Da.set(T,le,Af),le}return null}catch(H){return console.error("Error al obtener token de acceso:",H),null}}),[x]),D=v.useCallback(()=>{!j||!n||Dl.initialize({timeout:_.current,warningTime:$.current,onInactive:()=>{E()},onWarning:()=>{w(!0)}})},[j,n,E]),z=v.useCallback(()=>{Dl.stop(),w(!1)},[]),N=v.useCallback(()=>{w(!1),Dl.resetTimer()},[]),M=v.useCallback((ae,re=6e4)=>{_.current=ae,$.current=re,j&&n&&Dl.updateConfig({timeout:ae,warningTime:re,onInactive:()=>{E()},onWarning:()=>{w(!0)}})},[j,n,E]),K=v.useCallback(ae=>{C(ae),ae&&n?D():z()},[n,D,z]),G=!!x&&!!n;v.useEffect(()=>(G&&j?D():z(),()=>{z()}),[G,j,D,z]);const J={user:n,profile:u,session:x,isAuthenticated:G,isLoading:f,login:F,logout:E,refreshUser:V,getAccessToken:S,inactivityEnabled:j,toggleInactivityMonitoring:K,setInactivityTimeout:M,inactivityTimeoutRef:_.current,inactivityWarningRef:$.current};return t.jsxs(t0.Provider,{value:J,children:[o,h&&t.jsx(Cb,{onContinue:N,onLogout:E})]})};var Db=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});const Df=["bg-blue-500","bg-green-500","bg-yellow-500","bg-red-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-teal-500"],Ob={online:"bg-green-500",offline:"bg-gray-400",away:"bg-yellow-500"},da=({avatarUrl:o,userName:n,firstName:r,lastName:u,userId:m,userStatus:x,fallbackBgColor:p,onProfileClick:f,onSettingsClick:c,onLogoutClick:h,className:w="",style:j})=>{var C,y,O,_,$,q;const[k,V]=v.useState(!1),F=v.useRef(null),E=v.useRef(null),S=ke(),{user:D,logout:z}=Bt(),N=((C=D==null?void 0:D.user_metadata)==null?void 0:C.firstName)||((y=D==null?void 0:D.user_metadata)==null?void 0:y.first_name)||"",M=((O=D==null?void 0:D.user_metadata)==null?void 0:O.lastName)||((_=D==null?void 0:D.user_metadata)==null?void 0:_.last_name)||"",K=N&&M?`${N} ${M}`:"",J=(r&&u?`${r} ${u}`:"")||K||n||(($=D==null?void 0:D.user_metadata)==null?void 0:$.username)||(D==null?void 0:D.email)||"Usuario",ae=((q=D==null?void 0:D.user_metadata)==null?void 0:q.role)||"",re=()=>{var W,ne;if(r&&u)return`${r.charAt(0)}${u.charAt(0)}`.toUpperCase();if(N&&M)return`${N.charAt(0)}${M.charAt(0)}`.toUpperCase();if(n){const oe=n.split(" ");return oe.length>=2?`${oe[0].charAt(0)}${oe[1].charAt(0)}`.toUpperCase():n.substring(0,2).toUpperCase()}if((W=D==null?void 0:D.user_metadata)!=null&&W.full_name){const oe=D.user_metadata.full_name.split(" ");return oe.length>=2?`${oe[0].charAt(0)}${oe[1].charAt(0)}`.toUpperCase():D.user_metadata.full_name.substring(0,2).toUpperCase()}if((ne=D==null?void 0:D.user_metadata)!=null&&ne.role){const oe=D.user_metadata.role;return oe==="Estudiante"?"ES":oe==="Psicologo"?"PS":oe==="Administrador"?"AD":oe.substring(0,2).toUpperCase()}return D!=null&&D.email?D.email.substring(0,2).toUpperCase():"US"},T=()=>{if(p)return p;if(m){const W=m.split("").reduce((ne,oe)=>ne+oe.charCodeAt(0),0)%Df.length;return Df[W]}return"bg-indigo-500"},H=()=>{V(!k)},Q=()=>{f?f():S("/admin/profile"),V(!1)},U=()=>{c&&c(),V(!1)},X=()=>{V(!1),S("/link-identity")},le=()=>Db(void 0,null,function*(){try{V(!1),h&&h(),yield z(),console.log("Sesión cerrada exitosamente"),S("/login"),setTimeout(()=>{window.location.href="/login"},100)}catch(W){console.error("Error al cerrar sesión:",W)}});return v.useEffect(()=>{const W=ne=>{k&&F.current&&E.current&&!F.current.contains(ne.target)&&!E.current.contains(ne.target)&&V(!1)};return document.addEventListener("mousedown",W),()=>{document.removeEventListener("mousedown",W)}},[k]),t.jsxs("div",{className:`relative ${w}`,style:j,children:[t.jsxs("button",{ref:F,className:"flex items-center justify-center w-10 h-10 rounded-full overflow-hidden focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-all hover:shadow-md",onClick:H,"aria-haspopup":"true","aria-expanded":k,"aria-controls":"user-profile-menu","aria-label":`Perfil de ${J}`,children:[o?t.jsx("img",{src:o,alt:`Perfil de ${J}`,className:"w-full h-full object-cover",onError:W=>{W.currentTarget.style.display="none",W.currentTarget.nextElementSibling.style.display="flex"}}):t.jsx("div",{className:`w-full h-full flex items-center justify-center text-white ${T()}`,"aria-label":`Perfil de ${J}`,children:t.jsx("span",{className:"text-sm font-medium",children:re()})}),x&&t.jsx("span",{className:`absolute bottom-0 right-0 w-3 h-3 rounded-full border-2 border-white ${Ob[x]}`,"aria-label":`Estado: ${x}`})]}),k&&t.jsxs("div",{id:"user-profile-menu",ref:E,className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10 border border-gray-200",role:"menu",children:[t.jsxs("div",{className:"px-4 py-2 border-b border-gray-100",children:[t.jsx("p",{className:"text-sm font-medium text-gray-700",children:J}),(D==null?void 0:D.email)&&t.jsx("p",{className:"text-xs text-gray-500 truncate",children:D.email}),ae&&t.jsxs("p",{className:"text-xs font-semibold text-blue-800 mt-1",children:["Rol: ",ae]})]}),t.jsx("button",{className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100",onClick:Q,role:"menuitem",children:"Ver Perfil"}),t.jsx("button",{className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100",onClick:U,role:"menuitem",children:"Configuración"}),t.jsx("button",{className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100",onClick:X,role:"menuitem",children:"Vincular Identidades"}),t.jsx("div",{className:"border-t border-gray-100"}),t.jsx("button",{className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 focus:outline-none focus:bg-red-50",onClick:le,role:"menuitem",children:"Cerrar Sesión"})]})]})},Tl=[{id:"home",label:"Inicio",icon:Ap,path:"/"},{id:"dashboards",label:"Dashboards",icon:Ir,subItems:[{id:"bulls-dashboard",label:"Dashboard BULL-S",path:"/admin/bulls-dashboard",icon:Ir},{id:"dashboard-general",label:"Dashboard General",path:"/admin/dashboard-general",icon:Ir},{id:"dashboard-convivencia",label:"Convivencia Escolar",path:"/admin/dashboard-convivencia",icon:Ut},{id:"dashboard-grupos",label:"Dashboards por Grupo",path:"/admin/dashboards-por-grupo",icon:ns}],expanded:!0},{id:"students",label:"Estudiantes",icon:Oa,subItems:[{id:"students-list",label:"Listado",path:"/admin/estudiantes",icon:ve},{id:"students-groups",label:"Grupos",path:"/admin/estudiantes/grupos",icon:Ci}]},{id:"reports",label:"Informes",icon:ma,path:"/admin/reports"},{id:"admin",label:"Administración",icon:Ai,subItems:[{id:"admin-institutions",label:"Instituciones",path:"/admin/instituciones",icon:Oa},{id:"admin-users",label:"Usuarios",path:"/admin/usuarios",icon:ve},{id:"admin-roles",label:"Roles y Permisos",path:"/admin/roles-permisos",icon:Ut}]},{id:"settings",label:"Configuración",icon:pf,subItems:[{id:"settings-system",label:"Sistema",path:"/admin/configuracion/sistema",icon:pf},{id:"settings-profile",label:"Mi Perfil",path:"/admin/configuracion/perfil",icon:mt},{id:"settings-diagnostics",label:"Diagnóstico",path:"/admin/diagnostics/supabase",icon:Dp}]},{id:"divider-1",isDivider:!0,isBottom:!0},{id:"help",label:"Ayuda y Soporte",icon:Yr,isBottom:!0},{id:"logout",label:"Cerrar Sesión",icon:Lx,isBottom:!0}],Tb=Tl.filter(o=>!o.isBottom&&!o.isDivider).map(o=>o.id);var Mb=Object.defineProperty,Rb=Object.defineProperties,zb=Object.getOwnPropertyDescriptors,Of=Object.getOwnPropertySymbols,kb=Object.prototype.hasOwnProperty,Ub=Object.prototype.propertyIsEnumerable,Tf=(o,n,r)=>n in o?Mb(o,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[n]=r,Mf=(o,n)=>{for(var r in n||(n={}))kb.call(n,r)&&Tf(o,r,n[r]);if(Of)for(var r of Of(n))Ub.call(n,r)&&Tf(o,r,n[r]);return o},$b=(o,n)=>Rb(o,zb(n)),hd=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});const vd=(o,n,r)=>n&&(o===n||o.startsWith(`${n}/`))?!0:r?r.some(u=>vd(o,u.path,u.subItems)):!1,Rf=({items:o,isCollapsed:n,expandedMenus:r,toggleMenu:u,favorites:m,toggleFavorite:x,isFavorite:p,locationPathname:f,isMobile:c=!1,onLinkClick:h,onHelpClick:w,onLogoutClick:j})=>{const C=(_,$=0)=>{var q;if(_.isDivider)return t.jsx("hr",{className:"my-2 border-blue-600"},_.id);const k=vd(f,_.path,_.subItems),V=(q=r[_.id])!=null?q:!1,F=Ms("group flex items-center px-2 py-2 text-sm font-medium rounded-md w-full cursor-pointer",{"bg-blue-900 text-white":k&&!_.subItems,"text-blue-100 hover:bg-blue-700 hover:text-white":!k,"pl-6":$===1,"pl-10":$>1,"justify-center":n&&$===0},c&&"text-base"),E=()=>{_.id==="help"?(w(),h&&h()):_.id==="logout"?j():_.subItems?u(_.id):_.path&&h&&h()},S=t.jsxs(t.Fragment,{children:[t.jsx(_.icon,{className:Ms("h-6 w-6",$===0&&!n&&"mr-3",$>0&&"mr-3 h-5 w-5",n&&$===0&&"mx-auto",k?"text-white":"text-blue-300 group-hover:text-blue-100"),"aria-hidden":"true"}),!n&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"flex-1 text-left",children:_.label}),_.subItems&&(V?t.jsx(Bl,{className:"h-5 w-5"}):t.jsx(Vx,{className:"h-5 w-5"}))]})]}),D=_.path&&!_.subItems?t.jsx(Fp,{to:_.path,onClick:E,className:({isActive:M})=>Ms(F,{"bg-blue-900 text-white":M}),"aria-current":k?"page":void 0,title:n?_.label:void 0,children:S}):t.jsx("button",{type:"button",onClick:E,className:Ms(F,{"bg-blue-700 text-white":k&&!!_.subItems}),"aria-expanded":_.subItems?V:void 0,title:n?_.label:void 0,children:S});if(!(Tb.includes(_.id)&&!n))return t.jsx("div",{className:"relative",children:D},_.id);const N=t.jsx("div",{className:"relative group",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-grow",children:D}),t.jsx("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 z-10",children:t.jsx("button",{onClick:M=>{M.stopPropagation(),x(_.id)},className:"text-blue-300 hover:text-yellow-300 p-1 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",title:p(_.id)?"Quitar de favoritos":"Añadir a favoritos","aria-label":p(_.id)?"Quitar de favoritos":"Añadir a favoritos",tabIndex:0,children:t.jsx(Mp,{className:"h-4 w-4",fill:p(_.id)?"currentColor":"none",color:p(_.id)?"#FBBF24":"currentColor"})})})]})},_.id);return t.jsxs("div",{children:[N,_.subItems&&V&&!n&&t.jsx("div",{className:"mt-1 space-y-1",children:_.subItems.map(M=>C(M,$+1))})]},_.id)},y=o.filter(_=>!_.isBottom),O=o.filter(_=>_.isBottom);return t.jsxs("nav",{className:"flex flex-col h-full",children:[!n&&m.length>0&&t.jsxs("div",{className:"mt-4 px-3",children:[t.jsx("h3",{className:"px-1 text-xs font-semibold text-blue-200 uppercase tracking-wider",children:"Favoritos"}),t.jsx("div",{className:"mt-1 space-y-1",children:m.map(_=>{var $;const q=Tl.find(F=>F.id===_);let k;q||Tl.forEach(F=>{if(F.subItems){const E=F.subItems.find(S=>S.id===_);E&&(k=E)}});const V=q||k;return V&&V.path?t.jsxs(Be,{to:V.path,onClick:h,className:"group flex items-center px-2 py-2 text-sm font-medium rounded-md text-blue-100 hover:bg-blue-700",title:V.label,children:[t.jsx(V.icon,{className:"mr-3 h-5 w-5 text-blue-300"}),t.jsx("span",{children:V.label})]},`fav-${V.id}`):V&&!V.path&&V.subItems&&(($=V.subItems[0])!=null&&$.path)?t.jsxs(Be,{to:V.subItems[0].path,onClick:h,className:"group flex items-center px-2 py-2 text-sm font-medium rounded-md text-blue-100 hover:bg-blue-700",title:V.label,children:[t.jsx(V.icon,{className:"mr-3 h-5 w-5 text-blue-300"}),t.jsx("span",{children:V.label})]},`fav-${V.id}`):null})})]}),t.jsx("div",{className:"mt-5 flex-1 px-2 space-y-1",children:y.map(_=>C(_))}),t.jsx("div",{className:"px-2 space-y-1 mt-auto pb-2",children:O.map(_=>C(_))})]})},Bb=({isVisible:o,onClose:n})=>{const[r,u]=v.useState(null),[m,x]=v.useState(!1),p=()=>hd(void 0,null,function*(){x(!0);try{const f=yield vb();u(f),_e.trackDiagnostic("auth",f.success?"info":"warning","connection_check",f.details)}catch(f){u({success:!1,details:{error:f instanceof Error?f.message:"Error desconocido"}}),_e.trackError("Error al verificar conexión",f,{component:"AuthDiagnostics"})}finally{x(!1)}});return v.useEffect(()=>{o&&p()},[o]),o?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[80vh] overflow-auto",children:[t.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[t.jsx("h2",{className:"text-lg font-semibold",children:"Diagnóstico de Autenticación"}),t.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-700",children:t.jsx(ha,{size:20})})]}),t.jsxs("div",{className:"p-4",children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("h3",{className:"font-medium mb-2",children:"Estado de conexión a Supabase"}),m?t.jsx("p",{children:"Verificando conexión..."}):r?t.jsxs("div",{children:[t.jsx("div",{className:`p-2 rounded mb-2 ${r.success?"bg-green-100":"bg-red-100"}`,children:t.jsx("p",{className:"font-medium",children:r.success?"Conexión establecida correctamente":"Problema de conexión detectado"})}),t.jsxs("div",{className:"mt-4",children:[t.jsx("h4",{className:"font-medium mb-1",children:"Detalles:"}),t.jsx("pre",{className:"bg-gray-100 p-2 rounded text-xs overflow-auto max-h-40",children:JSON.stringify(r.details,null,2)})]}),t.jsx("button",{onClick:p,className:"mt-4 px-3 py-1 bg-blue-800 text-white rounded hover:bg-blue-700 text-sm",disabled:m,children:"Verificar nuevamente"})]}):t.jsx("p",{children:"No hay información disponible"})]}),t.jsxs("div",{className:"mt-6",children:[t.jsx("h3",{className:"font-medium mb-2",children:"Recomendaciones"}),t.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-sm",children:[t.jsx("li",{children:"Verifica que las variables de entorno VITE_SUPABASE_URL y VITE_SUPABASE_ANON_KEY estén configuradas correctamente"}),t.jsx("li",{children:"Asegúrate de que exista un perfil en la tabla user_profiles para tu usuario"}),t.jsx("li",{children:"Verifica que las políticas RLS permitan acceder a los datos necesarios"}),t.jsx("li",{children:"Comprueba que la sesión no haya expirado"})]})]})]})]})}):null},qb=({children:o,title:n})=>{const r=pd(),u=ke(),{user:m,profile:x,logout:p,session:f}=Bt(),[c,h]=v.useState(!1),[w,j]=v.useState("checking"),[C,y]=v.useState(null);v.useEffect(()=>{hd(void 0,null,function*(){try{f?(j("authenticated"),_e.trackDiagnostic("auth","info","session_valid",{userId:m==null?void 0:m.id,hasProfile:!!x})):(j("unauthenticated"),y("No hay sesión activa"),_e.trackDiagnostic("auth","warning","no_session",{}),u("/auth/login"))}catch(ne){j("unauthenticated"),y(ne instanceof Error?ne.message:"Error desconocido"),_e.trackError("Error de verificación de autenticación",ne,{component:"AdminLayout"})}})},[f,m,x,u]);const[O,_]=v.useState(!1),[$,q]=v.useState(!1),[k,V]=v.useState(()=>{const W={};return Tl.forEach(ne=>{ne.subItems&&vd(r.pathname,void 0,ne.subItems)?W[ne.id]=!0:W[ne.id]=!1}),W}),[F,E]=v.useState("Panel de Administración"),[S,D]=v.useState(!1),[z,N]=v.useState(()=>{try{const W=localStorage.getItem("sidebarFavorites");if(W){const ne=JSON.parse(W);if(Array.isArray(ne))return ne}return["dashboards","students"]}catch(W){return console.error("Error loading favorites from localStorage:",W),["dashboards","students"]}}),[M,K]=v.useState([{id:"1",message:"Bienvenido al sistema BULL-S",read:!1,type:"info"},{id:"2",message:"Nuevos datos disponibles para análisis",read:!1,type:"update"}]);v.useEffect(()=>{const W="BULL-S | Panel de Administración";document.title=n||W,E(n||W)},[n]),v.useEffect(()=>{O&&_(!1)},[r.pathname,O]),v.useEffect(()=>{try{localStorage.setItem("sidebarFavorites",JSON.stringify(z))}catch(W){console.error("Error saving favorites to localStorage:",W)}},[z]);const G=v.useCallback(W=>{V(ne=>$b(Mf({},ne),{[W]:!ne[W]}))},[]),J=v.useCallback(()=>{q(W=>!W),$||V(W=>{const ne=Mf({},W);return Object.keys(ne).forEach(oe=>{ne[oe]=!1}),ne})},[$]),ae=v.useCallback(W=>{N(ne=>{const oe=ne.includes(W)?ne.filter(ge=>ge!==W):[...ne,W];try{localStorage.setItem("sidebarFavorites",JSON.stringify(oe))}catch(ge){console.error("Error al guardar favoritos:",ge)}return oe})},[]),re=v.useCallback(W=>z.includes(W),[z]),T=v.useCallback(()=>hd(void 0,null,function*(){try{_e.trackDiagnostic("auth","info","logout_attempt",{userId:m==null?void 0:m.id}),yield p(),_e.trackDiagnostic("auth","info","logout_success",{userId:m==null?void 0:m.id}),u("/auth/login")}catch(W){console.error("Error al cerrar sesión:",W),_e.trackError("Error al cerrar sesión",W,{userId:m==null?void 0:m.id}),u("/auth/login")}}),[p,u,m]),H=v.useCallback(()=>{D(!0)},[]),Q=v.useCallback(()=>{D(!1)},[]),U=v.useCallback(()=>{h(!0)},[]),X=v.useCallback(()=>{h(!1)},[]),le=M.filter(W=>!W.read).length;return t.jsxs("div",{className:"h-screen flex overflow-hidden bg-gray-100",children:[O&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 z-30 lg:hidden",onClick:()=>_(!1),"aria-hidden":"true"}),t.jsxs("div",{className:Ms("fixed inset-y-0 left-0 flex flex-col z-40 w-64 bg-blue-dark text-white transition-transform duration-300 ease-in-out transform lg:hidden",O?"translate-x-0":"-translate-x-full"),role:"dialog","aria-modal":"true",children:[t.jsx("div",{className:"absolute top-0 right-0 -mr-12 pt-2",children:t.jsxs("button",{type:"button",className:"ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:()=>_(!1),children:[t.jsx("span",{className:"sr-only",children:"Cerrar sidebar"}),t.jsx(ha,{className:"h-6 w-6 text-white"})]})}),t.jsx("div",{className:"flex items-center justify-between flex-shrink-0 px-4 h-16 border-b border-blue-dark",children:t.jsx(Be,{to:"/admin",className:"flex items-center",onClick:()=>_(!1),children:t.jsx("span",{className:"text-white text-xl font-bold",children:"BULL-S"})})}),t.jsx("div",{className:"flex-1 overflow-y-auto pt-5 pb-4",children:t.jsx(Rf,{items:Tl,isCollapsed:!1,expandedMenus:k,toggleMenu:G,favorites:z,toggleFavorite:ae,isFavorite:re,locationPathname:r.pathname,isMobile:!0,onLinkClick:()=>_(!1),onHelpClick:H,onLogoutClick:T})}),t.jsx("div",{className:"flex-shrink-0 flex border-t border-blue-700 p-4",children:m&&t.jsx("div",{className:"flex-shrink-0 w-full group block",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(da,{userName:`${m.firstName} ${m.lastName}`,userStatus:"online",fallbackBgColor:"bg-blue-600",size:"sm"}),t.jsxs("div",{className:"ml-3",children:[t.jsxs("p",{className:"text-sm font-medium text-white",children:[m.firstName," ",m.lastName]}),t.jsx("p",{className:"text-xs font-medium text-blue-200 group-hover:text-blue-100",children:m.role})]})]})})})]}),t.jsx("div",{className:"hidden lg:flex lg:flex-shrink-0",children:t.jsxs("div",{className:Ms("flex flex-col bg-blue-dark text-white transition-width duration-300 ease-in-out",$?"w-20":"w-64"),children:[t.jsxs("div",{className:"flex items-center justify-between flex-shrink-0 px-4 h-16 border-b border-blue-dark",children:[t.jsx(Be,{to:"/admin",className:"flex items-center overflow-hidden",children:!$&&t.jsx("span",{className:"text-white text-xl font-bold truncate",children:"BULL-S"})}),t.jsxs("button",{onClick:J,className:"text-white hover:bg-blue-900 rounded-md p-1 focus:outline-none focus:ring-2 focus:ring-white",title:$?"Expandir menú":"Colapsar menú",children:[t.jsx("span",{className:"sr-only",children:$?"Expandir menú":"Colapsar menú"}),$?t.jsx(Op,{className:"h-5 w-5"}):t.jsx(Tp,{className:"h-5 w-5"})]})]}),t.jsx("div",{className:"flex-1 flex flex-col overflow-y-auto",children:t.jsx(Rf,{items:Tl,isCollapsed:$,expandedMenus:k,toggleMenu:G,favorites:z,toggleFavorite:ae,isFavorite:re,locationPathname:r.pathname,onHelpClick:H,onLogoutClick:T,onLinkClick:()=>{}})}),t.jsx("div",{className:"flex-shrink-0 flex border-t border-blue-dark p-4",children:m&&t.jsxs("div",{className:Ms("flex items-center w-full group",$&&"justify-center"),children:[t.jsx(da,{userName:`${m.firstName} ${m.lastName}`,userStatus:"online",fallbackBgColor:"bg-blue-dark",size:"sm"}),!$&&t.jsxs("div",{className:"ml-3 truncate",children:[t.jsxs("p",{className:"text-sm font-medium text-white truncate",children:[m.firstName," ",m.lastName]}),t.jsx("p",{className:"text-xs font-medium text-blue-100 group-hover:text-white truncate",children:m.role})]})]})})]})}),t.jsxs("div",{className:"flex flex-col w-0 flex-1 overflow-hidden",children:[t.jsxs("div",{className:"relative z-10 flex-shrink-0 flex h-16 bg-white shadow",children:[t.jsxs("button",{type:"button",className:"px-4 border-r border-gray-200 text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500 lg:hidden",onClick:()=>_(!0),children:[t.jsx("span",{className:"sr-only",children:"Abrir sidebar"}),t.jsx(Px,{className:"h-6 w-6"})]}),t.jsxs("div",{className:"flex-1 px-4 flex justify-between items-center",children:[t.jsx("h1",{className:"text-xl md:text-2xl font-semibold text-gray-800 truncate",children:F}),t.jsxs("div",{className:"ml-4 flex items-center md:ml-6 space-x-4",children:[t.jsxs("button",{onClick:U,className:"px-3 py-1 bg-blue-800 text-white rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 mr-2","aria-label":"Diagnóstico",children:[t.jsx(Zt,{className:"h-4 w-4 inline-block mr-1"}),t.jsx("span",{children:"Diagnóstico"})]}),t.jsxs("button",{onClick:T,className:"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500","aria-label":"Cerrar sesión",children:[t.jsx(Lx,{className:"h-4 w-4 inline-block mr-1"}),t.jsx("span",{children:"Cerrar Sesión"})]}),t.jsx("div",{className:"relative",children:t.jsxs("button",{className:"p-1 rounded-full text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500","aria-label":"Ver notificaciones",children:[t.jsx(Di,{className:"h-6 w-6"}),le>0&&t.jsx("span",{className:"absolute top-0 right-0 block h-2 w-2 rounded-full bg-red-500 ring-2 ring-white","aria-hidden":"true"}),le>0&&t.jsxs("span",{className:"sr-only",children:[le," notificaciones no leídas"]})]})}),m&&t.jsx(da,{userName:`${m.firstName} ${m.lastName}`,userStatus:"online",onProfileClick:()=>u("/admin/user-profile"),onLogoutClick:T,showDropdown:!0})]})]})]}),t.jsx("main",{className:"flex-1 relative overflow-y-auto focus:outline-none bg-gray-50",children:t.jsx("div",{className:"py-6 px-4 sm:px-6 lg:px-8",children:o||t.jsx(bd,{})})})]}),S&&t.jsx("div",{className:"fixed inset-0 overflow-y-auto z-50",children:t.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[t.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",onClick:Q,children:t.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),t.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),t.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline",children:[t.jsxs("div",{children:[t.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-blue-100",children:t.jsx(Yr,{className:"h-6 w-6 text-blue-600","aria-hidden":"true"})}),t.jsxs("div",{className:"mt-3 text-center sm:mt-5",children:[t.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline",children:"Ayuda y Soporte"}),t.jsxs("div",{className:"mt-4 text-left text-sm text-gray-600 space-y-4",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-800",children:"Dashboards Disponibles"}),t.jsx("p",{children:"El sistema BULL-S ofrece diferentes tipos de dashboards para análisis:"}),t.jsxs("ul",{className:"mt-1 list-disc pl-5",children:[t.jsx("li",{children:"Dashboard General: Visión general del grupo"}),t.jsx("li",{children:"Dashboard de Bullying: Análisis de situaciones de bullying"}),t.jsx("li",{children:"Dashboard Académico: Rendimiento académico"}),t.jsx("li",{children:"Dashboard Social: Relaciones sociales entre estudiantes"})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-800",children:"Exportación de Informes"}),t.jsx("p",{children:"Cada dashboard dispone de una opción para exportar los datos como PDF."})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-800",children:"Soporte Técnico"}),t.jsxs("p",{children:["Para consultas técnicas o problemas, contáctenos en: ",t.jsx("a",{href:"mailto:soporte@bulls.com",className:"text-blue-600 hover:underline",children:"soporte@bulls.com"})]})]})]})]})]}),t.jsx("div",{className:"mt-5 sm:mt-6",children:t.jsx("button",{type:"button",className:"inline-flex justify-center w-full rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:text-sm",onClick:Q,children:"Entendido"})})]})]})}),t.jsx(Bb,{isVisible:c,onClose:X}),C&&t.jsx("button",{onClick:U,className:"fixed bottom-4 right-4 bg-red-600 text-white p-2 rounded-full shadow-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 z-50",title:"Diagnóstico de autenticación",children:t.jsx(Zt,{size:24})})]})};var Gb=Object.defineProperty,Lb=Object.defineProperties,Pb=Object.getOwnPropertyDescriptors,zf=Object.getOwnPropertySymbols,Vb=Object.prototype.hasOwnProperty,Hb=Object.prototype.propertyIsEnumerable,kf=(o,n,r)=>n in o?Gb(o,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[n]=r,Ib=(o,n)=>{for(var r in n||(n={}))Vb.call(n,r)&&kf(o,r,n[r]);if(zf)for(var r of zf(n))Hb.call(n,r)&&kf(o,r,n[r]);return o},Yb=(o,n)=>Lb(o,Pb(n)),Lr=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});const a0={create:o=>Lr(void 0,null,function*(){try{const{data:n,error:r}=yield Z.from("instituciones_educativas").insert(o).select().single();if(r)throw $e(r);if(!n)throw new Error("No se pudo crear la institución");return n}catch(n){throw console.error("Error al crear institución:",n),n}}),getAll:()=>Lr(void 0,null,function*(){const{data:o,error:n}=yield Z.from("instituciones_educativas").select("*").order("nombre");if(n)throw $e(n);return o||[]}),getById:o=>Lr(void 0,null,function*(){const{data:n,error:r}=yield Z.from("instituciones_educativas").select("*").eq("id",o).single();if(r){if(r.code==="PGRST116")return null;throw $e(r)}return n}),update:(o,n)=>Lr(void 0,null,function*(){const{data:r,error:u}=yield Z.from("instituciones_educativas").update(Yb(Ib({},n),{fecha_actualizacion:new Date().toISOString()})).eq("id",o).select().single();if(u)throw $e(u);if(!r)throw new Error("No se pudo actualizar la institución");return r}),delete:o=>Lr(void 0,null,function*(){const{error:n}=yield Z.from("instituciones_educativas").delete().eq("id",o);if(n)throw $e(n)})};var Qb=Object.defineProperty,Xb=Object.defineProperties,Fb=Object.getOwnPropertyDescriptors,Uf=Object.getOwnPropertySymbols,Zb=Object.prototype.hasOwnProperty,Kb=Object.prototype.propertyIsEnumerable,$f=(o,n,r)=>n in o?Qb(o,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[n]=r,Jb=(o,n)=>{for(var r in n||(n={}))Zb.call(n,r)&&$f(o,r,n[r]);if(Uf)for(var r of Uf(n))Kb.call(n,r)&&$f(o,r,n[r]);return o},Wb=(o,n)=>Xb(o,Fb(n)),As=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});const yd={create:o=>As(void 0,null,function*(){const{data:n,error:r}=yield Z.from("estudiantes").insert(o).select().single();return r?$e(r):n}),getByInstitution:o=>As(void 0,null,function*(){const{data:n,error:r}=yield Z.from("estudiantes").select("*").eq("institucion_id",o).order("nombre_estudiante");return r?$e(r):n}),getByGroup:o=>As(void 0,null,function*(){var n;try{console.log(`[studentsApi] Fetching students for group ID: ${o}`);let{data:r,error:u}=yield Z.from("estudiantes").select("*").eq("grado",o).order("nombre_estudiante");if(u&&u.message&&u.message.includes("406")){console.error("[studentsApi] 406 Not Acceptable error in getByGroup:",u.message);const m=yield Z.from("estudiantes").select();!m.error&&m.data?(r=m.data.filter(x=>x.grado===o),u=null,console.log(`[studentsApi] Alternative query succeeded, found ${r.length} students`)):console.error("[studentsApi] Alternative query also failed:",m.error)}if(!u&&(!r||r.length===0)||u&&!((n=u.message)!=null&&n.includes("406"))){console.log("[studentsApi] No students found by group ID, trying by group name");const m=yield Z.from("grupos").select("nombre").eq("id",o);if(!m.error&&m.data&&m.data.length>0){const x=m.data[0];console.log(`[studentsApi] Found group name: ${x.nombre}, searching students by this name`);const p=yield Z.from("estudiantes").select("*").eq("grado",x.nombre).order("nombre_estudiante");r=p.data||[],u=p.error,u?console.error("[studentsApi] Error fetching students by group name:",u):console.log(`[studentsApi] Found ${r.length} students by group name`)}else console.error("[studentsApi] Error or no data when fetching group:",m.error)}return u?(console.error("[studentsApi] Final error in getByGroup:",u),$e(u)):(console.log(`[studentsApi] Successfully fetched ${(r==null?void 0:r.length)||0} students for group ${o}`),r||[])}catch(r){throw console.error("[studentsApi] Unexpected error in getByGroup:",r),r}}),getById:o=>As(void 0,null,function*(){try{console.log(`[studentsApi] Fetching student with ID: ${o}`);const{data:n,error:r}=yield Z.from("estudiantes").select("*").eq("id",o).single();if(r){if(console.error(`[studentsApi] Error fetching student with ID ${o}:`,r),r.code==="PGRST116")return console.warn(`[studentsApi] Student with ID ${o} not found`),null;if(r.message&&r.message.includes("406")){console.error("[studentsApi] 406 Not Acceptable error - Headers issue:",r.message);const{data:u,error:m}=yield Z.from("estudiantes").select("*").eq("id",o);return m?(console.error("[studentsApi] Alternative query also failed:",m),$e(m)):u&&u.length>0?(console.log("[studentsApi] Alternative query succeeded:",u[0]),u[0]):null}return $e(r)}return n}catch(n){throw console.error("[studentsApi] Unexpected error in getById:",n),n}}),getByCode:o=>As(void 0,null,function*(){const{data:n,error:r}=yield Z.from("estudiantes").select("*").eq("nombre_estudiante",o).single();return r?r.code==="PGRST116"?null:$e(r):n}),update:(o,n)=>As(void 0,null,function*(){const{data:r,error:u}=yield Z.from("estudiantes").update(Wb(Jb({},n),{fecha_actualizacion:new Date().toISOString()})).eq("id",o).select().single();return u?$e(u):r}),delete:o=>As(void 0,null,function*(){const{error:n}=yield Z.from("estudiantes").delete().eq("id",o);if(n)return $e(n)})};var ev=Object.defineProperty,tv=Object.defineProperties,av=Object.getOwnPropertyDescriptors,Bf=Object.getOwnPropertySymbols,sv=Object.prototype.hasOwnProperty,lv=Object.prototype.propertyIsEnumerable,qf=(o,n,r)=>n in o?ev(o,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[n]=r,rv=(o,n)=>{for(var r in n||(n={}))sv.call(n,r)&&qf(o,r,n[r]);if(Bf)for(var r of Bf(n))lv.call(n,r)&&qf(o,r,n[r]);return o},nv=(o,n)=>tv(o,av(n)),Pr=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});const jd={create:o=>Pr(void 0,null,function*(){const{data:n,error:r}=yield Z.from("grupos").insert(o).select().single();return r?$e(r):n}),getByInstitution:o=>Pr(void 0,null,function*(){const{data:n,error:r}=yield Z.from("grupos").select("*").eq("institucion_id",o).order("nombre");return r?$e(r):n}),getById:o=>Pr(void 0,null,function*(){const{data:n,error:r}=yield Z.from("grupos").select("*").eq("id",o).single();return r?r.code==="PGRST116"?null:$e(r):n}),update:(o,n)=>Pr(void 0,null,function*(){const{data:r,error:u}=yield Z.from("grupos").update(nv(rv({},n),{fecha_actualizacion:new Date().toISOString()})).eq("id",o).select().single();return u?$e(u):r}),delete:o=>Pr(void 0,null,function*(){const{error:n}=yield Z.from("grupos").delete().eq("id",o);if(n)return $e(n)})};var Vr=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});const s0={saveResponse:o=>Vr(void 0,null,function*(){const{data:n,error:r}=yield Z.from("respuestas").insert(o).select().single();return r?$e(r):n}),saveMultipleResponses:o=>Vr(void 0,null,function*(){try{console.log("Intentando guardar respuestas en Supabase con los siguientes datos:",JSON.stringify(o,null,2));let n=!1;if(o.forEach((u,m)=>{u.estudiante_id||(console.error(`Respuesta ${m}: Falta estudiante_id`),n=!0),u.grupo_id||(console.error(`Respuesta ${m}: Falta grupo_id`),n=!0),u.pregunta_id||(console.error(`Respuesta ${m}: Falta pregunta_id`),n=!0);const x=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;u.estudiante_id&&!x.test(u.estudiante_id)&&(console.error(`Respuesta ${m}: estudiante_id no es un UUID válido: ${u.estudiante_id}`),n=!0),u.grupo_id&&!x.test(u.grupo_id)&&(console.error(`Respuesta ${m}: grupo_id no es un UUID válido: ${u.grupo_id}`),n=!0),u.pregunta_id&&!x.test(u.pregunta_id)&&(console.error(`Respuesta ${m}: pregunta_id no es un UUID válido: ${u.pregunta_id}`),n=!0)}),n)throw new Error("Hay errores en los datos de las respuestas. Revisa la consola para más detalles.");const r=[];for(let u=0;u<o.length;u++)try{console.log(`Intentando guardar respuesta ${u}:`,JSON.stringify(o[u],null,2));const{data:m,error:x}=yield Z.from("respuestas").insert([o[u]]).select();if(x)throw console.error(`Error al guardar respuesta ${u}:`,x),console.error("Detalles del error:",JSON.stringify(x,null,2)),x;m&&m.length>0&&(console.log(`Respuesta ${u} guardada exitosamente:`,m[0]),r.push(m[0]))}catch(m){throw console.error(`Error al guardar respuesta ${u}:`,m),m}if(r.length===0)throw console.warn("No se recibieron datos después de insertar respuestas"),new Error("No se pudieron guardar las respuestas");return r}catch(n){throw console.error("Error inesperado al guardar respuestas:",n),n}}),getByStudentId:o=>Vr(void 0,null,function*(){const{data:n,error:r}=yield Z.from("respuestas").select("*").eq("estudiante_id",o);return r?$e(r):n}),getByQuestionId:o=>Vr(void 0,null,function*(){const{data:n,error:r}=yield Z.from("respuestas").select("*").eq("pregunta_id",o);return r?$e(r):n}),hasStudentCompletedQuestionnaire:(o,n)=>Vr(void 0,null,function*(){try{console.log(`[responsesApi] Verificando si el estudiante ${o} ha completado el cuestionario para el grupo ${n}`);const{data:r,error:u}=yield Z.from("respuestas").select("id, pregunta_id").eq("estudiante_id",o).eq("grupo_id",n);if(u)return console.error("[responsesApi] Error al verificar respuestas:",u),$e(u);if(!r||r.length===0)return console.log(`[responsesApi] El estudiante ${o} no tiene respuestas para el grupo ${n}`),!1;const m=new Set(r.map(x=>x.pregunta_id));return console.log(`[responsesApi] El estudiante ${o} ha respondido ${m.size} preguntas únicas para el grupo ${n}`),m.size>0}catch(r){throw console.error("[responsesApi] Error inesperado al verificar respuestas:",r),r}})};var Gf=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});const iv={getByQuestionId:o=>Gf(void 0,null,function*(){const{data:n,error:r}=yield Z.from("opciones_respuesta").select("*").eq("pregunta_id",o).order("orden");return r?$e(r):n}),getAll:()=>Gf(void 0,null,function*(){const{data:o,error:n}=yield Z.from("opciones_respuesta").select("*").order("pregunta_id, orden");return n?$e(n):o})};var ov=Object.defineProperty,Lf=Object.getOwnPropertySymbols,cv=Object.prototype.hasOwnProperty,dv=Object.prototype.propertyIsEnumerable,Pf=(o,n,r)=>n in o?ov(o,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[n]=r,Mi=(o,n)=>{for(var r in n||(n={}))cv.call(n,r)&&Pf(o,r,n[r]);if(Lf)for(var r of Lf(n))dv.call(n,r)&&Pf(o,r,n[r]);return o},Ot=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});const ea=o=>Ot(void 0,[o],function*({functionName:n,action:r,data:u,accessToken:m}){try{let x=m;if(!x){const{data:{session:h}}=yield Z.auth.getSession();if(!h)throw new Error("No hay sesión activa. Por favor, inicia sesión para usar esta función.");x=h.access_token}if(!x)throw new Error("No se pudo obtener un token de acceso válido.");const p=!1;let f,c;if(!p){const h=yield Z.functions.invoke(n,{body:JSON.stringify(Mi({action:r},u)),headers:{Authorization:`Bearer ${x}`}});f=h.data,c=h.error}if(c)throw new Error(`Error al invocar función serverless: ${c.message}`);return f}catch(x){throw console.error(`Error en función serverless ${n}:`,x),x}}),ta=()=>Ot(void 0,null,function*(){try{const{data:{session:o}}=yield Z.auth.getSession();if(o!=null&&o.access_token)return o.access_token;const n=localStorage.getItem("supabase.auth.token");if(n)try{const r=JSON.parse(n);if(r.access_token)return r.access_token}catch(r){console.error("Error al parsear el token almacenado:",r)}return}catch(o){console.error("Error al obtener el token de acceso:",o);return}}),fi={createUser:o=>Ot(void 0,null,function*(){const n=yield ta();return ea({functionName:"user-management",action:"createUser",data:o,accessToken:n})}),updateUser:(o,n)=>Ot(void 0,null,function*(){const r=yield ta();return ea({functionName:"user-management",action:"updateUser",data:Mi({userId:o},n),accessToken:r})}),deleteUser:o=>Ot(void 0,null,function*(){const n=yield ta();return ea({functionName:"user-management",action:"deleteUser",data:{userId:o},accessToken:n})}),assignRole:(o,n)=>Ot(void 0,null,function*(){const r=yield ta();return ea({functionName:"user-management",action:"assignRole",data:{userId:o,role:n},accessToken:r})})},Ds={createRole:o=>Ot(void 0,null,function*(){const n=yield ta();return ea({functionName:"role-management",action:"createRole",data:o,accessToken:n})}),updateRole:(o,n)=>Ot(void 0,null,function*(){const r=yield ta();return ea({functionName:"role-management",action:"updateRole",data:Mi({roleId:o},n),accessToken:r})}),deleteRole:o=>Ot(void 0,null,function*(){const n=yield ta();return ea({functionName:"role-management",action:"deleteRole",data:{roleId:o},accessToken:n})}),assignPermissions:(o,n)=>Ot(void 0,null,function*(){const r=yield ta();return ea({functionName:"role-management",action:"assignPermissions",data:{roleId:o,permissionIds:n},accessToken:r})}),createModule:o=>Ot(void 0,null,function*(){const n=yield ta();return ea({functionName:"role-management",action:"createModule",data:o,accessToken:n})}),updateModule:(o,n)=>Ot(void 0,null,function*(){const r=yield ta();return ea({functionName:"role-management",action:"updateModule",data:Mi({moduleId:o},n),accessToken:r})}),deleteModule:o=>Ot(void 0,null,function*(){const n=yield ta();return ea({functionName:"role-management",action:"deleteModule",data:{moduleId:o},accessToken:n})})};var uv=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});const mv=()=>{const[o,n]=v.useState([]),[r,u]=v.useState(!0),[m,x]=v.useState(null),[p,f]=v.useState(null),c=ke();v.useEffect(()=>{uv(void 0,null,function*(){try{u(!0),x(null);const y=(yield a0.getAll()).map(O=>({id:O.id,name:O.nombre,address:O.direccion||void 0,groups:[]}));n(y)}catch(C){console.error("Error al cargar instituciones:",C),x("No se pudieron cargar las instituciones. Por favor, intenta de nuevo.")}finally{u(!1)}})},[]);const h=j=>{f(j)},w=()=>{p&&c(`/student/select-group/${p.id}`)};return r?t.jsx("div",{className:"p-6 text-center",children:"Cargando colegios..."}):m?t.jsxs("div",{className:"p-6 bg-white shadow-md rounded-lg max-w-lg mx-auto",children:[t.jsx("h2",{className:"text-2xl font-semibold mb-4 text-red-600",children:"Error"}),t.jsx("p",{className:"text-gray-600 mb-6",children:m}),t.jsx("button",{onClick:()=>window.location.reload(),className:"w-full py-2 px-4 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Intentar de nuevo"})]}):t.jsxs("div",{className:"p-6 bg-white shadow-md rounded-lg max-w-lg mx-auto",children:[t.jsx("h2",{className:"text-2xl font-semibold mb-4 text-gray-700",children:"Selecciona Tu Colegio"}),o.length===0?t.jsx("p",{className:"text-gray-500",children:"No hay colegios disponibles. Contacta al administrador."}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"space-y-3 mb-6",children:o.map(j=>t.jsxs("button",{onClick:()=>h(j),className:`flex items-center w-full text-left p-4 border rounded-md transition duration-200 ${(p==null?void 0:p.id)===j.id?"bg-blue-100 border-blue-300 text-blue-800":"bg-white border-gray-200 hover:bg-gray-50"}`,children:[t.jsx(Oa,{className:"mr-3 h-5 w-5"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:j.name}),j.address&&t.jsx("p",{className:"text-sm text-gray-600",children:j.address})]})]},j.id))}),t.jsx("button",{onClick:w,disabled:!p,className:"w-full py-2 px-4 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Continuar"})]})]})};var hv=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});const fv=()=>{const{institutionId:o}=ql(),n=ke(),[r,u]=v.useState([]),[m,x]=v.useState(""),[p,f]=v.useState(!0),[c,h]=v.useState(null);v.useEffect(()=>{if(!o){h("No se proporcionó ID de institución"),f(!1);return}hv(void 0,null,function*(){try{f(!0),h(null);const C=yield a0.getById(o);if(!C){h(`Institución con ID "${o}" no encontrada`);return}x(C.nombre);const y=yield jd.getByInstitution(o),O=[];for(const _ of y){const $=yield yd.getByGroup(_.id);O.push({id:_.id,name:_.nombre,students:$.map(q=>({id:q.id,name:q.nombre_estudiante}))})}u(O)}catch(C){console.error("Error al cargar datos:",C),h("Error al cargar los datos. Por favor, intenta de nuevo.")}finally{f(!1)}})},[o]);const w=j=>{n(`/student/select-student/${j}`)};return p?t.jsx("div",{className:"p-6 text-center",children:"Cargando grupos..."}):c?t.jsxs("div",{className:"p-6 bg-white shadow-md rounded-lg max-w-lg mx-auto",children:[t.jsx("h2",{className:"text-2xl font-semibold mb-4 text-red-600",children:"Error"}),t.jsx("p",{className:"text-gray-600 mb-6",children:c}),t.jsx("button",{onClick:()=>n("/student"),className:"w-full py-2 px-4 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Volver a selección de colegio"})]}):r.length===0?t.jsxs("div",{className:"p-6 bg-white shadow-md rounded-lg max-w-lg mx-auto",children:[t.jsx("h2",{className:"text-2xl font-semibold mb-4 text-gray-700",children:"No hay grupos disponibles"}),t.jsxs("p",{className:"text-gray-600 mb-6",children:["El colegio ",m," no tiene grupos registrados."]}),t.jsx("button",{onClick:()=>n("/student"),className:"w-full py-2 px-4 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Volver a selección de colegio"})]}):t.jsxs("div",{className:"p-6 bg-white shadow-md rounded-lg max-w-lg mx-auto",children:[t.jsxs("h2",{className:"text-2xl font-semibold mb-1 text-gray-700",children:["Grupos de ",m]}),t.jsx("p",{className:"text-gray-600 mb-6",children:"Selecciona tu grupo"}),t.jsx("div",{className:"space-y-3",children:r.map(j=>{var C;return t.jsxs("button",{onClick:()=>w(j.id),className:"flex items-center justify-between w-full text-left p-4 bg-blue-100 border border-blue-200 rounded-md hover:bg-blue-200 hover:border-blue-300 transition duration-200 text-blue-800 font-medium focus:outline-none focus:ring-2 focus:ring-blue-400",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(ve,{className:"mr-3 h-5 w-5"}),t.jsx("span",{children:j.name})]}),t.jsxs("span",{className:"text-sm text-blue-600",children:[((C=j.students)==null?void 0:C.length)||0," estudiantes"]})]},j.id)})})]})};var xv=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});const gv=()=>{const{groupId:o}=ql(),n=ke(),[r,u]=v.useState([]),[m,x]=v.useState(new Set),[p,f]=v.useState(""),[c,h]=v.useState(!0),[w,j]=v.useState(null);v.useEffect(()=>{if(!o){j("No se proporcionó ID de grupo."),h(!1);return}xv(void 0,null,function*(){try{h(!0),j(null);const $=yield jd.getById(o);if(!$){j(`Grupo con ID "${o}" no encontrado`);return}f($.nombre);const q=yield yd.getByGroup(o),k=q.map(F=>({id:F.id,name:`${F.nombre_estudiante} ${F.apellido_estudiante}`}));u(k);const V=new Set;for(const F of q)try{(yield s0.hasStudentCompletedQuestionnaire(F.id,o))&&V.add(F.id)}catch(E){console.error(`Error al verificar respuestas para estudiante ${F.id}:`,E)}x(V)}catch($){console.error("Error al cargar datos:",$),j("Error al cargar los datos. Por favor, intenta de nuevo.")}finally{h(!1)}})},[o]);const C=_=>{if(m.has(_)){alert("Este estudiante ya ha completado el cuestionario.");return}o&&n(`/student/questionnaire/${o}/${_}`)};if(c)return t.jsx("div",{className:"p-6 text-center",children:"Cargando estudiantes..."});if(w)return t.jsxs("div",{className:"p-6 bg-white shadow-md rounded-lg max-w-lg mx-auto",children:[t.jsx("h2",{className:"text-2xl font-semibold mb-4 text-red-600",children:"Error"}),t.jsx("p",{className:"text-gray-600 mb-6",children:w}),t.jsx("button",{onClick:()=>n("/student"),className:"w-full py-2 px-4 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Volver a selección de colegio"})]});const y=r.filter(_=>!m.has(_.id)),O=r.filter(_=>m.has(_.id));return t.jsxs("div",{className:"p-6 bg-white shadow-md rounded-lg max-w-lg mx-auto",children:[t.jsxs("h2",{className:"text-2xl font-semibold mb-1 text-gray-700",children:["Estudiantes de ",p]}),t.jsx("p",{className:"text-gray-600 mb-6",children:"Selecciona tu nombre de la lista"}),r.length===0?t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-500 mb-6",children:"No hay estudiantes registrados en este grupo."}),t.jsx("button",{onClick:()=>n("/student"),className:"w-full py-2 px-4 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Volver a selección de colegio"})]}):t.jsxs(t.Fragment,{children:[y.length>0&&t.jsxs(t.Fragment,{children:[t.jsx("h3",{className:"text-lg font-medium mb-2 text-gray-600",children:"Pendientes:"}),t.jsx("div",{className:"space-y-3 mb-6",children:y.map(_=>t.jsxs("button",{onClick:()=>C(_.id),className:"flex items-center justify-between w-full text-left p-4 bg-blue-100 border border-blue-200 rounded-md hover:bg-blue-200 hover:border-blue-300 transition duration-200 text-blue-800 font-medium focus:outline-none focus:ring-2 focus:ring-blue-400",children:[_.name,t.jsx(od,{className:"h-5 w-5 text-blue-600"})]},_.id))})]}),O.length>0&&t.jsxs(t.Fragment,{children:[t.jsx("h3",{className:"text-lg font-medium mb-2 text-gray-500",children:"Ya completados:"}),t.jsx("div",{className:"space-y-3",children:O.map(_=>t.jsxs("div",{className:"flex items-center justify-between w-full p-4 bg-green-100 border border-green-200 rounded-md text-green-700",children:[_.name,t.jsx(cd,{className:"h-5 w-5 text-green-600"})]},_.id))})]})]})]})},l0="questionnaireResponses",pv=o=>{try{const r=[...bv(),o];localStorage.setItem(l0,JSON.stringify(r))}catch(n){throw console.error("Error saving questionnaire response:",n),new Error("Failed to save response data")}},bv=()=>{try{const o=localStorage.getItem(l0);return o?JSON.parse(o):[]}catch(o){return console.error("Error getting questionnaire responses:",o),[]}},oa=[{id:"q1",text:"¿A quién elegirías como compañero/a de grupo de clase?",type:"peer_selector",maxSelections:3},{id:"q2",text:"¿A quién NO elegirías como compañero/a?",type:"peer_selector",maxSelections:3},{id:"q3",text:"¿Quiénes crees que te elegirían a ti?",type:"peer_selector",maxSelections:3},{id:"q4",text:"¿Quiénes crees que NO te elegirían a ti?",type:"peer_selector",maxSelections:3},{id:"q5",text:"¿Quiénes son los/as más fuertes de la clase?",type:"peer_selector",maxSelections:3},{id:"q6",text:"¿Quiénes actúan como un/a cobarde o un bebé?",type:"peer_selector",maxSelections:3},{id:"q7",text:"¿Quiénes maltratan o pegan a otros/as compañeros/as?",type:"peer_selector",maxSelections:3},{id:"q8",text:"¿Quiénes suelen ser las víctimas?",type:"peer_selector",maxSelections:3},{id:"q9",text:"¿Quiénes suelen empezar las peleas?",type:"peer_selector",maxSelections:3},{id:"q10",text:"¿A quiénes se les tiene manía?",type:"peer_selector",maxSelections:3},{id:"q11",text:"Las agresiones suelen ser:",type:"checkbox_group_with_other",options:["Insultos y amenazas","Maltrato físico","Rechazo"]},{id:"q12",text:"¿Dónde suelen ocurrir las agresiones?",type:"checkbox_group_with_other",options:["En el aula","En el patio","En los pasillos"]},{id:"q13",text:"¿Con qué frecuencia ocurren las agresiones?",type:"single_choice",options:["Todos los días","1-2 veces por semana","Rara vez","Nunca"]},{id:"q14",text:"¿Crees que estas situaciones encierran gravedad?",type:"single_choice",options:["Poco o nada","Regular","Bastante","Mucho"]},{id:"q15",text:"¿Te encuentras seguro/a en el centro escolar?",type:"single_choice",options:["Poco o nada","Regular","Bastante","Mucho"]}],vv={q1:"d90ddd09-3878-4efc-9059-7279570157bc",q2:"47b56067-0c8c-4565-b645-80348852907f",q3:"dae67e87-db3e-4637-ace1-f1148f1d7d69",q4:"d2888d67-9878-4cdf-8a58-592c251c1cb6",q5:"0489df06-c6e7-48ec-8fb0-49469ec541ae",q6:"775af389-a84d-4f40-8fb9-7b94cbea5498",q7:"8e0be6b5-fa0b-4215-bc60-0c91065bbaa9",q8:"eec6513e-f5b7-45b1-b21d-4e4551b3e504",q9:"8074fef6-4952-4857-b97c-08a1a8805522",q10:"00000000-0000-0000-0000-000000000010",q11:"00000000-0000-0000-0000-000000000011",q12:"00000000-0000-0000-0000-000000000012",q13:"00000000-0000-0000-0000-000000000013",q14:"00000000-0000-0000-0000-000000000014",q15:"00000000-0000-0000-0000-000000000015"};function yv(o){const n=vv[o];if(!n)throw new Error(`No se encontró un UUID para el ID local: ${o}`);return n}var jv=Object.defineProperty,Nv=Object.defineProperties,wv=Object.getOwnPropertyDescriptors,Vf=Object.getOwnPropertySymbols,_v=Object.prototype.hasOwnProperty,Sv=Object.prototype.propertyIsEnumerable,Hf=(o,n,r)=>n in o?jv(o,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[n]=r,xi=(o,n)=>{for(var r in n||(n={}))_v.call(n,r)&&Hf(o,r,n[r]);if(Vf)for(var r of Vf(n))Sv.call(n,r)&&Hf(o,r,n[r]);return o},gi=(o,n)=>Nv(o,wv(n));const Ev=({questionId:o,options:n,value:r,onChange:u,maxSelections:m,placeholder:x,requireExact:p=!1})=>{const f=p?`Debes seleccionar exactamente ${m} compañeros...`:`Selecciona hasta ${m} compañeros...`,c=x||f,h=j=>{const C=Array.isArray(j)?j:[];C.length>m&&alert(`Solo puedes seleccionar un máximo de ${m} compañeros.`);const y=C.slice(0,m);u(o,y)},w=Array.isArray(r)?r:[];return t.jsxs("div",{children:[t.jsx(tb,{isMulti:!0,instanceId:`select-${o}`,name:o,options:n,value:w,onChange:h,placeholder:c,noOptionsMessage:()=>"No hay más compañeros para seleccionar",className:"basic-multi-select",classNamePrefix:"select",styles:{control:j=>gi(xi({},j),{borderColor:"#cbd5e1","&:hover":{borderColor:"#94a3b8"}}),multiValue:j=>gi(xi({},j),{backgroundColor:"#e0f2fe"}),multiValueLabel:j=>gi(xi({},j),{color:"#0c4a6e"}),multiValueRemove:j=>gi(xi({},j),{color:"#0c4a6e",":hover":{backgroundColor:"#0ea5e9",color:"white"}})}}),t.jsxs("p",{className:`text-sm mt-2 ${p&&w.length!==m?"text-red-500":"text-gray-500"}`,children:[p?`Debes seleccionar exactamente ${m} compañeros.`:`Puedes seleccionar hasta ${m} compañeros.`,w.length>0&&t.jsxs("span",{className:p&&w.length!==m?"text-red-600 font-medium":"",children:[` Has seleccionado ${w.length} de ${m}.`,p&&w.length!==m&&" ¡Faltan más selecciones!"]})]})]})},Cv=({questionId:o,options:n,value:r,onChange:u,otherLabel:m="Otras formas / Otros lugares:"})=>{var x,p;const f=(x=r==null?void 0:r.selected)!=null?x:[],c=(p=r==null?void 0:r.other)!=null?p:"",h=(j,C)=>{u(o,{selected:C?[j]:[],other:c})},w=j=>{const C=j.target.value;C.trim()!==""?u(o,{selected:[],other:C}):u(o,{selected:f,other:C})};return t.jsxs("div",{className:"space-y-3",children:[n.map((j,C)=>t.jsxs("label",{className:"flex items-center p-3 border rounded-md hover:bg-gray-50 cursor-pointer",children:[t.jsx("input",{type:"radio",name:`${o}`,value:j,checked:f.includes(j),onChange:y=>h(j,y.target.checked),className:"mr-3 h-4 w-4 text-blue-600 border-gray-300 rounded-full focus:ring-blue-500"}),t.jsx("span",{className:"text-gray-700",children:j})]},C)),t.jsxs("div",{className:"pt-2",children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[m," (Especificar)"]}),t.jsx("input",{type:"text",value:c,onChange:w,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Escribe aquí si marcaste 'Otras' o tienes algo más que añadir"})]})]})},Av=({totalQuestions:o,currentQuestionIndex:n,answeredQuestions:r,onQuestionClick:u,className:m=""})=>{const x=Array.from({length:o},(c,h)=>h+1),p=r.size,f=new Date().toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"});return t.jsxs("div",{className:`bg-white rounded-lg shadow-md p-6 ${m}`,children:[t.jsx("div",{className:"text-center mb-6",children:t.jsxs("div",{className:"flex items-center justify-center mb-2",children:[t.jsx(Xr,{className:"h-5 w-5 text-gray-500 mr-2"}),t.jsx("span",{className:"text-2xl font-mono text-gray-700",children:f})]})}),t.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4 text-center",children:"Navegación"}),t.jsx("div",{className:"grid grid-cols-4 gap-3 mb-6",children:x.map(c=>{const h=c-1,w=r.has(h),j=h===n;return t.jsx("button",{onClick:()=>u(h),className:`
                w-12 h-12 rounded-full font-semibold text-sm transition-all duration-200 
                flex items-center justify-center border-2
                ${j?"bg-blue-500 text-white border-blue-500 shadow-lg scale-110":w?"bg-green-500 text-white border-green-500 hover:bg-green-600":"bg-gray-100 text-gray-600 border-gray-300 hover:bg-gray-200"}
                ${j?"":"hover:scale-105"}
              `,title:`Pregunta ${c}${w?" (Respondida)":" (Sin responder)"}`,children:c},c)})}),t.jsxs("div",{className:"mb-4",children:[t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Progreso"}),t.jsxs("span",{className:"text-sm text-gray-600",children:[p," de ",o]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${p/o*100}%`}})})]}),t.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[t.jsx("h4",{className:"text-sm font-semibold text-blue-800 mb-2",children:"Información"}),t.jsxs("div",{className:"space-y-2 text-xs text-blue-700",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full mr-2"}),t.jsx("span",{children:"Pregunta actual"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-2"}),t.jsx("span",{children:"Pregunta respondida"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-3 h-3 bg-gray-300 rounded-full mr-2"}),t.jsx("span",{children:"Pregunta pendiente"})]})]})]})]})};var Dv=Object.defineProperty,Ov=Object.defineProperties,Tv=Object.getOwnPropertyDescriptors,If=Object.getOwnPropertySymbols,Mv=Object.prototype.hasOwnProperty,Rv=Object.prototype.propertyIsEnumerable,Yf=(o,n,r)=>n in o?Dv(o,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[n]=r,zv=(o,n)=>{for(var r in n||(n={}))Mv.call(n,r)&&Yf(o,r,n[r]);if(If)for(var r of If(n))Rv.call(n,r)&&Yf(o,r,n[r]);return o},kv=(o,n)=>Ov(o,Tv(n)),pi=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});function ls(o){return Array.isArray(o)&&(o.length===0||"value"in(o[0]||{}))}function yl(o){return typeof o=="object"&&o!==null&&"selected"in o&&"other"in o}const Qf=()=>{var o;const{groupId:n,studentId:r}=ql(),u=ke(),[m,x]=v.useState(""),[p,f]=v.useState(""),[c,h]=v.useState(0),[w,j]=v.useState({}),[C,y]=v.useState(!0),[O,_]=v.useState(null),[$,q]=v.useState({}),[k,V]=v.useState(null),F=v.useMemo(()=>oa[c],[c]);v.useEffect(()=>{pi(void 0,null,function*(){try{const U=yield iv.getAll(),X={};U.forEach(le=>{X[le.pregunta_id]||(X[le.pregunta_id]={}),X[le.pregunta_id][le.texto]=le.id}),q(X),console.log("Opciones de respuesta cargadas:",X)}catch(U){console.error("Error cargando opciones de respuesta:",U)}})},[]),v.useEffect(()=>{pi(void 0,null,function*(){y(!0);try{const U=localStorage.getItem("student_session");if(U){const X=JSON.parse(U);console.log("Datos de sesión del estudiante:",X),V(X),x(X.name),f(X.grado),y(!1);return}if(n&&r){const X=yield yd.getById(r);X?x(`${X.nombre_estudiante} ${X.apellido_estudiante}`):_("No se pudo encontrar la información del estudiante.");const le=yield jd.getById(n);le?f(le.nombre):console.warn("No se pudo encontrar la información del grupo.")}else _("No hay sesión de estudiante activa. Por favor, inicia sesión nuevamente.")}catch(U){console.error("Error al cargar datos:",U),_("Error al cargar los datos. Por favor, intenta de nuevo.")}finally{y(!1)}})},[n,r]);const[E,S]=v.useState([]);v.useEffect(()=>{pi(void 0,null,function*(){if(F.type==="peer_selector"){if((!n||!r)&&!k){S([]);return}try{let U=n,X=r;if(k&&(!n||!r)){console.log("Obteniendo IDs reales para cargar compañeros de clase..."),console.log("Datos de sesión del estudiante:",k);try{console.log(`Buscando estudiante con documento: "${k.documento}"`);const{data:le,error:W}=yield Z.from("estudiantes").select("id, grupo_id, nombre_estudiante, apellido_estudiante, grado").eq("numero_documento",k.documento).single();if(W)throw console.error("Error buscando estudiante:",W),new Error(`Error buscando estudiante: ${W.message}`);if(!le)throw new Error(`No se encontró el estudiante con documento ${k.documento}`);console.log("Estudiante encontrado:",le),X=le.id,U=le.grupo_id,console.log(`IDs obtenidos - Estudiante: ${X}, Grupo: ${U}`)}catch(le){console.error("Error obteniendo IDs reales:",le)}}if(U){console.log(`Cargando compañeros de clase desde Supabase para grupo: ${U}`);const{data:le,error:W}=yield Z.from("estudiantes").select("id, nombre_estudiante, apellido_estudiante, grado").eq("grupo_id",U);if(W)throw new Error(`Error cargando estudiantes: ${W.message}`);if(!le||le.length===0){console.warn("No se encontraron estudiantes para el grupo seleccionado"),S([]);return}console.log(`[QuestionnairePage] Encontrados ${le.length} estudiantes para el grupo ${U}`);const ne=le.filter(oe=>oe.id!==X).map(oe=>({value:oe.id,label:`${oe.nombre_estudiante} ${oe.apellido_estudiante}`}));console.log("[QuestionnairePage] Compañeros de clase cargados:",ne),S(ne)}else console.error("No se pudo obtener el ID del grupo para cargar compañeros de clase"),console.error("Valores actuales:",{currentGroupId:U,groupId:n,studentSession:k?{documento:k.documento,grado:k.grado,name:k.name}:null}),S([])}catch(U){console.error("Error al cargar compañeros de clase:",U),S([])}}})},[F.type,n,r,k]);const D=(Q,U)=>{j(X=>kv(zv({},X),{[Q]:U}))},z=()=>{var Q;const U=w[F.id];if(U==null)return!1;switch(F.type){case"single_choice":return typeof U=="string"&&U.trim()!=="";case"peer_selector":return ls(U)&&U.length<=((Q=F.maxSelections)!=null?Q:3);case"checkbox_group_with_other":return yl(U)?Array.isArray(U.selected)&&U.selected.length>0||typeof U.other=="string"&&U.other.trim()!=="":!1;default:return!1}},N=()=>{var Q;for(const U of oa){const X=w[U.id];if(X==null)return console.warn(`Validation failed: Question ${U.id} has no answer.`),!1;if(U.type==="peer_selector"&&ls(X)){const le=parseInt(U.id.replace("q",""));if(le>=1&&le<=10){if(X.length!==3)return console.warn(`Validation failed: Question ${U.id} requires exactly 3 selections, but has ${X.length}`),!1}else if(X.length===0)continue}switch(U.type){case"single_choice":if(!(typeof X=="string"&&X.trim()!==""))return console.warn(`Validation failed: single_choice ${U.id} is invalid:`,X),!1;break;case"peer_selector":if(!ls(X)||X.length>((Q=U.maxSelections)!=null?Q:3))return console.warn(`Validation failed: peer_selector ${U.id} is invalid:`,X),!1;break;case"checkbox_group_with_other":if(!yl(X))return console.warn(`Validation failed: checkbox_group_with_other ${U.id} is not properly structured:`,X),!1;if(!(Array.isArray(X.selected)&&X.selected.length>0||typeof X.other=="string"&&X.other.trim()!==""))return console.warn(`Validation failed: checkbox_group_with_other ${U.id} is invalid:`,X),!1;break;default:return console.warn(`Validation failed: Unknown question type for ${U.id}`),!1}}return console.log("Validation passed for all answers."),!0},M=()=>{if(F.type==="peer_selector"){const Q=parseInt(F.id.replace("q","")),U=w[F.id];if(Q>=1&&Q<=10&&(!ls(U)||U.length!==3)){alert("Por favor, selecciona exactamente 3 compañeros antes de continuar.");return}}else if(!z()){alert("Por favor, responde la pregunta actual antes de continuar.");return}c<oa.length-1&&h(c+1)},K=()=>{c>0&&h(c-1)},G=()=>pi(void 0,null,function*(){if(!N()){alert("Por favor, asegúrate de haber respondido todas las preguntas correctamente antes de finalizar.");const ge=oa.findIndex(xe=>{const je=w[xe.id];if(je==null)return!0;if(xe.type==="peer_selector"&&ls(je)&&je.length===0)return!1;if(xe.id===F.id)return!z();switch(xe.type){case"single_choice":return!(typeof je=="string"&&je.trim()!=="");case"checkbox_group_with_other":return yl(je)?!(Array.isArray(je.selected)&&je.selected.length>0||typeof je.other=="string"&&je.other.trim()!==""):!0;default:return!1}});ge!==-1&&(console.log(`Navigating to first invalid question index: ${ge}`),h(ge));return}const Q=k&&k.id&&k.name,U=n&&r&&m;if(!Q&&!U){_("Faltan datos esenciales (grupo, estudiante) para guardar la respuesta.");return}const X=Object.entries(w).map(([ge,xe])=>{const je=oa.find(pe=>pe.id===ge);let me=xe;return(je==null?void 0:je.type)==="peer_selector"&&ls(xe)&&(me=xe.map(pe=>pe.value)),(je==null?void 0:je.type)==="checkbox_group_with_other"&&yl(xe)&&(me={selected:Array.isArray(xe.selected)?xe.selected:[],other:typeof xe.other=="string"?xe.other:""}),{questionId:ge,value:me}});let le=Q?k.grado:n,W=Q?k.id:r;const ne=Q?k.name:m,oe={responseId:`resp-${le}-${W}-${Date.now()}`,groupId:le,studentId:W,studentName:ne,answers:X,submittedAt:new Date().toISOString()};try{if(pv(oe),console.log("Respuestas guardadas en localStorage como respaldo:",oe),Q&&!U){console.log("Modo local con sesión: Intentando obtener IDs válidos para Supabase...");try{const{data:me,error:pe}=yield Z.from("grupos").select("id").eq("nombre",k.grado).eq("institucion_id","8a9ab6bb-4f0e-4eb9-905d-f16049464305").single();if(pe||!me)throw console.error("Error obteniendo ID del grupo:",pe),new Error(`No se pudo obtener el ID del grupo para ${k.grado}`);const st=me.id;console.log("ID del grupo obtenido:",st);const lt=k.name.split(" "),os=lt[0],Ze=lt.slice(1).join(" "),{data:Ma,error:_d}=yield Z.from("estudiantes").select("id").eq("numero_documento",k.documento).single();let cs;if(Ma)cs=Ma.id,console.log("Estudiante existente encontrado:",cs);else{const qt={nombre_estudiante:os,apellido_estudiante:Ze,numero_documento:k.documento,edad:k.edad||null,grado:k.grado,grupo_id:st,institucion_id:"8a9ab6bb-4f0e-4eb9-905d-f16049464305"},{data:Jr,error:Gl}=yield Z.from("estudiantes").insert([qt]).select().single();if(Gl||!Jr)throw console.error("Error creando estudiante:",Gl),new Error("No se pudo crear el estudiante en Supabase");cs=Jr.id,console.log("Nuevo estudiante creado:",cs)}W=cs,le=st,console.log("IDs actualizados para Supabase:",{finalStudentId:W,finalGroupId:le})}catch(me){console.error("Error preparando datos para Supabase:",me),_(`No se pudieron guardar las respuestas en la base de datos: ${me.message}. 
                   Sin embargo, se han guardado localmente como respaldo.`),setTimeout(()=>{u("/student/complete")},3e3);return}}const ge=X.map(me=>{let pe;try{pe=yv(me.questionId),console.log(`ID local ${me.questionId} mapeado a UUID ${pe}`),/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(pe)||(console.error(`UUID con formato incorrecto: ${pe}`),pe=pe.toLowerCase(),console.log(`UUID corregido: ${pe}`))}catch(lt){throw console.error(`Error al obtener UUID para la pregunta ${me.questionId}:`,lt),new Error(`No se pudo obtener el UUID para la pregunta ${me.questionId}`)}return{estudiante_id:W,grupo_id:le,pregunta_id:pe,respuesta_texto:typeof me.value=="object"?JSON.stringify(me.value):String(me.value),opcion_respuesta_id:null,fecha_respuesta:new Date().toISOString(),fecha_creacion:new Date().toISOString(),fecha_actualizacion:new Date().toISOString()}});if(console.log("Intentando guardar respuestas en Supabase:",ge),console.log("Verificando IDs antes de guardar respuestas:"),console.log("finalStudentId:",W),console.log("finalGroupId:",le),!W)throw console.error("Error: ID de estudiante no válido"),new Error("ID de estudiante no válido");if(!le)throw console.error("Error: ID de grupo no válido"),new Error("ID de grupo no válido");const xe=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;if(!xe.test(W))throw console.error("Error: finalStudentId no es un UUID válido:",W),new Error(`ID de estudiante no es un UUID válido: ${W}`);if(Q)console.log("Modo local: finalGroupId puede ser nombre de grado:",le);else if(!xe.test(le))throw console.error("Error: finalGroupId no es un UUID válido:",le),new Error(`ID de grupo no es un UUID válido: ${le}`);for(const me of ge){if(console.log(`Verificando pregunta_id: ${me.pregunta_id}`),!me.pregunta_id||me.pregunta_id.includes("undefined"))throw new Error(`ID de pregunta no válido: ${me.pregunta_id}`);if(!/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(me.pregunta_id))if(console.error(`ID de pregunta con formato incorrecto: ${me.pregunta_id}`),me.pregunta_id.length===36&&me.pregunta_id.split("-").length===5){const st=me.pregunta_id.toLowerCase();console.log(`Corrigiendo formato de ID: ${me.pregunta_id} -> ${st}`),me.pregunta_id=st}else throw new Error(`ID de pregunta con formato incorrecto: ${me.pregunta_id}`)}let je;try{const me=ge.map(pe=>({estudiante_id:pe.estudiante_id,grupo_id:pe.grupo_id,pregunta_id:pe.pregunta_id,respuesta_texto:pe.respuesta_texto,opcion_respuesta_id:pe.opcion_respuesta_id,fecha_respuesta:pe.fecha_respuesta,fecha_creacion:pe.fecha_creacion,fecha_actualizacion:pe.fecha_actualizacion}));console.log("Datos a enviar a saveMultipleResponses:",JSON.stringify(me,null,2)),je=yield s0.saveMultipleResponses(me),console.log("Respuestas guardadas exitosamente:",je)}catch(me){throw console.error("Error al guardar respuestas en Supabase:",me),me}if(!je||je.length===0)throw new Error("No se pudieron guardar las respuestas en la base de datos");console.log("Respuestas guardadas en localStorage y Supabase:",oe),u("/student/complete")}catch(ge){console.error("Error guardando la respuesta:",ge);const xe=ge.message||"Ocurrió un error al guardar tus respuestas. Inténtalo de nuevo.";_(xe)}}),J=()=>{const Q=new Set;return oa.forEach((U,X)=>{const le=w[U.id];if(le!=null)switch(U.type){case"single_choice":typeof le=="string"&&le.trim()!==""&&Q.add(X);break;case"peer_selector":ls(le)&&Q.add(X);break;case"checkbox_group_with_other":yl(le)&&(Array.isArray(le.selected)&&le.selected.length>0||typeof le.other=="string"&&le.other.trim()!=="")&&Q.add(X);break}}),Q},ae=Q=>{h(Q)};if(C)return t.jsx("div",{className:"p-6 text-center",children:"Cargando datos..."});if(O)return t.jsx("div",{className:"p-6 text-center text-red-600 bg-red-100 rounded-lg",children:O});const re=c===oa.length-1,T=z(),H=J();return t.jsx("div",{className:"min-h-screen bg-gray-50 p-4",children:t.jsx("div",{className:"max-w-7xl mx-auto",children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[t.jsx("div",{className:"lg:col-span-1",children:t.jsx(Av,{totalQuestions:oa.length,currentQuestionIndex:c,answeredQuestions:H,onQuestionClick:ae,className:"sticky top-4"})}),t.jsx("div",{className:"lg:col-span-3",children:t.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6",children:[t.jsxs("h2",{className:"text-2xl font-semibold mb-1 text-gray-700",children:["Cuestionario para ",m]}),t.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Grupo: ",p||"Cargando..."]}),t.jsx("div",{className:"mb-4 h-2 bg-gray-200 rounded-full overflow-hidden",children:t.jsx("div",{className:"h-2 bg-blue-500 rounded-full transition-all duration-300 ease-out",style:{width:`${(c+1)/oa.length*100}%`}})}),t.jsxs("p",{className:"text-right text-sm text-gray-500 mb-6",children:["Pregunta ",c+1," de ",oa.length]}),t.jsxs("div",{className:"border-t pt-6 min-h-[400px]",children:[t.jsxs("label",{className:"block text-lg font-medium text-gray-800 mb-4",children:[c+1,". ",F.text]}),F.type==="single_choice"&&F.options&&Array.isArray(F.options)&&t.jsx("div",{className:"space-y-3",children:F.options.map(Q=>t.jsxs("label",{className:"flex items-center p-3 border rounded-md hover:bg-gray-50 cursor-pointer",children:[t.jsx("input",{type:"radio",name:F.id,value:Q,checked:w[F.id]===Q,onChange:U=>D(F.id,U.target.value),className:"mr-3 h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),t.jsx("span",{className:"text-gray-700",children:Q})]},Q))}),F.type==="peer_selector"&&t.jsx(Ev,{questionId:F.id,options:E,value:ls(w[F.id])?w[F.id]:[],onChange:D,maxSelections:(o=F.maxSelections)!=null?o:3,requireExact:(()=>{const Q=parseInt(F.id.replace("q",""));return Q>=1&&Q<=10})()}),F.type==="checkbox_group_with_other"&&F.options&&Array.isArray(F.options)&&t.jsx(Cv,{questionId:F.id,options:F.options,value:yl(w[F.id])?w[F.id]:{selected:[],other:""},onChange:D})]}),t.jsxs("div",{className:"mt-8 flex justify-between items-center border-t pt-6",children:[t.jsxs("button",{onClick:K,disabled:c===0,className:"px-5 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed flex items-center transition duration-200",children:[t.jsx($t,{className:"mr-1 h-4 w-4"}),"Anterior"]}),re?t.jsxs("button",{onClick:G,disabled:!T&&F.type!=="peer_selector",className:"px-5 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center transition duration-200",children:["Finalizar Cuestionario",t.jsx(zp,{className:"ml-1 h-4 w-4"})]}):t.jsxs("button",{onClick:M,disabled:F.type!=="peer_selector"&&!T,className:"px-5 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center transition duration-200",children:["Siguiente",t.jsx(Rp,{className:"ml-1 h-4 w-4"})]})]})]})})]})})})},Uv=()=>t.jsxs("div",{className:"flex flex-col items-center justify-center p-6 bg-white shadow-md rounded-lg max-w-md mx-auto text-center",children:[t.jsx(Ri,{className:"w-16 h-16 text-green-500 mb-4"}),t.jsx("h2",{className:"text-3xl font-semibold mb-3 text-gray-800",children:"¡Gracias!"}),t.jsx("p",{className:"text-gray-600 mb-6",children:"Has completado el cuestionario exitosamente. Tus respuestas han sido guardadas."}),t.jsx(Be,{to:"/student",className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition duration-300 ease-in-out",children:"Volver a Selección de Grupo"}),t.jsx(Be,{to:"/",className:"mt-3 px-6 py-2 text-sm text-gray-600 hover:text-blue-600 transition duration-300 ease-in-out",children:"Ir a la Página Principal"})]});var $v=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});const Nd=({title:o="BULLS App"})=>{var n;const{isAuthenticated:r,user:u,logout:m}=Bt(),x=ke(),p=()=>{console.log("Ver perfil")},f=()=>{console.log("Configuración")},c=()=>$v(void 0,null,function*(){try{console.log("Cerrando sesión..."),yield m(),x("/login")}catch(h){console.error("Error al cerrar sesión:",h)}});return t.jsx("nav",{className:"bg-white shadow-sm",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"flex justify-between h-16",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(Be,{to:"/",className:"text-xl font-bold text-indigo-600",children:o}),t.jsxs("div",{className:"hidden md:ml-6 md:flex md:space-x-8",children:[t.jsx(Be,{to:"/",className:"inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300",children:"Inicio"}),r&&t.jsxs(t.Fragment,{children:[t.jsx(Be,{to:"/admin",className:"inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300",children:"Admin"}),t.jsx(Be,{to:"/student",className:"inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300",children:"Estudiante"}),t.jsx(Be,{to:"/link-identity",className:"inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300",children:"Vincular Identidades"})]})]})]}),t.jsx("div",{className:"flex items-center",children:r?t.jsx(da,{userName:((n=u==null?void 0:u.user_metadata)==null?void 0:n.username)||(u==null?void 0:u.email),userId:u==null?void 0:u.id,userStatus:"online",onProfileClick:p,onSettingsClick:f,onLogoutClick:c}):t.jsx(Be,{to:"/login",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700",children:"Iniciar Sesión"})})]})})})},Bv=()=>t.jsxs("div",{className:"min-h-screen bg-blue-50",children:[t.jsx(Nd,{title:"Cuestionario Estudiante"}),t.jsx("header",{className:"bg-blue-600 text-white p-4 shadow-md",children:t.jsxs("div",{className:"container mx-auto flex justify-between items-center",children:[t.jsx("h1",{className:"text-xl font-bold",children:"Cuestionario Estudiante"}),t.jsx("nav",{children:t.jsx(Be,{to:"/",className:"text-blue-100 hover:text-white",children:"Volver al Inicio"})})]})}),t.jsx("main",{className:"container mx-auto p-4",children:t.jsxs(Fx,{children:[t.jsx(fe,{index:!0,element:t.jsx(mv,{})}),t.jsx(fe,{path:"select-group/:institutionId",element:t.jsx(fv,{})}),t.jsx(fe,{path:"select-student/:groupId",element:t.jsx(gv,{})}),t.jsx(fe,{path:"questionnaire/:groupId/:studentId",element:t.jsx(Qf,{})}),t.jsx(fe,{path:"questionnaire",element:t.jsx(Qf,{})}),t.jsx(fe,{path:"complete",element:t.jsx(Uv,{})})]})}),t.jsx("footer",{className:"bg-blue-100 text-center p-4 mt-8 text-sm text-gray-600",children:"Pie de página Estudiante"})]}),qv=()=>t.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100 text-center p-6",children:[t.jsx(Ve,{className:"w-16 h-16 text-red-500 mb-4"}),t.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:"404 - Página No Encontrada"}),t.jsx("p",{className:"text-lg text-gray-600 mb-6",children:"¡Ups! La página que buscas no existe."}),t.jsx(Be,{to:"/",className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition duration-300 ease-in-out",children:"Volver al Inicio"})]}),Gv=()=>{const o=()=>{console.log("Ver perfil")},n=()=>{console.log("Configuración")},r=()=>{console.log("Cerrar sesión")};return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Nd,{title:"Ejemplos de UserProfileBadge"}),t.jsxs("div",{className:"container mx-auto p-8",children:[t.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Ejemplos de UserProfileBadge"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Con Avatar"}),t.jsx("div",{className:"flex justify-center mb-4",children:t.jsx(da,{avatarUrl:"https://i.pravatar.cc/300?img=1",userName:"John Doe",userId:"user-1",userStatus:"online",onProfileClick:o,onSettingsClick:n,onLogoutClick:r})}),t.jsx("p",{className:"text-sm text-gray-600 text-center",children:'Muestra un avatar con un indicador de estado "online"'})]}),t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Sin Avatar (Fallback)"}),t.jsx("div",{className:"flex justify-center mb-4",children:t.jsx(da,{userName:"Jane Smith",userId:"user-2",userStatus:"offline",onProfileClick:o,onSettingsClick:n,onLogoutClick:r})}),t.jsx("p",{className:"text-sm text-gray-600 text-center",children:'Muestra iniciales con un indicador de estado "offline"'})]}),t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Con Nombre y Apellido"}),t.jsx("div",{className:"flex justify-center mb-4",children:t.jsx(da,{firstName:"Robert",lastName:"Johnson",userId:"user-3",userStatus:"away",onProfileClick:o,onSettingsClick:n,onLogoutClick:r})}),t.jsx("p",{className:"text-sm text-gray-600 text-center",children:'Muestra iniciales basadas en nombre y apellido con estado "away"'})]}),t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Color Personalizado"}),t.jsx("div",{className:"flex justify-center mb-4",children:t.jsx(da,{userName:"Custom Color",fallbackBgColor:"bg-pink-600",onProfileClick:o,onSettingsClick:n,onLogoutClick:r})}),t.jsx("p",{className:"text-sm text-gray-600 text-center",children:"Muestra iniciales con un color de fondo personalizado"})]}),t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Sin Estado"}),t.jsx("div",{className:"flex justify-center mb-4",children:t.jsx(da,{avatarUrl:"https://i.pravatar.cc/300?img=5",userName:"No Status",userId:"user-5",onProfileClick:o,onSettingsClick:n,onLogoutClick:r})}),t.jsx("p",{className:"text-sm text-gray-600 text-center",children:"Muestra un avatar sin indicador de estado"})]}),t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Tamaño Personalizado"}),t.jsx("div",{className:"flex justify-center mb-4",children:t.jsx("div",{className:"scale-150",children:t.jsx(da,{userName:"Larger Size",userId:"user-6",userStatus:"online",onProfileClick:o,onSettingsClick:n,onLogoutClick:r})})}),t.jsx("p",{className:"text-sm text-gray-600 text-center",children:"Muestra un badge con tamaño personalizado usando scale-150"})]})]})]})]})},Lv=()=>t.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 mt-6",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Guía de Funciones Serverless"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium mb-2",children:"Gestión de Usuarios"}),t.jsx("div",{className:"bg-gray-50 p-3 rounded-md",children:t.jsx("pre",{className:"text-sm overflow-auto",children:`// Crear un nuevo usuario
const result = await userManagementApi.createUser({
  email: 'usuario@ejemplo.com',
  password: 'contraseña',
  firstName: 'Nombre',
  lastName: 'Apellido',
  role: 'Psicologo'
});

// Actualizar un usuario existente
const result = await userManagementApi.updateUser('user-id', {
  email: 'nuevo@ejemplo.com',
  firstName: 'Nuevo Nombre',
  lastName: 'Nuevo Apellido',
  role: 'Administrador',
  active: true
});

// Eliminar un usuario
const result = await userManagementApi.deleteUser('user-id');

// Asignar un rol a un usuario
const result = await userManagementApi.assignRole('user-id', 'Administrador');`})})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium mb-2",children:"Gestión de Roles y Permisos"}),t.jsx("div",{className:"bg-gray-50 p-3 rounded-md",children:t.jsx("pre",{className:"text-sm overflow-auto",children:`// Crear un nuevo rol
const result = await roleManagementApi.createRole({
  name: 'Nuevo Rol',
  description: 'Descripción del rol'
});

// Actualizar un rol existente
const result = await roleManagementApi.updateRole('role-id', {
  name: 'Nombre Actualizado',
  description: 'Nueva descripción'
});

// Eliminar un rol
const result = await roleManagementApi.deleteRole('role-id');

// Asignar permisos a un rol
const result = await roleManagementApi.assignPermissions('role-id', [
  'permiso-id-1',
  'permiso-id-2'
]);

// Crear un nuevo módulo
const result = await roleManagementApi.createModule({
  name: 'Nuevo Módulo',
  key: 'nuevo_modulo',
  description: 'Descripción del módulo',
  icon: 'icon-name',
  order: 1
});

// Actualizar un módulo existente
const result = await roleManagementApi.updateModule('module-id', {
  name: 'Nombre Actualizado',
  key: 'clave_actualizada',
  description: 'Nueva descripción',
  icon: 'nuevo-icono',
  order: 2,
  active: true
});

// Eliminar un módulo
const result = await roleManagementApi.deleteModule('module-id');`})})]})]}),t.jsx("div",{className:"mt-4 text-sm text-gray-600",children:t.jsxs("p",{children:[t.jsx("strong",{children:"Nota:"})," Estas funciones requieren que el usuario tenga los permisos adecuados para ejecutarlas. Las funciones serverless validan los permisos del usuario antes de realizar cualquier operación."]})})]});var Pv=Object.defineProperty,Vv=Object.defineProperties,Hv=Object.getOwnPropertyDescriptors,Xf=Object.getOwnPropertySymbols,Iv=Object.prototype.hasOwnProperty,Yv=Object.prototype.propertyIsEnumerable,Ff=(o,n,r)=>n in o?Pv(o,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[n]=r,jl=(o,n)=>{for(var r in n||(n={}))Iv.call(n,r)&&Ff(o,r,n[r]);if(Xf)for(var r of Xf(n))Yv.call(n,r)&&Ff(o,r,n[r]);return o},Nl=(o,n)=>Vv(o,Hv(n)),Qv=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});const Xv=()=>{const{user:o,getAccessToken:n}=Bt(),[r,u]=v.useState({createUser:!1,updateUser:!1,deleteUser:!1,assignRole:!1,createRole:!1,updateRole:!1,deleteRole:!1,assignPermissions:!1,createModule:!1,updateModule:!1,deleteModule:!1}),[m,x]=v.useState(null),[p,f]=v.useState(null),[c,h]=v.useState({email:"test@example.com",password:"password123",firstName:"Test",lastName:"User",role:"Psicologo",userId:"",roleId:"",moduleId:"",name:"Nuevo Rol",description:"Descripción del nuevo rol",key:"nuevo_modulo",icon:"settings",order:1,active:!0,permissionIds:[]}),w=z=>{const{name:N,value:M}=z.target;h(Nl(jl({},c),{[N]:M}))},j=z=>{const{name:N,checked:M}=z.target;h(Nl(jl({},c),{[N]:M}))},C=(z,N)=>Qv(void 0,null,function*(){try{if(u(Nl(jl({},r),{[z]:!0})),f(null),!o){f("Debes iniciar sesión para ejecutar esta función"),u(Nl(jl({},r),{[z]:!1}));return}if(!(yield n())){f("No se pudo obtener el token de acceso. Por favor, inicia sesión de nuevo."),u(Nl(jl({},r),{[z]:!1}));return}const K=yield N();console.log(`${z} resultado:`,K),x(K)}catch(M){console.error(`Error en ${z}:`,M),f(M.message||`Error en ${z}`)}finally{u(Nl(jl({},r),{[z]:!1}))}}),y=()=>{C("createUser",()=>fi.createUser({email:c.email,password:c.password,firstName:c.firstName,lastName:c.lastName,role:c.role}))},O=()=>{if(!c.userId){f("Se requiere un ID de usuario");return}C("updateUser",()=>fi.updateUser(c.userId,{email:c.email,firstName:c.firstName,lastName:c.lastName,role:c.role,active:c.active}))},_=()=>{if(!c.userId){f("Se requiere un ID de usuario");return}C("deleteUser",()=>fi.deleteUser(c.userId))},$=()=>{if(!c.userId){f("Se requiere un ID de usuario");return}C("assignRole",()=>fi.assignRole(c.userId,c.role))},q=()=>{C("createRole",()=>Ds.createRole({name:c.name,description:c.description}))},k=()=>{if(!c.roleId){f("Se requiere un ID de rol");return}C("updateRole",()=>Ds.updateRole(c.roleId,{name:c.name,description:c.description}))},V=()=>{if(!c.roleId){f("Se requiere un ID de rol");return}C("deleteRole",()=>Ds.deleteRole(c.roleId))},F=()=>{if(!c.roleId){f("Se requiere un ID de rol");return}if(!c.permissionIds.length){f("Se requiere al menos un ID de permiso");return}C("assignPermissions",()=>Ds.assignPermissions(c.roleId,c.permissionIds))},E=()=>{C("createModule",()=>Ds.createModule({name:c.name,key:c.key,description:c.description,icon:c.icon,order:Number(c.order)}))},S=()=>{if(!c.moduleId){f("Se requiere un ID de módulo");return}C("updateModule",()=>Ds.updateModule(c.moduleId,{name:c.name,key:c.key,description:c.description,icon:c.icon,order:Number(c.order),active:c.active}))},D=()=>{if(!c.moduleId){f("Se requiere un ID de módulo");return}C("deleteModule",()=>Ds.deleteModule(c.moduleId))};return t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-100 to-indigo-200",children:[t.jsx(Nd,{}),t.jsxs("div",{className:"container mx-auto p-6",children:[t.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Prueba de Funciones Serverless"}),o?t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Formulario"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium mb-2",children:"Datos de Usuario"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),t.jsx("input",{type:"email",name:"email",value:c.email,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contraseña"}),t.jsx("input",{type:"password",name:"password",value:c.password,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre"}),t.jsx("input",{type:"text",name:"firstName",value:c.firstName,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Apellido"}),t.jsx("input",{type:"text",name:"lastName",value:c.lastName,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rol"}),t.jsxs("select",{name:"role",value:c.role,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[t.jsx("option",{value:"Administrador",children:"Administrador"}),t.jsx("option",{value:"Psicologo",children:"Psicólogo"}),t.jsx("option",{value:"Estudiante",children:"Estudiante"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Activo"}),t.jsx("input",{type:"checkbox",name:"active",checked:c.active,onChange:j,className:"h-4 w-4 text-blue-600 border-gray-300 rounded"})]})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium mb-2",children:"IDs para Operaciones"}),t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ID de Usuario"}),t.jsx("input",{type:"text",name:"userId",value:c.userId,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ID de Rol"}),t.jsx("input",{type:"text",name:"roleId",value:c.roleId,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ID de Módulo"}),t.jsx("input",{type:"text",name:"moduleId",value:c.moduleId,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium mb-2",children:"Datos de Rol/Módulo"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre"}),t.jsx("input",{type:"text",name:"name",value:c.name,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Clave (para módulos)"}),t.jsx("input",{type:"text",name:"key",value:c.key,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),t.jsxs("div",{className:"col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripción"}),t.jsx("textarea",{name:"description",value:c.description,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:2})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Icono (para módulos)"}),t.jsx("input",{type:"text",name:"icon",value:c.icon,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Orden (para módulos)"}),t.jsx("input",{type:"number",name:"order",value:c.order,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]})]})]})]}),t.jsxs("div",{className:"mt-6",children:[t.jsx("h3",{className:"text-lg font-medium mb-2",children:"Acciones"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-md font-medium mb-2",children:"Gestión de Usuarios"}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsx("button",{onClick:y,disabled:r.createUser,className:"px-3 py-1 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:r.createUser?"Creando...":"Crear Usuario"}),t.jsx("button",{onClick:O,disabled:r.updateUser,className:"px-3 py-1 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50",children:r.updateUser?"Actualizando...":"Actualizar Usuario"}),t.jsx("button",{onClick:_,disabled:r.deleteUser,className:"px-3 py-1 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50",children:r.deleteUser?"Eliminando...":"Eliminar Usuario"}),t.jsx("button",{onClick:$,disabled:r.assignRole,className:"px-3 py-1 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:opacity-50",children:r.assignRole?"Asignando...":"Asignar Rol"})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-md font-medium mb-2",children:"Gestión de Roles"}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsx("button",{onClick:q,disabled:r.createRole,className:"px-3 py-1 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:r.createRole?"Creando...":"Crear Rol"}),t.jsx("button",{onClick:k,disabled:r.updateRole,className:"px-3 py-1 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50",children:r.updateRole?"Actualizando...":"Actualizar Rol"}),t.jsx("button",{onClick:V,disabled:r.deleteRole,className:"px-3 py-1 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50",children:r.deleteRole?"Eliminando...":"Eliminar Rol"}),t.jsx("button",{onClick:F,disabled:r.assignPermissions,className:"px-3 py-1 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:opacity-50",children:r.assignPermissions?"Asignando...":"Asignar Permisos"})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-md font-medium mb-2",children:"Gestión de Módulos"}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsx("button",{onClick:E,disabled:r.createModule,className:"px-3 py-1 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:r.createModule?"Creando...":"Crear Módulo"}),t.jsx("button",{onClick:S,disabled:r.updateModule,className:"px-3 py-1 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50",children:r.updateModule?"Actualizando...":"Actualizar Módulo"}),t.jsx("button",{onClick:D,disabled:r.deleteModule,className:"px-3 py-1 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50",children:r.deleteModule?"Eliminando...":"Eliminar Módulo"})]})]})]})]})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Resultados"}),p&&t.jsxs("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-md",children:[t.jsx("h3",{className:"font-medium",children:"Error:"}),t.jsx("p",{children:p})]}),m&&t.jsxs("div",{className:"mb-4 p-3 bg-green-100 text-green-700 rounded-md",children:[t.jsx("h3",{className:"font-medium mb-2",children:"Resultado:"}),t.jsx("pre",{className:"text-sm overflow-auto max-h-60",children:JSON.stringify(m,null,2)})]}),t.jsx("div",{className:"text-sm text-gray-600",children:t.jsxs("p",{children:[t.jsx("strong",{children:"Nota:"})," Los resultados se mostrarán aquí después de ejecutar una acción."]})})]}),t.jsx(Lv,{})]})]}):t.jsxs("div",{className:"bg-white shadow-md rounded-lg p-8 text-center",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Autenticación Requerida"}),t.jsx("p",{className:"text-gray-700 mb-6",children:"Debes iniciar sesión para acceder a las funciones serverless."}),t.jsxs(Be,{to:"/login",className:"inline-flex items-center justify-center px-6 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition duration-300 ease-in-out text-base font-medium shadow-sm",children:[t.jsx(kp,{className:"mr-2 h-5 w-5"}),"Iniciar Sesión"]})]})]})]})};var Fv=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});const bi=({provider:o,buttonText:n=`Vincular con ${o}`,className:r="link-identity-button"})=>{const{isAuthenticated:u}=Bt(),[m,x]=v.useState(null),[p,f]=v.useState(!1),c=()=>Fv(void 0,null,function*(){if(!u){x("Debes iniciar sesión para vincular una identidad");return}x(null),f(!0);try{const{data:h,error:w}=yield Z.auth.linkIdentity({provider:o});if(w){console.error("Error al vincular identidad:",w),x(w.message||"Error al vincular identidad");return}console.log("Vinculación iniciada, redirigiendo...",h)}catch(h){console.error("Error inesperado:",h),x(h.message||"Error inesperado al vincular identidad")}finally{f(!1)}});return t.jsxs("div",{className:"link-identity-container",children:[m&&t.jsxs("div",{className:"flex items-center justify-center text-red-500 text-sm p-2 bg-red-50 rounded mb-4",children:[t.jsx(Zt,{className:"h-4 w-4 mr-2"}),t.jsx("span",{children:m})]}),t.jsx("button",{onClick:c,disabled:p||!u,className:r,children:p?"Vinculando...":n})]})};var Zf=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});const Zv=()=>{const o=ke(),{isAuthenticated:n,user:r,isLoading:u}=Bt(),[m,x]=v.useState([]),[p,f]=v.useState(!0);v.useEffect(()=>{!u&&!n&&o("/login")},[n,u,o]),v.useEffect(()=>{Zf(void 0,null,function*(){if(!(!n||!r))try{f(!0);const{data:w,error:j}=yield Z.auth.getUserIdentities();if(j){console.error("Error al obtener identidades:",j);return}x((w==null?void 0:w.identities)||[])}catch(w){console.error("Error al cargar identidades:",w)}finally{f(!1)}})},[n,r]);const c=(h,w)=>Zf(void 0,null,function*(){try{const{error:j}=yield Z.auth.unlinkIdentity({provider:h,id:w});if(j){console.error("Error al desvincular identidad:",j);return}x(C=>C.filter(y=>y.id!==w))}catch(j){console.error("Error al desvincular identidad:",j)}});return u?t.jsx("div",{className:"min-h-screen flex items-center justify-center",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-800"})}):t.jsx("div",{className:"min-h-screen bg-blue-50 py-12 px-4",children:t.jsxs("div",{className:"max-w-md mx-auto bg-white rounded-lg shadow-md p-6",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Vincular Identidades"}),t.jsxs("div",{className:"mb-6 p-4 bg-blue-50 rounded-md",children:[t.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Usuario actual"}),t.jsxs("p",{children:[t.jsx("strong",{children:"Email:"})," ",r==null?void 0:r.email]}),t.jsxs("p",{children:[t.jsx("strong",{children:"ID:"})," ",r==null?void 0:r.id]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Identidades vinculadas"}),p?t.jsx("div",{className:"flex justify-center p-4",children:t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-blue-800"})}):m.length>0?t.jsx("ul",{className:"divide-y divide-gray-200",children:m.map(h=>t.jsxs("li",{className:"py-3 flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:h.provider}),t.jsx("p",{className:"text-sm text-gray-500",children:h.email||h.id})]}),t.jsx("button",{onClick:()=>c(h.provider,h.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Desvincular"})]},h.id))}):t.jsx("p",{className:"text-gray-500 text-center py-3",children:"No hay identidades vinculadas"})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Vincular nueva identidad"}),t.jsx(bi,{provider:"google",buttonText:"Vincular con Google",className:"link-identity-button google-button"}),t.jsx(bi,{provider:"github",buttonText:"Vincular con GitHub",className:"link-identity-button github-button"}),t.jsx(bi,{provider:"facebook",buttonText:"Vincular con Facebook",className:"link-identity-button facebook-button"}),t.jsx(bi,{provider:"twitter",buttonText:"Vincular con Twitter",className:"link-identity-button twitter-button"})]}),t.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:t.jsx("button",{onClick:()=>o("/"),className:"w-full py-2 px-4 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Volver al inicio"})})]})})},Hr=({children:o,requiredPermission:n,requiredRole:r})=>{const{isAuthenticated:u,isLoading:m,profile:x}=Bt(),p=pd(),f=()=>{try{const j=localStorage.getItem("student_session");if(j){const C=JSON.parse(j);return C&&C.id&&C.role==="student"}return!1}catch(j){return console.error("Error verificando sesión de estudiante:",j),!1}},c=()=>{var j;return n?((j=x==null?void 0:x.permissions)==null?void 0:j.includes(n))||!1:!0},h=()=>!r||r==="student"&&f()?!0:(x==null?void 0:x.role)===r;return m?t.jsx("div",{className:"min-h-screen flex items-center justify-center",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-800"})}):u||f()?!c()||!h()?(console.log("ProtectedRoute: Sin permisos suficientes"),t.jsx(Ti,{to:"/acceso-denegado",replace:!0})):t.jsx(t.Fragment,{children:o}):(console.log("ProtectedRoute: No autenticado, redirigiendo a página de inicio"),t.jsx(Ti,{to:"/",state:{from:p.pathname},replace:!0}))};var Kv=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});const Jv=()=>{var o;const n=ke(),r=pd(),{isAuthenticated:u,isLoading:m,refreshUser:x}=Bt(),[p,f]=v.useState("Verificando autenticación..."),[c,h]=v.useState(null),w=((o=r.state)==null?void 0:o.from)||"/";return v.useEffect(()=>{m||Kv(void 0,null,function*(){try{yield x(),setTimeout(()=>{u?(f("Sesión activa, redirigiendo..."),setTimeout(()=>{n(w,{replace:!0})},500)):(h("No hay sesión activa"),setTimeout(()=>{n("/login",{replace:!0})},1e3))},500)}catch(C){console.error("Error al verificar autenticación:",C),h(C.message||"Error al verificar autenticación"),setTimeout(()=>{n("/login",{replace:!0})},1e3)}})},[m,u,n,w,x]),t.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50",children:t.jsxs("div",{className:"max-w-md w-full p-6 bg-white rounded-lg shadow-md",children:[t.jsx("h2",{className:"text-2xl font-bold text-center text-gray-800 mb-4",children:c?"Error de Autenticación":"Autenticación"}),!c&&t.jsx("div",{className:"flex justify-center mb-4",children:t.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-blue-800"})}),t.jsx("p",{className:"text-center text-gray-600",children:c||p}),c&&t.jsx("div",{className:"mt-4 text-center",children:t.jsx("button",{onClick:()=>n("/login",{replace:!0}),className:"px-4 py-2 bg-blue-800 text-white rounded-md hover:bg-blue-900",children:"Volver al Login"})})]})})},Wv=v.createContext(void 0),ey=({children:o})=>{const{profile:n}=Bt(),r=c=>!n||!n.permissions?!1:n.permissions.includes(c),u=c=>!n||!n.role?!1:n.role===c,m=(n==null?void 0:n.role)==="admin",x=(n==null?void 0:n.role)==="teacher",p=(n==null?void 0:n.role)==="student",f={hasPermission:r,hasRole:u,isAdmin:m,isTeacher:x,isStudent:p};return t.jsx(Wv.Provider,{value:f,children:o})};var ty=Object.defineProperty,ay=Object.defineProperties,sy=Object.getOwnPropertyDescriptors,Kf=Object.getOwnPropertySymbols,ly=Object.prototype.hasOwnProperty,ry=Object.prototype.propertyIsEnumerable,Jf=(o,n,r)=>n in o?ty(o,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[n]=r,vi=(o,n)=>{for(var r in n||(n={}))ly.call(n,r)&&Jf(o,r,n[r]);if(Kf)for(var r of Kf(n))ry.call(n,r)&&Jf(o,r,n[r]);return o},yi=(o,n)=>ay(o,sy(n)),ny=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});const iy={groupId:null,groupName:null,institutionName:null,totalStudents:0,completedQuestionnaires:0,schoolYear:null,isLoading:!1,error:null},oy=v.createContext(void 0),r0=({children:o})=>{const[n,r]=v.useState(iy),u=x=>{r(p=>yi(vi({},p),{groupId:x}))},m=x=>ny(void 0,null,function*(){var p;const f=x||n.groupId;if(!f){r(c=>yi(vi({},c),{error:"No se ha especificado un grupo",isLoading:!1}));return}r(c=>yi(vi({},c),{isLoading:!0,error:null}));try{const{data:c,error:h}=yield Z.from("grupos").select("*, instituciones_educativas(nombre)").eq("id",f).single();if(h)throw new Error(`Error al cargar datos del grupo: ${h.message}`);const{count:w,error:j}=yield Z.from("estudiantes").select("*",{count:"exact",head:!0}).eq("grupo_id",f);if(j)throw new Error(`Error al contar estudiantes: ${j.message}`);const{data:C,error:y}=yield Z.from("respuestas").select("estudiante_id",{count:"exact"}).eq("grupo_id",f).limit(1);if(y)throw new Error(`Error al contar cuestionarios completados: ${y.message}`);r({groupId:f,groupName:c.nombre,institutionName:((p=c.instituciones_educativas)==null?void 0:p.nombre)||"Institución desconocida",totalStudents:w||0,completedQuestionnaires:(C==null?void 0:C.length)||0,schoolYear:c.año_escolar||"Año escolar no especificado",isLoading:!1,error:null})}catch(c){console.error("Error al cargar datos del dashboard:",c),r(h=>yi(vi({},h),{isLoading:!1,error:c instanceof Error?c.message:"Error desconocido al cargar datos"}))}});return v.useEffect(()=>{n.groupId&&m()},[n.groupId]),t.jsx(oy.Provider,{value:{dashboardData:n,refreshData:m,setGroupId:u},children:o})};var td=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});function cy(){const o=ke(),{login:n}=Bt(),[r,u]=v.useState(""),[m,x]=v.useState(""),[p,f]=v.useState(""),[c,h]=v.useState(!1),[w,j]=v.useState(!1),[C,y]=v.useState([]),[O,_]=v.useState([]),[$,q]=v.useState(""),[k,V]=v.useState(!1);v.useEffect(()=>{F()},[]),v.useEffect(()=>{r?E(r):(_([]),x(""))},[r]);const F=()=>td(this,null,function*(){try{V(!0),console.log("Cargando grados desde Supabase...");const{data:z,error:N}=yield Z.from("grupos").select("id, nombre, grado").eq("institucion_id","8a9ab6bb-4f0e-4eb9-905d-f16049464305").order("nombre");if(N){console.error("Error cargando grados desde Supabase:",N),q("Error al cargar los grados. Por favor, intenta de nuevo más tarde.");return}z&&z.length>0?(console.log("Grados cargados desde Supabase:",z),y(z)):(console.error("No se encontraron grados en Supabase"),q("No se encontraron grados disponibles. Por favor, contacta al administrador."))}catch(z){console.error("Error cargando grados:",z),q("Error al cargar los grados. Por favor, intenta de nuevo más tarde.")}finally{V(!1)}}),E=z=>td(this,null,function*(){try{V(!0),console.log("Cargando estudiantes para grado:",z);const{data:N,error:M}=yield Z.from("estudiantes").select("id, nombre_estudiante, apellido_estudiante, numero_documento, edad, grado").eq("grupo_id",z).order("nombre_estudiante");if(M){console.error("Error cargando estudiantes desde Supabase:",M),q("Error al cargar los estudiantes. Por favor, intenta de nuevo más tarde.");return}N&&N.length>0?(console.log("Estudiantes cargados desde Supabase:",N),_(N)):(console.error("No se encontraron estudiantes para el grado seleccionado"),q("No se encontraron estudiantes para el grado seleccionado. Por favor, contacta al administrador.")),x("")}catch(N){console.error("Error cargando estudiantes:",N),q("Error al cargar los estudiantes. Por favor, intenta de nuevo más tarde.")}finally{V(!1)}}),S=z=>td(this,null,function*(){z.preventDefault(),q(""),V(!0);try{const N=O.find(M=>M.id===m);if(N&&N.numero_documento===p){console.log("Autenticación exitosa para:",`${N.nombre_estudiante} ${N.apellido_estudiante}`);const M=C.find(G=>G.id===r),K={id:N.id,name:`${N.nombre_estudiante} ${N.apellido_estudiante}`,documento:N.numero_documento,edad:N.edad,grado:(M==null?void 0:M.nombre)||N.grado,grupoId:r,role:"student",loginTime:new Date().toISOString()};localStorage.setItem("student_session",JSON.stringify(K)),setTimeout(()=>{console.log("Redirigiendo a /student/questionnaire..."),o("/student/questionnaire",{replace:!0})},100)}else q("Grado, nombre de estudiante o clave incorrectos.")}catch(N){console.error("Error en login:",N),q("Error al iniciar sesión. Inténtalo de nuevo.")}finally{V(!1)}}),D=()=>{o("/auth")};return t.jsxs("div",{className:"min-h-screen flex",children:[t.jsxs("div",{className:"flex-1 bg-gradient-to-br from-blue-600 via-blue-700 to-purple-800 text-white p-12 flex flex-col justify-center relative overflow-hidden",children:[t.jsxs("div",{className:"absolute inset-0 opacity-10",children:[t.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 bg-white rounded-full"}),t.jsx("div",{className:"absolute bottom-32 right-16 w-24 h-24 bg-white rounded-full"}),t.jsx("div",{className:"absolute top-1/2 right-1/3 w-16 h-16 bg-white rounded-full"})]}),t.jsxs("div",{className:"relative z-10 max-w-lg",children:[t.jsxs("div",{className:"flex items-center mb-6",children:[t.jsx("div",{className:"bg-orange-500 rounded-full p-3 mr-4",children:t.jsx(Rs,{className:"w-8 h-8 text-white"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-4xl font-bold",children:"BULL-S"}),t.jsx("p",{className:"text-blue-200 text-lg",children:"Sistema de Gestión Académica"})]})]}),t.jsxs("h2",{className:"text-3xl font-bold mb-4 leading-tight",children:["Bienvenido al Futuro de la",t.jsx("span",{className:"text-orange-400",children:" Educación Personalizada"})]}),t.jsx("p",{className:"text-blue-100 text-lg mb-8 leading-relaxed",children:"Plataforma de nueva generación para el seguimiento académico inteligente y análisis de progreso."}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-start",children:[t.jsx("div",{className:"bg-orange-500 rounded-full p-2 mr-4 mt-1",children:t.jsx(Ol,{className:"w-5 h-5 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-lg mb-1",children:"Aprendizaje Adaptativo"}),t.jsx("p",{className:"text-blue-200",children:"Contenido ajustado a tu ritmo."})]})]}),t.jsxs("div",{className:"flex items-start",children:[t.jsx("div",{className:"bg-orange-500 rounded-full p-2 mr-4 mt-1",children:t.jsx(fd,{className:"w-5 h-5 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-lg mb-1",children:"Progreso en Tiempo Real"}),t.jsx("p",{className:"text-blue-200",children:"Monitorea tu avance al instante."})]})]}),t.jsxs("div",{className:"flex items-start",children:[t.jsx("div",{className:"bg-orange-500 rounded-full p-2 mr-4 mt-1",children:t.jsx(Ut,{className:"w-5 h-5 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-lg mb-1",children:"Seguridad Total"}),t.jsx("p",{className:"text-blue-200",children:"Datos protegidos y privados."})]})]})]})]})]}),t.jsx("div",{className:"flex-1 bg-gray-50 p-12 flex flex-col justify-center",children:t.jsxs("div",{className:"max-w-md mx-auto w-full",children:[t.jsxs("button",{onClick:D,className:"mb-6 flex items-center text-gray-600 hover:text-gray-800 transition-colors",children:[t.jsx($t,{className:"w-5 h-5 mr-2"}),"Volver"]}),t.jsxs("div",{className:"mb-8",children:[t.jsx("h2",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-4",children:"TIPO DE USUARIO"}),t.jsx("div",{className:"bg-orange-100 border-2 border-orange-300 rounded-lg p-4 relative",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-orange-500 rounded-full p-2 mr-3",children:t.jsx(Rs,{className:"w-5 h-5 text-white"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-semibold text-gray-800",children:"Estudiante"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Acceso a tu progreso académico y recursos."})]}),t.jsx("div",{className:"absolute top-3 right-3 w-4 h-4 bg-orange-500 rounded-full"})]})})]}),$&&t.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg flex items-center",children:[t.jsx(Zt,{className:"w-5 h-5 mr-2 flex-shrink-0"}),t.jsx("span",{className:"text-sm",children:$})]}),t.jsxs("form",{onSubmit:S,className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"grade-select",className:"block text-sm font-medium text-gray-700 mb-2",children:"Grado"}),t.jsxs("div",{className:"relative",children:[t.jsx(mt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),t.jsxs("select",{id:"grade-select",value:r,onChange:z=>u(z.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-white",required:!0,children:[t.jsx("option",{value:"",children:"Selecciona tu grado"}),C.map(z=>t.jsx("option",{value:z.id,children:z.nombre},z.id))]})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"student-select",className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre"}),t.jsxs("div",{className:"relative",children:[t.jsx(mt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),t.jsxs("select",{id:"student-select",value:m,onChange:z=>x(z.target.value),disabled:!r,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-white disabled:bg-gray-100 disabled:cursor-not-allowed",required:!0,children:[t.jsx("option",{value:"",children:"Selecciona tu nombre"}),O.map(z=>t.jsxs("option",{value:z.id,children:[z.nombre_estudiante," ",z.apellido_estudiante]},z.id))]})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Contraseña"}),t.jsxs("div",{className:"relative",children:[t.jsx(mt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),t.jsx("input",{type:c?"text":"password",id:"password",value:p,onChange:z=>f(z.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Ingresa tu clave",required:!0}),t.jsx("button",{type:"button",onClick:()=>h(!c),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:c?t.jsx(Up,{className:"w-5 h-5"}):t.jsx(xd,{className:"w-5 h-5"})})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:w,onChange:z=>j(z.target.checked),className:"w-4 h-4 text-orange-500 border-gray-300 rounded focus:ring-orange-500"}),t.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Recordarme"})]}),t.jsx("a",{href:"#",className:"text-sm text-orange-600 hover:text-orange-800",children:"¿Olvidaste tu clave?"})]}),t.jsxs("button",{type:"submit",disabled:k||!r||!m||!p,className:"w-full bg-gradient-to-r from-orange-500 to-red-500 text-white py-3 px-4 rounded-lg hover:from-orange-600 hover:to-red-600 focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-medium flex items-center justify-center",children:[t.jsx(mt,{className:"w-5 h-5 mr-2"}),k?"Iniciando Sesión...":"Iniciar Sesión"]})]})]})})]})}var dy=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});const uy=()=>{const o=ke(),{login:n}=Bt(),[r,u]=v.useState(""),[m,x]=v.useState(""),[p,f]=v.useState(!1),[c,h]=v.useState(null),w=j=>dy(void 0,null,function*(){j.preventDefault();try{f(!0),h(null);const C=yield n(r,m);if(!C.success){h(C.message||"Error al iniciar sesión");return}o("/admin")}catch(C){console.error("Error during admin login:",C),h(C.message||"Error al iniciar sesión")}finally{f(!1)}});return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 w-full max-w-md",children:[t.jsxs("div",{className:"flex items-center mb-6",children:[t.jsx(Be,{to:"/",className:"mr-3 p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-full transition-colors",children:t.jsx($t,{className:"h-5 w-5"})}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(Gx,{className:"h-6 w-6 text-gray-700 mr-2"}),t.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Acceso Administrador"})]})]}),c&&t.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:c}),t.jsxs("form",{onSubmit:w,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Correo electrónico"}),t.jsxs("div",{className:"relative",children:[t.jsx(zi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),t.jsx("input",{type:"email",id:"email",value:r,onChange:j=>u(j.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent",placeholder:"admin@ejemplo.com",required:!0})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Contraseña"}),t.jsxs("div",{className:"relative",children:[t.jsx(Hx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),t.jsx("input",{type:"password",id:"password",value:m,onChange:j=>x(j.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent",placeholder:"••••••••",required:!0})]})]}),t.jsx("button",{type:"submit",disabled:p,className:"w-full bg-gray-700 text-white py-2 px-4 rounded-md hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:p?"Ingresando...":"Ingresar como Administrador"})]}),t.jsx("div",{className:"mt-6 text-center",children:t.jsx(Be,{to:"/admin/forgot-password",className:"text-sm text-gray-600 hover:text-gray-800 transition-colors",children:"¿Olvidaste tu contraseña?"})})]})})};var my=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});const hy=()=>{const o=ke(),{login:n}=Bt(),[r,u]=v.useState(""),[m,x]=v.useState(""),[p,f]=v.useState(!1),[c,h]=v.useState(null),w=j=>my(void 0,null,function*(){j.preventDefault();try{f(!0),h(null);const C=yield n(r,m);if(!C.success){h(C.message||"Error al iniciar sesión");return}o("/serverless")}catch(C){console.error("Error during serverless login:",C),h(C.message||"Error al iniciar sesión")}finally{f(!1)}});return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-100 to-purple-200 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 w-full max-w-md",children:[t.jsxs("div",{className:"flex items-center mb-6",children:[t.jsx(Be,{to:"/",className:"mr-3 p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-full transition-colors",children:t.jsx($t,{className:"h-5 w-5"})}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(Ut,{className:"h-6 w-6 text-purple-600 mr-2"}),t.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Funciones Serverless"})]})]}),c&&t.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:c}),t.jsxs("form",{onSubmit:w,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Correo electrónico"}),t.jsxs("div",{className:"relative",children:[t.jsx(zi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),t.jsx("input",{type:"email",id:"email",value:r,onChange:j=>u(j.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"developer@ejemplo.com",required:!0})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Contraseña"}),t.jsxs("div",{className:"relative",children:[t.jsx(Hx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),t.jsx("input",{type:"password",id:"password",value:m,onChange:j=>x(j.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"••••••••",required:!0})]})]}),t.jsx("button",{type:"submit",disabled:p,className:"w-full bg-purple-600 text-white py-2 px-4 rounded-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:p?"Ingresando...":"Acceder a Funciones Serverless"})]}),t.jsx("div",{className:"mt-6 text-center",children:t.jsx(Be,{to:"/serverless/forgot-password",className:"text-sm text-gray-600 hover:text-gray-800 transition-colors",children:"¿Olvidaste tu contraseña?"})})]})})};var ji=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});class fy{parseBullsData(n){return ji(this,null,function*(){try{const{data:r,error:u}=yield Z.from("grupos").select(`
          id,
          nombre,
          institucion_id,
          estudiantes (
            id,
            nombre_estudiante,
            apellido_estudiante,
            edad,
            genero
          )
        `).eq("id",n).single();if(u)throw u;const m=r.estudiantes.map(f=>f.id),{data:x,error:p}=yield Z.from("respuestas").select("*").in("estudiante_id",m);if(p&&p.code!=="42P01")throw p;return{grupo_id:r.id,grupo_nombre:r.nombre,institucion_id:r.institucion_id,estudiantes:r.estudiantes.map(f=>({id:f.id,nombre:f.nombre_estudiante,apellido:f.apellido_estudiante,edad:f.edad,genero:f.genero})),respuestas:x||[],fecha_evaluacion:new Date().toISOString()}}catch(r){return console.error("Error parsing BULL-S data:",r),null}})}generateExampleData(n){const r={1:{nombre:"6B",estudiantes:25},2:{nombre:"8A",estudiantes:30},3:{nombre:"8B",estudiantes:28}},u=r[n]||r[1],m=Array.from({length:u.estudiantes},(f,c)=>({id:`${n}_student_${c+1}`,nombre:`Estudiante${c+1}`,apellido:`Apellido${c+1}`,edad:n==="1"?11+c%2:13+c%2,genero:c%2===0?"M":"F"})),x=[],p=["play_with","work_with","best_friend","reject","aggressor","victim"];return m.forEach(f=>{p.forEach(c=>{const h=Math.floor(Math.random()*2)+2,w=this.getRandomPeers(f.id,m,h);x.push({id:`${f.id}_${c}`,estudiante_id:f.id,pregunta_id:c,respuesta:c,companeros_seleccionados:w,created_at:new Date().toISOString()})})}),{grupo_id:n,grupo_nombre:u.nombre,institucion_id:"1",estudiantes:m,respuestas:x,fecha_evaluacion:new Date().toISOString()}}getRandomPeers(n,r,u){const m=r.filter(p=>p.id!==n),x=[];for(let p=0;p<Math.min(u,m.length);p++){const f=Math.floor(Math.random()*m.length);x.push(m[f].id),m.splice(f,1)}return x}processSociometricData(n){return ji(this,null,function*(){const r=this.createSociometricNodes(n),u=this.createSociometricEdges(n);this.calculateSociometricIndices(r,u);const m=this.identifySocialClusters(r,u),x=this.calculateGroupMetrics(r,u),p=this.identifyRiskIndicators(r,u),f=this.generateRecommendations(r,u,p);return{nodes:r,edges:u,clusters:m,groupMetrics:x,riskIndicators:p,recommendations:f}})}createSociometricNodes(n){return n.estudiantes.map(r=>({id:r.id,name:r.nombre,fullName:`${r.nombre} ${r.apellido}`,age:r.edad,gender:r.genero,grupo_id:n.grupo_id,popularityScore:0,rejectionScore:0,isolationLevel:0,centralityMeasure:0,socialStatus:"average",bullyingRisk:"low",victimizationRisk:"low"}))}createSociometricEdges(n){const r=[];return n.respuestas.forEach(u=>{if(!u.companeros_seleccionados)return;const m=this.getEdgeType(u.pregunta_id),x=this.getEdgeWeight(u.pregunta_id);u.companeros_seleccionados.forEach(p=>{r.push({source:u.estudiante_id,target:p,type:m,weight:x,reciprocal:!1,questionType:u.pregunta_id})})}),this.calculateReciprocity(r),r}getEdgeType(n){const r=["play_with","work_with","best_friend"],u=["reject","aggressor"];return r.includes(n)?"positive":u.includes(n)?"negative":"neutral"}getEdgeWeight(n){return{best_friend:3,play_with:2,work_with:2,reject:-2,aggressor:-3,victim:1}[n]||1}calculateReciprocity(n){n.forEach(r=>{const u=n.find(m=>m.source===r.target&&m.target===r.source&&m.questionType===r.questionType);u&&(r.reciprocal=!0,u.reciprocal=!0)})}calculateSociometricIndices(n,r){n.forEach(u=>{const m=r.filter(h=>h.target===u.id&&h.type==="positive");u.popularityScore=m.reduce((h,w)=>h+w.weight,0);const x=r.filter(h=>h.target===u.id&&h.type==="negative");u.rejectionScore=Math.abs(x.reduce((h,w)=>h+w.weight,0));const p=r.filter(h=>h.source===u.id||h.target===u.id).length;u.isolationLevel=Math.max(0,10-p);const f=r.filter(h=>h.source===u.id),c=r.filter(h=>h.target===u.id);u.centralityMeasure=(f.length+c.length)/2,u.socialStatus=this.determineSocialStatus(u),u.bullyingRisk=this.assessBullyingRisk(u,r),u.victimizationRisk=this.assessVictimizationRisk(u,r)})}determineSocialStatus(n){const{popularityScore:r,rejectionScore:u,isolationLevel:m}=n;return r>=6&&u<=2?"popular":u>=4&&r<=2?"rejected":m>=7?"isolated":r>=4&&u>=4?"controversial":"average"}assessBullyingRisk(n,r){const u=r.filter(p=>p.target===n.id&&p.questionType==="aggressor").length,m=n.popularityScore>=6,x=n.rejectionScore>=4;return u>=3||m&&x?"high":u>=1||x?"medium":"low"}assessVictimizationRisk(n,r){const u=r.filter(p=>p.target===n.id&&p.questionType==="victim").length,m=n.isolationLevel>=6,x=n.rejectionScore>=4;return u>=3||m&&x?"high":u>=1||m||x?"medium":"low"}identifySocialClusters(n,r){const u=[],m=new Set;return n.forEach(x=>{if(m.has(x.id))return;const p=this.findConnectedComponent(x.id,n,r,m);if(p.length>=3){const f=this.calculateClusterCohesion(p,r),c=this.findCentralMember(p,r),h=p.filter(w=>{var j;return((j=n.find(C=>C.id===w))==null?void 0:j.isolationLevel)>=5});u.push({id:`cluster_${u.length+1}`,members:p,cohesionScore:f,size:p.length,centralMember:c,isolatedMembers:h})}}),u}findConnectedComponent(n,r,u,m){const x=[],p=[n];for(;p.length>0;){const f=p.shift();if(m.has(f))continue;m.add(f),x.push(f),u.filter(h=>(h.source===f||h.target===f)&&h.type==="positive"&&h.weight>=2).forEach(h=>{const w=h.source===f?h.target:h.source;m.has(w)||p.push(w)})}return x}calculateClusterCohesion(n,r){if(n.length<2)return 0;const u=n.length*(n.length-1);return r.filter(x=>n.includes(x.source)&&n.includes(x.target)&&x.type==="positive").length/u*100}findCentralMember(n,r){let u=0,m=n[0];return n.forEach(x=>{const p=r.filter(f=>(f.source===x||f.target===x)&&n.includes(f.source)&&n.includes(f.target)&&f.type==="positive").length;p>u&&(u=p,m=x)}),m}calculateGroupMetrics(n,r){const u=n.length,m=r.filter($=>$.type==="positive"),x=r.filter($=>$.reciprocal),p=m.length/u*10,f=u*(u-1),c=r.length/f*100,h=n.map($=>$.centralityMeasure),w=h.reduce(($,q)=>$+q,0)/u,j=h.reduce(($,q)=>$+Math.pow(q-w,2),0)/u,C=Math.sqrt(j),O=n.filter($=>$.isolationLevel>=6).length/u*100,_=x.length/r.length*100;return{cohesionIndex:Math.round(p),densityIndex:Math.round(c),centralityDistribution:Math.round(C),isolationRate:Math.round(O),reciprocityRate:Math.round(_)}}identifyRiskIndicators(n,r){return{highRiskStudents:n.filter(u=>u.bullyingRisk==="high"||u.victimizationRisk==="high").map(u=>u.id),potentialVictims:n.filter(u=>u.victimizationRisk==="high"||u.socialStatus==="rejected").map(u=>u.id),potentialAggressors:n.filter(u=>u.bullyingRisk==="high").map(u=>u.id),isolatedStudents:n.filter(u=>u.socialStatus==="isolated").map(u=>u.id),controversialStudents:n.filter(u=>u.socialStatus==="controversial").map(u=>u.id)}}generateRecommendations(n,r,u){const m=[];return u.highRiskStudents.length>0&&m.push(`Atención inmediata requerida para ${u.highRiskStudents.length} estudiante(s) de alto riesgo`),u.isolatedStudents.length>0&&m.push(`Implementar actividades de integración para ${u.isolatedStudents.length} estudiante(s) aislado(s)`),u.potentialVictims.length>0&&m.push(`Monitoreo cercano y apoyo para ${u.potentialVictims.length} potencial(es) víctima(s)`),n.reduce((c,h)=>c+h.centralityMeasure,0)/n.length<3&&m.push("Implementar actividades grupales para mejorar la cohesión social"),r.filter(c=>c.reciprocal).length/r.length*100<40&&m.push("Fomentar actividades que promuevan relaciones recíprocas"),m}generateAnalysisReport(n,r){return ji(this,null,function*(){return`
# Análisis Sociométrico BULL-S
## Grupo: ${r.grupo_nombre}
## Fecha: ${new Date(r.fecha_evaluacion).toLocaleDateString("es-ES")}

### Resumen Ejecutivo
- **Total de estudiantes**: ${r.estudiantes.length}
- **Respuestas analizadas**: ${r.respuestas.length}
- **Índice de cohesión grupal**: ${n.groupMetrics.cohesionIndex}%
- **Tasa de aislamiento**: ${n.groupMetrics.isolationRate}%

### Indicadores de Riesgo
- **Estudiantes de alto riesgo**: ${n.riskIndicators.highRiskStudents.length}
- **Potenciales víctimas**: ${n.riskIndicators.potentialVictims.length}
- **Potenciales agresores**: ${n.riskIndicators.potentialAggressors.length}
- **Estudiantes aislados**: ${n.riskIndicators.isolatedStudents.length}

### Análisis de Red Social
- **Densidad de la red**: ${n.groupMetrics.densityIndex}%
- **Tasa de reciprocidad**: ${n.groupMetrics.reciprocityRate}%
- **Clusters sociales identificados**: ${n.clusters.length}

### Recomendaciones
${n.recommendations.map(m=>`- ${m}`).join(`
`)}

### Estudiantes que Requieren Atención Especial
${n.nodes.filter(m=>m.bullyingRisk==="high"||m.victimizationRisk==="high").map(m=>`- ${m.fullName}: ${m.socialStatus} (Riesgo: ${m.bullyingRisk}/${m.victimizationRisk})`).join(`
`)}
`})}exportAnalysisData(n,r){return ji(this,null,function*(){try{const u=new Date().toISOString().split("T")[0],m=`analisis_sociometrico_${r.grupo_nombre}_${u}`,x=yield this.generateAnalysisReport(n,r),p={metadata:{grupo:r.grupo_nombre,fecha:r.fecha_evaluacion,total_estudiantes:r.estudiantes.length},analysis:n,raw_data:r};console.log("📊 Análisis sociométrico completado"),console.log("📁 Datos exportados:",{report:`${m}.md`,data:`${m}.json`,nodes:n.nodes.length,edges:n.edges.length,clusters:n.clusters.length}),typeof window!="undefined"&&(localStorage.setItem(`bulls_analysis_${r.grupo_id}`,JSON.stringify(p)),localStorage.setItem(`bulls_report_${r.grupo_id}`,x))}catch(u){console.error("Error exporting analysis data:",u)}})}}const ua=new fy;var ad=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});const xy=({grupoId:o,className:n=""})=>{const[r,u]=v.useState(!1),[m,x]=v.useState(!1),p=()=>ad(void 0,null,function*(){u(!0);try{const j=yield ua.executeCompleteAnalysis(void 0,void 0,o||"grupo_6ab_lasalle"),C=h(j),y=new Blob([C],{type:"text/html"}),O=URL.createObjectURL(y),_=document.createElement("a");_.href=O,_.download=`reporte-bulls-${new Date().toISOString().split("T")[0]}.html`,document.body.appendChild(_),_.click(),document.body.removeChild(_),URL.revokeObjectURL(O)}catch(j){console.error("Error al exportar PDF:",j),alert("Error al generar el reporte. Por favor intenta de nuevo.")}finally{u(!1),x(!1)}}),f=()=>ad(void 0,null,function*(){u(!0);try{const j=yield ua.executeCompleteAnalysis(void 0,void 0,o||"grupo_6ab_lasalle"),C=w(j),y=new Blob([C],{type:"text/csv;charset=utf-8;"}),O=URL.createObjectURL(y),_=document.createElement("a");_.href=O,_.download=`datos-bulls-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(_),_.click(),document.body.removeChild(_),URL.revokeObjectURL(O)}catch(j){console.error("Error al exportar CSV:",j),alert("Error al generar el archivo CSV. Por favor intenta de nuevo.")}finally{u(!1),x(!1)}}),c=()=>ad(void 0,null,function*(){u(!0);try{const j=yield ua.executeCompleteAnalysis(void 0,void 0,o||"grupo_6ab_lasalle"),C=JSON.stringify(j,null,2),y=new Blob([C],{type:"application/json"}),O=URL.createObjectURL(y),_=document.createElement("a");_.href=O,_.download=`reporte-completo-bulls-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(_),_.click(),document.body.removeChild(_),URL.revokeObjectURL(O)}catch(j){console.error("Error al exportar JSON:",j),alert("Error al generar el archivo JSON. Por favor intenta de nuevo.")}finally{u(!1),x(!1)}}),h=j=>`
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Análisis Sociométrico BULL-S - ${new Date().toLocaleDateString()}</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.6; }
        .header { text-align: center; border-bottom: 2px solid #3b82f6; padding-bottom: 20px; margin-bottom: 30px; }
        .section { margin-bottom: 30px; }
        .kpi-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 20px 0; }
        .kpi-card { border: 1px solid #e5e7eb; padding: 15px; border-radius: 8px; text-align: center; }
        .kpi-value { font-size: 24px; font-weight: bold; color: #3b82f6; }
        .table { width: 100%; border-collapse: collapse; margin: 15px 0; }
        .table th, .table td { border: 1px solid #e5e7eb; padding: 8px; text-align: left; }
        .table th { background-color: #f9fafb; font-weight: bold; }
        .alert { border-left: 4px solid #ef4444; background-color: #fef2f2; padding: 15px; margin: 10px 0; }
        .recommendation { background-color: #f0f9ff; border-left: 4px solid #3b82f6; padding: 15px; margin: 10px 0; }
        .footer { text-align: center; margin-top: 40px; padding-top: 20px; border-top: 1px solid #e5e7eb; color: #6b7280; }
    </style>
</head>
<body>
    <div class="header">
        <h1>Análisis Sociométrico BULL-S</h1>
        <h2>Evaluación de Dinámicas Sociales y Bullying</h2>
        <p>Grupo: ${j.grupo_id}</p>
        <p>Fecha de análisis: ${new Date(j.fecha_analisis).toLocaleDateString()}</p>
    </div>

    <div class="section">
        <h2>Resumen Ejecutivo</h2>
        <div class="kpi-grid">
            <div class="kpi-card">
                <div class="kpi-value">${j.resumen_ejecutivo.total_estudiantes}</div>
                <div>Total Estudiantes</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-value">${j.resumen_ejecutivo.tasa_respuesta}%</div>
                <div>Tasa de Respuesta</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-value">${j.metricas_red.densidad_general}%</div>
                <div>Densidad de Red</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-value">${j.alertas.length}</div>
                <div>Alertas Identificadas</div>
            </div>
        </div>
    </div>

    <div class="section">
        <h2>Distribución de Estatus Social</h2>
        <table class="table">
            <thead>
                <tr><th>Estatus</th><th>Cantidad</th><th>Porcentaje</th></tr>
            </thead>
            <tbody>
                ${Object.entries(j.resumen_ejecutivo.distribucion_estatus).map(([C,y])=>`
                    <tr>
                        <td>${C}</td>
                        <td>${y}</td>
                        <td>${(y/j.resumen_ejecutivo.total_estudiantes*100).toFixed(1)}%</td>
                    </tr>
                `).join("")}
            </tbody>
        </table>
    </div>

    <div class="section">
        <h2>Distribución de Roles de Bullying</h2>
        <table class="table">
            <thead>
                <tr><th>Rol</th><th>Cantidad</th><th>Porcentaje</th></tr>
            </thead>
            <tbody>
                ${Object.entries(j.resumen_ejecutivo.distribucion_roles).map(([C,y])=>`
                    <tr>
                        <td>${C}</td>
                        <td>${y}</td>
                        <td>${(y/j.resumen_ejecutivo.total_estudiantes*100).toFixed(1)}%</td>
                    </tr>
                `).join("")}
            </tbody>
        </table>
    </div>

    <div class="section">
        <h2>Alertas de Riesgo</h2>
        ${j.alertas.map(C=>`
            <div class="alert">
                <h4>${C.tipo.toUpperCase()} - Severidad: ${C.severidad.toUpperCase()}</h4>
                <p><strong>Descripción:</strong> ${C.descripcion}</p>
                <p><strong>Recomendaciones:</strong></p>
                <ul>
                    ${C.recomendaciones.map(y=>`<li>${y}</li>`).join("")}
                </ul>
            </div>
        `).join("")}
    </div>

    <div class="section">
        <h2>Análisis Individual de Estudiantes</h2>
        <table class="table">
            <thead>
                <tr>
                    <th>Estudiante</th>
                    <th>Estatus Social</th>
                    <th>Rol Bullying</th>
                    <th>Popularidad</th>
                    <th>Rechazo</th>
                    <th>Nivel de Riesgo</th>
                </tr>
            </thead>
            <tbody>
                ${j.indices_individuales.map(C=>{const y=j.estudiantes.find(O=>O.id===C.estudiante_id);return`
                    <tr>
                        <td>${(y==null?void 0:y.nombre)||"N/A"}</td>
                        <td>${C.estatus_social}</td>
                        <td>${C.rol_bullying}</td>
                        <td>${C.popularidad.toFixed(1)}%</td>
                        <td>${C.rechazo.toFixed(1)}%</td>
                        <td>${C.nivel_riesgo}</td>
                    </tr>
                  `}).join("")}
            </tbody>
        </table>
    </div>

    <div class="section">
        <h2>Recomendaciones Principales</h2>
        ${j.resumen_ejecutivo.recomendaciones_principales.map(C=>`
            <div class="recommendation">
                <p>${C}</p>
            </div>
        `).join("")}
    </div>

    <div class="footer">
        <p>Análisis generado por Sistema BULL-S v2.0.0 - ${new Date().toLocaleDateString()}</p>
        <p>Este documento contiene información confidencial sobre estudiantes</p>
    </div>
</body>
</html>`,w=j=>{const C=["Estudiante ID","Nombre","Estatus Social","Rol Bullying","Popularidad (%)","Rechazo (%)","Aislamiento (%)","Centralidad","Influencia Social","Nivel de Riesgo"],y=j.indices_individuales.map(_=>{const $=j.estudiantes.find(q=>q.id===_.estudiante_id);return[_.estudiante_id,($==null?void 0:$.nombre)||"N/A",_.estatus_social,_.rol_bullying,_.popularidad.toFixed(2),_.rechazo.toFixed(2),_.aislamiento.toFixed(2),_.centralidad.toFixed(2),_.influencia_social.toFixed(2),_.nivel_riesgo]});return[C.join(","),...y.map(_=>_.join(","))].join(`
`)};return t.jsxs("div",{className:`relative ${n}`,children:[t.jsxs("button",{onClick:()=>x(!m),disabled:r,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[r?t.jsx($p,{className:"h-4 w-4 mr-2 animate-spin"}):t.jsx(Ml,{className:"h-4 w-4 mr-2"}),r?"Exportando...":"Exportar"]}),m&&!r&&t.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-10 border",children:t.jsxs("div",{className:"py-1",children:[t.jsxs("button",{onClick:p,className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[t.jsx(ma,{className:"h-4 w-4 mr-2"}),"Reporte HTML"]}),t.jsxs("button",{onClick:f,className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[t.jsx(Bp,{className:"h-4 w-4 mr-2"}),"Datos CSV"]}),t.jsxs("button",{onClick:c,className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[t.jsx(ma,{className:"h-4 w-4 mr-2"}),"Datos JSON"]})]})}),m&&t.jsx("div",{className:"fixed inset-0 z-5",onClick:()=>x(!1)})]})};var gy=Object.defineProperty,py=Object.defineProperties,by=Object.getOwnPropertyDescriptors,Wf=Object.getOwnPropertySymbols,vy=Object.prototype.hasOwnProperty,yy=Object.prototype.propertyIsEnumerable,ex=(o,n,r)=>n in o?gy(o,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[n]=r,wl=(o,n)=>{for(var r in n||(n={}))vy.call(n,r)&&ex(o,r,n[r]);if(Wf)for(var r of Wf(n))yy.call(n,r)&&ex(o,r,n[r]);return o},_l=(o,n)=>py(o,by(n)),jy=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});const Ny=({onFiltersChange:o,className:n=""})=>{const[r,u]=v.useState(!1),[m,x]=v.useState({grupoId:"all",genero:"all",edadMin:10,edadMax:14,tipoAnalisis:"all"}),[p,f]=v.useState([]),[c,h]=v.useState(0);v.useEffect(()=>{w()},[]),v.useEffect(()=>{let O=0;m.grupoId&&m.grupoId!=="all"&&O++,m.genero&&m.genero!=="all"&&O++,m.edadMin&&m.edadMin!==10&&O++,m.edadMax&&m.edadMax!==14&&O++,m.fechaInicio&&O++,m.fechaFin&&O++,m.tipoAnalisis&&m.tipoAnalisis!=="all"&&O++,h(O),o(m)},[m,o]);const w=()=>jy(void 0,null,function*(){try{const O=yield ua.getResumenGrupos();f(O)}catch(O){console.error("Error al cargar grupos:",O)}}),j=(O,_)=>{x($=>_l(wl({},$),{[O]:_}))},C=()=>{x({grupoId:"all",genero:"all",edadMin:10,edadMax:14,tipoAnalisis:"all"})},y=O=>{switch(O){case"agresores":x(_=>_l(wl({},_),{tipoAnalisis:"bullying"}));break;case"victimas":x(_=>_l(wl({},_),{tipoAnalisis:"bullying"}));break;case"sociometrico":x(_=>_l(wl({},_),{tipoAnalisis:"sociometrico"}));break;case"masculinos":x(_=>_l(wl({},_),{genero:"Masculino"}));break;case"femeninos":x(_=>_l(wl({},_),{genero:"Femenino"}));break}u(!1)};return t.jsxs("div",{className:`relative ${n}`,children:[t.jsxs("button",{onClick:()=>u(!r),className:`flex items-center px-4 py-2 rounded-lg border transition-colors ${c>0?"bg-blue-50 border-blue-300 text-blue-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[t.jsx(Zr,{className:"h-4 w-4 mr-2"}),"Filtros",c>0&&t.jsx("span",{className:"ml-2 px-2 py-1 text-xs bg-blue-600 text-white rounded-full",children:c})]}),r&&t.jsx("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border z-20",children:t.jsxs("div",{className:"p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Filtros de Análisis"}),t.jsx("button",{onClick:()=>u(!1),className:"text-gray-400 hover:text-gray-600",children:t.jsx(ha,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filtros Rápidos"}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsx("button",{onClick:()=>y("agresores"),className:"px-3 py-1 text-xs bg-red-100 text-red-700 rounded-full hover:bg-red-200",children:"Agresores"}),t.jsx("button",{onClick:()=>y("victimas"),className:"px-3 py-1 text-xs bg-yellow-100 text-yellow-700 rounded-full hover:bg-yellow-200",children:"Víctimas"}),t.jsx("button",{onClick:()=>y("sociometrico"),className:"px-3 py-1 text-xs bg-green-100 text-green-700 rounded-full hover:bg-green-200",children:"Sociométrico"}),t.jsx("button",{onClick:()=>y("masculinos"),className:"px-3 py-1 text-xs bg-blue-100 text-blue-700 rounded-full hover:bg-blue-200",children:"Masculinos"}),t.jsx("button",{onClick:()=>y("femeninos"),className:"px-3 py-1 text-xs bg-purple-100 text-purple-700 rounded-full hover:bg-purple-200",children:"Femeninos"})]})]}),t.jsxs("div",{className:"mb-4",children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t.jsx(Oa,{className:"h-4 w-4 inline mr-1"}),"Grupo"]}),t.jsxs("select",{value:m.grupoId||"all",onChange:O=>j("grupoId",O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"all",children:"Todos los grupos"}),p.map(O=>t.jsxs("option",{value:O.grupo_id,children:[O.nombre_grupo," (",O.total_estudiantes," estudiantes)"]},O.grupo_id))]})]}),t.jsxs("div",{className:"mb-4",children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t.jsx(ve,{className:"h-4 w-4 inline mr-1"}),"Género"]}),t.jsxs("select",{value:m.genero||"all",onChange:O=>j("genero",O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"all",children:"Todos"}),t.jsx("option",{value:"Masculino",children:"Masculino"}),t.jsx("option",{value:"Femenino",children:"Femenino"})]})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rango de Edad"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"number",min:"6",max:"18",value:m.edadMin||10,onChange:O=>j("edadMin",parseInt(O.target.value)),className:"w-20 px-2 py-1 border border-gray-300 rounded text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),t.jsx("span",{className:"text-gray-500",children:"a"}),t.jsx("input",{type:"number",min:"6",max:"18",value:m.edadMax||14,onChange:O=>j("edadMax",parseInt(O.target.value)),className:"w-20 px-2 py-1 border border-gray-300 rounded text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),t.jsx("span",{className:"text-gray-500",children:"años"})]})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Análisis"}),t.jsxs("select",{value:m.tipoAnalisis||"all",onChange:O=>j("tipoAnalisis",O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"all",children:"Todos los análisis"}),t.jsx("option",{value:"sociometrico",children:"Sociométrico"}),t.jsx("option",{value:"bullying",children:"Roles de Bullying"}),t.jsx("option",{value:"situacional",children:"Variables Situacionales"})]})]}),t.jsxs("div",{className:"mb-4",children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t.jsx(Ta,{className:"h-4 w-4 inline mr-1"}),"Período de Análisis"]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("input",{type:"date",value:m.fechaInicio||"",onChange:O=>j("fechaInicio",O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Fecha inicio"}),t.jsx("input",{type:"date",value:m.fechaFin||"",onChange:O=>j("fechaFin",O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Fecha fin"})]})]}),t.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[t.jsx("button",{onClick:C,className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800",children:"Limpiar filtros"}),t.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700",children:"Aplicar"})]})]})}),r&&t.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>u(!1)})]})},wy=({notifications:o=[],onMarkAsRead:n,onDismiss:r,className:u=""})=>{const[m,x]=v.useState(!1),p=o.filter(h=>!h.read).length,f=h=>{switch(h){case"info":return t.jsx(Kr,{className:"h-4 w-4 text-blue-500"});case"success":return t.jsx(Ri,{className:"h-4 w-4 text-green-500"});case"warning":return t.jsx(Ve,{className:"h-4 w-4 text-yellow-500"});case"error":return t.jsx(Zt,{className:"h-4 w-4 text-red-500"})}},c=h=>{!h.read&&n&&n(h.id)};return t.jsxs("div",{className:`relative ${u}`,children:[t.jsxs("button",{onClick:()=>x(!m),className:"relative p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-full transition-colors",children:[t.jsx(Di,{className:"h-5 w-5"}),p>0&&t.jsx("span",{className:"absolute -top-1 -right-1 h-5 w-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:p>9?"9+":p})]}),m&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>x(!1)}),t.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border z-20 max-h-96 overflow-hidden",children:[t.jsx("div",{className:"p-4 border-b",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Notificaciones"}),t.jsx("button",{onClick:()=>x(!1),className:"text-gray-400 hover:text-gray-600",children:t.jsx(ha,{className:"h-5 w-5"})})]})}),t.jsx("div",{className:"max-h-80 overflow-y-auto",children:o.length===0?t.jsxs("div",{className:"p-4 text-center text-gray-500",children:[t.jsx(Di,{className:"h-8 w-8 mx-auto mb-2 text-gray-300"}),t.jsx("p",{children:"No hay notificaciones"})]}):t.jsx("div",{className:"divide-y divide-gray-100",children:o.map(h=>t.jsx("div",{className:`p-4 cursor-pointer hover:bg-gray-50 transition-colors ${h.read?"":"bg-blue-50"}`,onClick:()=>c(h),children:t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx("div",{className:"flex-shrink-0 mt-0.5",children:f(h.type)}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsx("h4",{className:`text-sm font-medium ${h.read?"text-gray-700":"text-gray-900"}`,children:h.title}),!h.read&&t.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0"})]}),t.jsx("p",{className:"text-sm text-gray-600 mb-2",children:h.message}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-xs text-gray-500",children:h.timestamp.toLocaleTimeString()}),h.action&&t.jsx("button",{onClick:w=>{w.stopPropagation(),h.action.onClick()},className:"text-xs text-blue-600 hover:text-blue-800 font-medium",children:h.action.label})]})]}),r&&t.jsx("button",{onClick:w=>{w.stopPropagation(),r(h.id)},className:"text-gray-400 hover:text-gray-600 flex-shrink-0",children:t.jsx(ha,{className:"h-4 w-4"})})]})},h.id))})}),o.length>0&&t.jsx("div",{className:"p-3 border-t bg-gray-50",children:t.jsx("button",{onClick:()=>{o.forEach(h=>{!h.read&&n&&n(h.id)})},className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Marcar todas como leídas"})})]})]})]})},_y=({currentSection:o="general",className:n=""})=>{const[r,u]=v.useState(!1),[m,x]=v.useState(null),[p,f]=v.useState("general"),c=[{id:"dashboard-overview",title:"¿Cómo interpretar el dashboard?",description:"Guía completa para entender las métricas y visualizaciones del dashboard BULL-S",type:"guide",category:"dashboard",content:`
        El dashboard BULL-S está organizado en varias secciones principales:
        
        **Información General:**
        - KPIs principales: Total de estudiantes, respuestas válidas, rango de edad
        - Descripción del estudio y metodología aplicada
        
        **Análisis Sociométrico:**
        - Elecciones y rechazos entre estudiantes
        - Identificación de estudiantes populares y rechazados
        - Nivel de cohesión grupal
        
        **Roles de Bullying:**
        - Identificación de agresores y víctimas
        - Perfiles de comportamiento por estudiante
        - Análisis multidimensional de roles
        
        **Variables Situacionales:**
        - Formas más comunes de agresión
        - Lugares donde ocurren los incidentes
        - Frecuencia de las agresiones
      `},{id:"sociometric-analysis",title:"¿Qué es el análisis sociométrico?",description:"Explicación del análisis de relaciones sociales entre estudiantes",type:"guide",category:"analysis",content:`
        El análisis sociométrico evalúa las relaciones sociales dentro del grupo:
        
        **Elecciones Positivas:**
        - Estudiantes preferidos como compañeros
        - Indica popularidad y aceptación social
        - Ayuda a identificar líderes positivos
        
        **Rechazos:**
        - Estudiantes evitados por sus compañeros
        - Puede indicar problemas de integración
        - Señala posibles víctimas de exclusión
        
        **Cohesión Grupal:**
        - Mide qué tan unido está el grupo
        - Identifica subgrupos y estudiantes aislados
        - Indica la salud social del aula
      `},{id:"bullying-roles",title:"Roles en la dinámica de bullying",description:"Comprende los diferentes roles que pueden asumir los estudiantes",type:"guide",category:"analysis",content:`
        En las situaciones de bullying se identifican varios roles:
        
        **Agresores:**
        - Estudiantes que inician o lideran las agresiones
        - Pueden ser percibidos como "fuertes" por sus pares
        - Requieren intervención especializada
        
        **Víctimas:**
        - Estudiantes que sufren agresiones repetidas
        - Pueden ser percibidos como "cobardes" o vulnerables
        - Necesitan apoyo y protección
        
        **Observadores:**
        - Estudiantes que presencian pero no participan
        - Su actitud puede perpetuar o detener el bullying
        - Clave para la prevención
      `},{id:"export-reports",title:"¿Cómo exportar informes?",description:"Guía para generar y exportar informes del análisis",type:"guide",category:"reports",content:`
        Para exportar informes del análisis BULL-S:
        
        **Formatos Disponibles:**
        - PDF: Informe completo con gráficos y análisis
        - Excel: Datos tabulados para análisis adicional
        - Imagen: Capturas del dashboard para presentaciones
        
        **Pasos para Exportar:**
        1. Selecciona los filtros deseados (grupo, fecha, etc.)
        2. Haz clic en el botón "Exportar"
        3. Elige el formato de exportación
        4. El archivo se descargará automáticamente
        
        **Recomendaciones:**
        - Usa PDF para informes ejecutivos
        - Usa Excel para análisis estadísticos
        - Usa imágenes para presentaciones
      `},{id:"intervention-recommendations",title:"Implementar recomendaciones",description:"Cómo actuar sobre las recomendaciones del sistema",type:"guide",category:"general",content:`
        Las recomendaciones se clasifican por prioridad y tipo:
        
        **Prioridad Alta (Inmediata):**
        - Requieren acción en 24-48 horas
        - Involucran situaciones de riesgo
        - Deben ser atendidas por profesionales
        
        **Prioridad Media (Corto Plazo):**
        - Implementar en 1-2 semanas
        - Medidas preventivas y de apoyo
        - Involucran cambios en el ambiente
        
        **Prioridad Baja (Largo Plazo):**
        - Estrategias de seguimiento
        - Programas de prevención general
        - Capacitación y formación
      `},{id:"video-tutorial",title:"Tutorial en Video: Navegación Básica",description:"Video tutorial sobre cómo navegar por el dashboard",type:"video",category:"dashboard",url:"#video-tutorial"},{id:"external-resources",title:"Recursos Externos sobre BULL-S",description:"Enlaces a documentación oficial y recursos adicionales",type:"external",category:"general",url:"https://example.com/bulls-resources"}],h=[{id:"general",label:"General",icon:Yr},{id:"dashboard",label:"Dashboard",icon:Ci},{id:"analysis",label:"Análisis",icon:ma},{id:"reports",label:"Informes",icon:ma}],w=c.filter(y=>y.category===p),j=y=>{switch(y){case"guide":return t.jsx(Ci,{className:"h-4 w-4"});case"video":return t.jsx(Gp,{className:"h-4 w-4"});case"faq":return t.jsx(Yr,{className:"h-4 w-4"});case"external":return t.jsx(qp,{className:"h-4 w-4"})}},C=y=>{y.type==="external"&&y.url?window.open(y.url,"_blank"):x(y)};return t.jsxs("div",{className:`relative ${n}`,children:[t.jsx("button",{onClick:()=>u(!r),className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-full transition-colors",title:"Ayuda",children:t.jsx(Yr,{className:"h-5 w-5"})}),r&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>u(!1)}),t.jsxs("div",{className:"absolute right-0 mt-2 w-96 bg-white rounded-lg shadow-lg border z-50 max-h-96 overflow-hidden",children:[t.jsx("div",{className:"p-4 border-b",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Centro de Ayuda"}),t.jsx("button",{onClick:()=>u(!1),className:"text-gray-400 hover:text-gray-600",children:t.jsx(ha,{className:"h-5 w-5"})})]})}),m?t.jsxs("div",{className:"max-h-80 overflow-y-auto",children:[t.jsxs("div",{className:"p-4 border-b",children:[t.jsx("button",{onClick:()=>x(null),className:"text-blue-600 hover:text-blue-800 text-sm font-medium mb-2",children:"← Volver"}),t.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:m.title})]}),t.jsx("div",{className:"p-4",children:m.content&&t.jsx("div",{className:"prose prose-sm max-w-none",children:m.content.split(`
`).map((y,O)=>y.startsWith("**")&&y.endsWith("**")?t.jsx("h5",{className:"font-semibold text-gray-900 mt-4 mb-2",children:y.slice(2,-2)},O):y.startsWith("- ")?t.jsx("li",{className:"text-gray-700 ml-4",children:y.slice(2)},O):y.trim()?t.jsx("p",{className:"text-gray-700 mb-2",children:y},O):null)})})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"p-4 border-b bg-gray-50",children:t.jsx("div",{className:"flex space-x-2",children:h.map(y=>{const O=y.icon;return t.jsxs("button",{onClick:()=>f(y.id),className:`flex items-center px-3 py-1 rounded-full text-sm transition-colors ${p===y.id?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:[t.jsx(O,{className:"h-3 w-3 mr-1"}),y.label]},y.id)})})}),t.jsx("div",{className:"max-h-80 overflow-y-auto",children:w.map(y=>t.jsx("div",{className:"p-4 border-b border-gray-100 hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>C(y),children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[t.jsx("div",{className:"text-blue-500 mt-0.5",children:j(y.type)}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:y.title}),t.jsx("p",{className:"text-sm text-gray-600",children:y.description})]})]}),t.jsx(Vx,{className:"h-4 w-4 text-gray-400 flex-shrink-0 ml-2"})]})},y.id))})]})]})]})]})};var ca=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});const qe={getEstadisticasGenerales(o,n){return ca(this,null,function*(){try{const{error:r}=yield Z.from("estudiantes").select("id").limit(1);if(r&&r.code==="42P01")return console.log("Tablas no encontradas, devolviendo datos de ejemplo"),qe.getEstadisticasEjemplo(n);let u=Z.from("estudiantes").select("id, edad, grupo_id");if(o){const{data:V}=yield Z.from("grupos").select("id").eq("institucion_id",o);if(V&&V.length>0){const F=V.map(E=>E.id);u=u.in("grupo_id",F)}}n&&(u=u.eq("grupo_id",n));const{data:m,error:x}=yield u;if(x)throw x;let p=Z.from("grupos").select("id, nombre, institucion_id");o&&(p=p.eq("institucion_id",o)),n&&(p=p.eq("id",n));const{data:f,error:c}=yield p;if(c)throw c;let h=Z.from("respuestas").select("estudiante_id");if(n){const V=(m==null?void 0:m.map(F=>F.id))||[];V.length>0&&(h=h.in("estudiante_id",V))}const{data:w,error:j}=yield h;if(j&&j.code!=="42P01")throw j;const C=(m==null?void 0:m.length)||0,y=(f==null?void 0:f.length)||0,O=(w==null?void 0:w.length)||0,_=C>0?Math.round(O/C*100):0,$=(m==null?void 0:m.map(V=>V.edad).filter(V=>V!=null))||[],q=$.length>0?`${Math.min(...$)}-${Math.max(...$)} años`:"No disponible",k=(f==null?void 0:f.map(V=>V.nombre))||[];return{totalEstudiantes:C,totalGrupos:y,respuestasValidas:O,porcentajeRespuestas:_,rangoEdad:q,gruposNombres:k}}catch(r){return console.error("Error al obtener estadísticas generales:",r),r.code==="42P01"?this.getEstadisticasEjemplo(n):{totalEstudiantes:0,totalGrupos:0,respuestasValidas:0,porcentajeRespuestas:0,rangoEdad:"0-0 años",gruposNombres:[]}}})},getEstadisticasEjemplo(o){return o==="1"?{totalEstudiantes:25,totalGrupos:1,respuestasValidas:22,porcentajeRespuestas:88,rangoEdad:"11-12 años",gruposNombres:["6B"]}:o==="2"?{totalEstudiantes:30,totalGrupos:1,respuestasValidas:27,porcentajeRespuestas:90,rangoEdad:"13-14 años",gruposNombres:["8A"]}:o==="3"?{totalEstudiantes:28,totalGrupos:1,respuestasValidas:25,porcentajeRespuestas:89,rangoEdad:"13-14 años",gruposNombres:["8B"]}:{totalEstudiantes:83,totalGrupos:3,respuestasValidas:74,porcentajeRespuestas:89,rangoEdad:"11-14 años",gruposNombres:["6B","8A","8B"]}},getInstituciones(){return ca(this,null,function*(){try{const{error:o}=yield Z.from("instituciones_educativas").select("id").limit(1);if(o&&o.code==="42P01")return console.log("Tabla instituciones_educativas no encontrada, devolviendo datos de ejemplo"),this.getInstitucionesEjemplo();const{data:n,error:r}=yield Z.from("instituciones_educativas").select("id, nombre").order("nombre");if(r)throw r;return n||[]}catch(o){return console.error("Error al obtener instituciones:",o),this.getInstitucionesEjemplo()}})},getInstitucionesEjemplo(){return[{id:"1",nombre:"Colegio La SALLE"},{id:"2",nombre:"Instituto Tecnológico San José"}]},getGrupos(o){return ca(this,null,function*(){try{const{error:n}=yield Z.from("grupos").select("id").limit(1);if(n&&n.code==="42P01")return console.log("Tabla grupos no encontrada, devolviendo datos de ejemplo"),this.getGruposEjemplo(o);let r=Z.from("grupos").select("id, nombre, institucion_id").order("nombre");o&&(r=r.eq("institucion_id",o));const{data:u,error:m}=yield r;if(m)throw m;return u||[]}catch(n){return console.error("Error al obtener grupos:",n),this.getGruposEjemplo(o)}})},getGruposEjemplo(o){const n=[{id:"1",nombre:"6B",institucion_id:"1"},{id:"2",nombre:"8A",institucion_id:"1"},{id:"3",nombre:"8B",institucion_id:"1"},{id:"4",nombre:"9A",institucion_id:"2"},{id:"5",nombre:"10A",institucion_id:"2"}];return o?n.filter(r=>r.institucion_id===o):n},getEstudiantes(o){return ca(this,null,function*(){try{const{error:n}=yield Z.from("estudiantes").select("id").limit(1);if(n&&n.code==="42P01")return console.log("Tabla estudiantes no encontrada, devolviendo datos de ejemplo"),this.getEstudiantesEjemplo(o);let r=Z.from("estudiantes").select("id, nombre, apellido, edad, genero, grupo_id").order("nombre");o&&(r=r.eq("grupo_id",o));const{data:u,error:m}=yield r;if(m)throw m;return u||[]}catch(n){return console.error("Error al obtener estudiantes:",n),this.getEstudiantesEjemplo(o)}})},getEstudiantesEjemplo(o){const n=[{id:"1",nombre:"Ana",apellido:"García",edad:11,genero:"F",grupo_id:"1"},{id:"2",nombre:"Carlos",apellido:"López",edad:12,genero:"M",grupo_id:"1"},{id:"3",nombre:"María",apellido:"Rodríguez",edad:11,genero:"F",grupo_id:"1"},{id:"4",nombre:"Juan",apellido:"Martínez",edad:12,genero:"M",grupo_id:"1"},{id:"5",nombre:"Sofía",apellido:"Hernández",edad:11,genero:"F",grupo_id:"1"},{id:"6",nombre:"Diego",apellido:"González",edad:12,genero:"M",grupo_id:"1"},{id:"7",nombre:"Valentina",apellido:"Pérez",edad:11,genero:"F",grupo_id:"1"},{id:"8",nombre:"Andrés",apellido:"Sánchez",edad:12,genero:"M",grupo_id:"1"},{id:"9",nombre:"Laura",apellido:"Díaz",edad:11,genero:"F",grupo_id:"1"},{id:"10",nombre:"Miguel",apellido:"Torres",edad:12,genero:"M",grupo_id:"1"},{id:"11",nombre:"Camila",apellido:"Ramírez",edad:11,genero:"F",grupo_id:"1"},{id:"12",nombre:"Javier",apellido:"Flores",edad:12,genero:"M",grupo_id:"1"},{id:"13",nombre:"Isabella",apellido:"Vargas",edad:11,genero:"F",grupo_id:"1"},{id:"14",nombre:"Daniel",apellido:"Rojas",edad:12,genero:"M",grupo_id:"1"},{id:"15",nombre:"Gabriela",apellido:"Castro",edad:11,genero:"F",grupo_id:"1"},{id:"16",nombre:"Sebastián",apellido:"Ortiz",edad:12,genero:"M",grupo_id:"1"},{id:"17",nombre:"Lucía",apellido:"Moreno",edad:11,genero:"F",grupo_id:"1"},{id:"18",nombre:"Alejandro",apellido:"Silva",edad:12,genero:"M",grupo_id:"1"},{id:"19",nombre:"Valeria",apellido:"Jiménez",edad:11,genero:"F",grupo_id:"1"},{id:"20",nombre:"Mateo",apellido:"Ruiz",edad:12,genero:"M",grupo_id:"1"},{id:"21",nombre:"Emma",apellido:"Álvarez",edad:11,genero:"F",grupo_id:"1"},{id:"22",nombre:"Santiago",apellido:"Mendoza",edad:12,genero:"M",grupo_id:"1"},{id:"23",nombre:"Mariana",apellido:"Acosta",edad:11,genero:"F",grupo_id:"1"},{id:"24",nombre:"Nicolás",apellido:"Medina",edad:12,genero:"M",grupo_id:"1"},{id:"25",nombre:"Zoe",apellido:"Vega",edad:11,genero:"F",grupo_id:"1"},{id:"26",nombre:"Adriana",apellido:"Castillo",edad:13,genero:"F",grupo_id:"2"},{id:"27",nombre:"Bruno",apellido:"Herrera",edad:14,genero:"M",grupo_id:"2"},{id:"28",nombre:"Carolina",apellido:"Ramírez",edad:13,genero:"F",grupo_id:"2"},{id:"29",nombre:"David",apellido:"Morales",edad:14,genero:"M",grupo_id:"2"},{id:"30",nombre:"Elena",apellido:"Gutiérrez",edad:13,genero:"F",grupo_id:"2"},{id:"31",nombre:"Fernando",apellido:"Vargas",edad:14,genero:"M",grupo_id:"2"},{id:"32",nombre:"Gabriela",apellido:"Torres",edad:13,genero:"F",grupo_id:"2"},{id:"33",nombre:"Héctor",apellido:"Jiménez",edad:14,genero:"M",grupo_id:"2"},{id:"34",nombre:"Inés",apellido:"Flores",edad:13,genero:"F",grupo_id:"2"},{id:"35",nombre:"Jorge",apellido:"Sánchez",edad:14,genero:"M",grupo_id:"2"},{id:"36",nombre:"Karla",apellido:"Díaz",edad:13,genero:"F",grupo_id:"2"},{id:"37",nombre:"Luis",apellido:"Martín",edad:14,genero:"M",grupo_id:"2"},{id:"38",nombre:"Mónica",apellido:"Ruiz",edad:13,genero:"F",grupo_id:"2"},{id:"39",nombre:"Néstor",apellido:"Peña",edad:14,genero:"M",grupo_id:"2"},{id:"40",nombre:"Olivia",apellido:"Cruz",edad:13,genero:"F",grupo_id:"2"},{id:"41",nombre:"Pablo",apellido:"Ortega",edad:14,genero:"M",grupo_id:"2"},{id:"42",nombre:"Quintana",apellido:"López",edad:13,genero:"F",grupo_id:"2"},{id:"43",nombre:"Ricardo",apellido:"Mendez",edad:14,genero:"M",grupo_id:"2"},{id:"44",nombre:"Sofía",apellido:"Aguilar",edad:13,genero:"F",grupo_id:"2"},{id:"45",nombre:"Tomás",apellido:"Ramos",edad:14,genero:"M",grupo_id:"2"},{id:"46",nombre:"Úrsula",apellido:"Vásquez",edad:13,genero:"F",grupo_id:"2"},{id:"47",nombre:"Víctor",apellido:"Navarro",edad:14,genero:"M",grupo_id:"2"},{id:"48",nombre:"Ximena",apellido:"Campos",edad:13,genero:"F",grupo_id:"2"},{id:"49",nombre:"Yolanda",apellido:"Reyes",edad:14,genero:"F",grupo_id:"2"},{id:"50",nombre:"Zacarías",apellido:"Moreno",edad:14,genero:"M",grupo_id:"2"},{id:"51",nombre:"Andrea",apellido:"Silva",edad:13,genero:"F",grupo_id:"2"},{id:"52",nombre:"Benjamín",apellido:"Castro",edad:14,genero:"M",grupo_id:"2"},{id:"53",nombre:"Cristina",apellido:"Rojas",edad:13,genero:"F",grupo_id:"2"},{id:"54",nombre:"Damián",apellido:"Guerrero",edad:14,genero:"M",grupo_id:"2"},{id:"55",nombre:"Esperanza",apellido:"Delgado",edad:13,genero:"F",grupo_id:"2"},{id:"56",nombre:"Alicia",apellido:"Fernández",edad:13,genero:"F",grupo_id:"3"},{id:"57",nombre:"Bernardo",apellido:"Gómez",edad:14,genero:"M",grupo_id:"3"},{id:"58",nombre:"Claudia",apellido:"Paredes",edad:13,genero:"F",grupo_id:"3"},{id:"59",nombre:"Diego",apellido:"Salazar",edad:14,genero:"M",grupo_id:"3"},{id:"60",nombre:"Estela",apellido:"Cordero",edad:13,genero:"F",grupo_id:"3"},{id:"61",nombre:"Fabián",apellido:"Molina",edad:14,genero:"M",grupo_id:"3"},{id:"62",nombre:"Gloria",apellido:"Espinoza",edad:13,genero:"F",grupo_id:"3"},{id:"63",nombre:"Hugo",apellido:"Valdez",edad:14,genero:"M",grupo_id:"3"},{id:"64",nombre:"Irma",apellido:"Pacheco",edad:13,genero:"F",grupo_id:"3"},{id:"65",nombre:"Jaime",apellido:"Cabrera",edad:14,genero:"M",grupo_id:"3"},{id:"66",nombre:"Karina",apellido:"Lara",edad:13,genero:"F",grupo_id:"3"},{id:"67",nombre:"Leonardo",apellido:"Ibarra",edad:14,genero:"M",grupo_id:"3"},{id:"68",nombre:"Miriam",apellido:"Sandoval",edad:13,genero:"F",grupo_id:"3"},{id:"69",nombre:"Norberto",apellido:"Fuentes",edad:14,genero:"M",grupo_id:"3"},{id:"70",nombre:"Ofelia",apellido:"Contreras",edad:13,genero:"F",grupo_id:"3"},{id:"71",nombre:"Patricio",apellido:"Villanueva",edad:14,genero:"M",grupo_id:"3"},{id:"72",nombre:"Quetzal",apellido:"Bermúdez",edad:13,genero:"F",grupo_id:"3"},{id:"73",nombre:"Rodrigo",apellido:"Cervantes",edad:14,genero:"M",grupo_id:"3"},{id:"74",nombre:"Silvia",apellido:"Domínguez",edad:13,genero:"F",grupo_id:"3"},{id:"75",nombre:"Teodoro",apellido:"Estrada",edad:14,genero:"M",grupo_id:"3"},{id:"76",nombre:"Urania",apellido:"Galván",edad:13,genero:"F",grupo_id:"3"},{id:"77",nombre:"Valentín",apellido:"Herrera",edad:14,genero:"M",grupo_id:"3"},{id:"78",nombre:"Wendy",apellido:"Iglesias",edad:13,genero:"F",grupo_id:"3"},{id:"79",nombre:"Xavier",apellido:"Juárez",edad:14,genero:"M",grupo_id:"3"},{id:"80",nombre:"Yazmín",apellido:"Kuri",edad:13,genero:"F",grupo_id:"3"},{id:"81",nombre:"Zenón",apellido:"Luna",edad:14,genero:"M",grupo_id:"3"},{id:"82",nombre:"Azucena",apellido:"Márquez",edad:13,genero:"F",grupo_id:"3"},{id:"83",nombre:"Bautista",apellido:"Núñez",edad:14,genero:"M",grupo_id:"3"}];return o?n.filter(r=>r.grupo_id===o):n},getRolesBullying(o,n){return ca(this,null,function*(){try{console.log("Calculando roles de bullying desde respuestas reales...");const{data:r,error:u}=yield Z.from("respuestas").select(`
          respuesta_texto,
          pregunta_id,
          preguntas(orden, texto)
        `).in("pregunta_id",["d2888d67-9878-4cdf-8a58-592c251c1cb6","dae67e87-db3e-4637-ace1-f1148f1d7d69"]);if(u)throw console.error("Error obteniendo respuestas de bullying:",u),u;let m=0,x=0,p=0;r==null||r.forEach(y=>{var O,_;try{const $=JSON.parse(y.respuesta_texto);Array.isArray($)&&$.length>0&&(((O=y.preguntas)==null?void 0:O.orden)===3?m+=$.length:((_=y.preguntas)==null?void 0:_.orden)===4&&(x+=$.length))}catch($){}});const{count:f}=yield Z.from("estudiantes").select("*",{count:"exact",head:!0});p=Math.max(0,(f||0)-m-x),console.log("Roles de bullying calculados:",{agresores:m,victimas:x,observadores:p,totalEstudiantes:f});const c=m+x+p,h=c>0?Math.round(m/c*100):15,w=c>0?Math.round(x/c*100):20,j=c>0?Math.round(p/c*100):60;return[{name:"Agresores",value:h},{name:"Víctimas",value:w},{name:"Víctima-Provocador",value:5},{name:"No implicados",value:j}]}catch(r){return console.error("Error al obtener roles de bullying:",r),[{name:"Agresores",value:15},{name:"Víctimas",value:20},{name:"Víctima-Provocador",value:5},{name:"No implicados",value:60}]}})},getEstatusSociometrico(o,n){return ca(this,null,function*(){try{console.log("Calculando estatus sociométrico desde respuestas reales...");const{data:r,error:u}=yield Z.from("respuestas").select(`
          respuesta_texto,
          pregunta_id,
          estudiante_id,
          preguntas(orden, texto)
        `).in("pregunta_id",["d90ddd09-3878-4efc-9059-7279570157bc","47b56067-0c8c-4565-b645-80348852907f"]);if(u)throw console.error("Error obteniendo respuestas sociométricas:",u),u;const m={};r==null||r.forEach(j=>{try{const C=JSON.parse(j.respuesta_texto);Array.isArray(C)&&C.forEach(y=>{var O,_;m[y]||(m[y]={positivas:0,negativas:0}),((O=j.preguntas)==null?void 0:O.orden)===1?m[y].positivas++:((_=j.preguntas)==null?void 0:_.orden)===2&&m[y].negativas++})}catch(C){}});let x=0,p=0,f=0,c=0,h=0;Object.values(m).forEach(j=>{const{positivas:C,negativas:y}=j;C>=3&&y<=1?x++:C<=1&&y<=1?p++:C<=1&&y>=3?f++:C>=3&&y>=3?c++:h++});const w=Object.keys(m).length||1;return console.log("Estatus sociométrico calculado:",{populares:x,promedio:h,aislados:p,rechazados:f,controvertidos:c,totalEstudiantes:w}),{populares:Math.round(x/w*100),promedio:Math.round(h/w*100),aislados:Math.round(p/w*100),rechazados:Math.round(f/w*100),controvertidos:Math.round(c/w*100)}}catch(r){return console.error("Error al obtener estatus sociométrico:",r),{populares:25,promedio:40,aislados:15,rechazados:12,controvertidos:8}}})},getCohesionGrupal(o){return ca(this,null,function*(){var n;try{let r=Z.from("vista_cohesion_grupal").select("*");o&&(r=r.eq("grupo_id",o));const{data:u,error:m}=yield r;if(m)throw m;const x=((n=u==null?void 0:u[0])==null?void 0:n.valor_cohesion)||72;let p="Óptima";return x<40?p="Baja":x<60?p="Media":x<80&&(p="Alta"),{valor:x,categoria:p}}catch(r){return console.error("Error al obtener cohesión grupal:",r),{valor:72,categoria:"Óptima"}}})},getFormasAgresion(o){return ca(this,null,function*(){var n,r,u,m,x,p;try{let f=Z.from("vista_formas_agresion").select("*");o&&(f=f.eq("grupo_id",o));const{data:c,error:h}=yield f;if(h)throw h;return[{name:"Físico",value:((n=c==null?void 0:c[0])==null?void 0:n.porcentaje_fisico)||35},{name:"Verbal",value:((r=c==null?void 0:c[0])==null?void 0:r.porcentaje_verbal)||65},{name:"Social",value:((u=c==null?void 0:c[0])==null?void 0:u.porcentaje_social)||45},{name:"Cibernético",value:((m=c==null?void 0:c[0])==null?void 0:m.porcentaje_cibernetico)||25},{name:"Exclusión",value:((x=c==null?void 0:c[0])==null?void 0:x.porcentaje_exclusion)||40},{name:"Intimidación",value:((p=c==null?void 0:c[0])==null?void 0:p.porcentaje_intimidacion)||30}]}catch(f){return console.error("Error al obtener formas de agresión:",f),[{name:"Físico",value:35},{name:"Verbal",value:65},{name:"Social",value:45},{name:"Cibernético",value:25},{name:"Exclusión",value:40},{name:"Intimidación",value:30}]}})},getLugaresAgresion(o){return ca(this,null,function*(){var n,r,u,m,x;try{let p=Z.from("vista_lugares_agresion").select("*");o&&(p=p.eq("grupo_id",o));const{data:f,error:c}=yield p;if(c)throw c;return[{name:"Aula",value:((n=f==null?void 0:f[0])==null?void 0:n.porcentaje_aula)||40},{name:"Patio",value:((r=f==null?void 0:f[0])==null?void 0:r.porcentaje_patio)||35},{name:"Pasillos",value:((u=f==null?void 0:f[0])==null?void 0:u.porcentaje_pasillos)||15},{name:"Baños",value:((m=f==null?void 0:f[0])==null?void 0:m.porcentaje_banos)||10},{name:"Fuera del centro",value:((x=f==null?void 0:f[0])==null?void 0:x.porcentaje_fuera)||5}]}catch(p){return console.error("Error al obtener lugares de agresión:",p),[{name:"Aula",value:40},{name:"Patio",value:35},{name:"Pasillos",value:15},{name:"Baños",value:10},{name:"Fuera del centro",value:5}]}})},getTiposAgresion(o){return ca(this,null,function*(){var n,r,u,m,x;try{let p=Z.from("vista_tipos_agresion").select("*");o&&(p=p.eq("grupo_id",o));const{data:f,error:c}=yield p;if(c)throw c;return[{name:"Físico",value:((n=f==null?void 0:f[0])==null?void 0:n.porcentaje_fisico)||35},{name:"Verbal",value:((r=f==null?void 0:f[0])==null?void 0:r.porcentaje_verbal)||65},{name:"Social",value:((u=f==null?void 0:f[0])==null?void 0:u.porcentaje_social)||45},{name:"Exclusión",value:((m=f==null?void 0:f[0])==null?void 0:m.porcentaje_exclusion)||40},{name:"Intimidación",value:((x=f==null?void 0:f[0])==null?void 0:x.porcentaje_intimidacion)||30}]}catch(p){return console.error("Error al obtener tipos de agresión:",p),[{name:"Físico",value:35},{name:"Verbal",value:65},{name:"Social",value:45},{name:"Exclusión",value:40},{name:"Intimidación",value:30}]}})}},Sy=({loading:o=!1,reporteData:n,className:r=""})=>{var u;const x=(()=>{var w,j,C,y;const O=!!n,_=((w=n==null?void 0:n.estudiantes)==null?void 0:w.length)>0,$=((j=n==null?void 0:n.roles_bullying)==null?void 0:j.length)>0,q=((y=(C=n==null?void 0:n.variables_situacionales)==null?void 0:C.formasAgresion)==null?void 0:y.length)>0;return[{id:"data-collection",title:"Recolección de Datos",description:"Obtención de respuestas del cuestionario BULL-S",status:_?"completed":o?"in-progress":"pending",progress:_?100:o?50:0,icon:ve},{id:"sociometric-analysis",title:"Análisis Sociométrico",description:"Evaluación de relaciones de aceptación y rechazo",status:O?"completed":_?"in-progress":"pending",progress:O?100:_?75:0,icon:fd},{id:"bullying-roles",title:"Identificación de Roles",description:"Detección de agresores, víctimas y observadores",status:$?"completed":O?"in-progress":"pending",progress:$?100:O?60:0,icon:Zt},{id:"situational-variables",title:"Variables Situacionales",description:"Análisis de formas, lugares y frecuencia de agresiones",status:q?"completed":$?"in-progress":"pending",progress:q?100:$?40:0,icon:ma}]})(),p=x.filter(w=>w.status==="completed").length,f=p/x.length*100,c=w=>{switch(w){case"completed":return t.jsx(Ri,{className:"h-4 w-4 text-green-500"});case"in-progress":return t.jsx(Xr,{className:"h-4 w-4 text-blue-500 animate-pulse"});case"error":return t.jsx(Zt,{className:"h-4 w-4 text-red-500"});default:return t.jsx("div",{className:"h-4 w-4 rounded-full border-2 border-gray-300"})}},h=w=>{switch(w){case"completed":return"text-green-700 bg-green-50 border-green-200";case"in-progress":return"text-blue-700 bg-blue-50 border-blue-200";case"error":return"text-red-700 bg-red-50 border-red-200";default:return"text-gray-700 bg-gray-50 border-gray-200"}};return t.jsxs("div",{className:`bg-white rounded-lg shadow-sm border p-6 ${r}`,children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[t.jsx(ns,{className:"h-5 w-5 mr-2 text-blue-500"}),"Progreso del Análisis"]}),t.jsxs("span",{className:"text-sm text-gray-600",children:[p," de ",x.length," completados"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-500 ease-out",style:{width:`${f}%`}})}),t.jsx("div",{className:"text-right mt-1",children:t.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[Math.round(f),"%"]})})]}),t.jsx("div",{className:"space-y-4",children:x.map((w,j)=>{const C=w.icon,y=j===x.length-1;return t.jsxs("div",{className:"relative",children:[!y&&t.jsx("div",{className:"absolute left-6 top-12 w-0.5 h-8 bg-gray-200"}),t.jsxs("div",{className:`flex items-start p-4 rounded-lg border ${h(w.status)}`,children:[t.jsx("div",{className:"flex-shrink-0 mr-4",children:t.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-full bg-white border-2 border-current",children:t.jsx(C,{className:"h-6 w-6"})})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsx("h4",{className:"text-sm font-semibold",children:w.title}),c(w.status)]}),t.jsx("p",{className:"text-sm opacity-75 mb-2",children:w.description}),w.progress>0&&w.status!=="pending"&&t.jsx("div",{className:"w-full bg-white bg-opacity-50 rounded-full h-1.5",children:t.jsx("div",{className:"bg-current h-1.5 rounded-full transition-all duration-300",style:{width:`${w.progress}%`}})})]})]})]},w.id)})}),t.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsxs("div",{className:"flex items-center text-gray-600",children:[t.jsx(Xr,{className:"h-4 w-4 mr-1"}),o?"Procesando datos...":"Análisis actualizado"]}),((u=n==null?void 0:n.resumen)==null?void 0:u.fecha_generacion)&&t.jsxs("div",{className:"text-gray-500",children:["Última actualización: ",new Date(n.resumen.fecha_generacion).toLocaleString()]})]})})]})};var Ey=Object.defineProperty,Cy=Object.defineProperties,Ay=Object.getOwnPropertyDescriptors,tx=Object.getOwnPropertySymbols,Dy=Object.prototype.hasOwnProperty,Oy=Object.prototype.propertyIsEnumerable,ax=(o,n,r)=>n in o?Ey(o,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[n]=r,Ty=(o,n)=>{for(var r in n||(n={}))Dy.call(n,r)&&ax(o,r,n[r]);if(tx)for(var r of tx(n))Oy.call(n,r)&&ax(o,r,n[r]);return o},My=(o,n)=>Cy(o,Ay(n));const Ry=({className:o=""})=>{const[n,r]=v.useState([{id:"active-sessions",label:"Sesiones Activas",value:3,previousValue:2,icon:ns,color:"text-green-600",trend:"up"},{id:"students-online",label:"Estudiantes Conectados",value:12,previousValue:15,icon:ve,color:"text-blue-600",trend:"down"},{id:"alerts-today",label:"Alertas Hoy",value:2,previousValue:4,icon:Ve,color:"text-yellow-600",trend:"down"},{id:"dashboard-views",label:"Vistas del Dashboard",value:47,previousValue:42,icon:xd,color:"text-purple-600",trend:"up"}]),[u,m]=v.useState(new Date);v.useEffect(()=>{const c=setInterval(()=>{r(h=>h.map(w=>{const j=Math.random()>.5?1:-1,C=Math.max(0,w.value+(Math.random()>.7?j:0));return My(Ty({},w),{previousValue:w.value,value:C,trend:C>w.value?"up":C<w.value?"down":"stable"})})),m(new Date)},3e4);return()=>clearInterval(c)},[]);const x=c=>{switch(c){case"up":return t.jsx(Rl,{className:"h-3 w-3 text-green-500"});case"down":return t.jsx(dd,{className:"h-3 w-3 text-red-500"});default:return t.jsx("div",{className:"h-3 w-3 rounded-full bg-gray-400"})}},p=c=>{switch(c){case"up":return"text-green-600";case"down":return"text-red-600";default:return"text-gray-600"}},f=(c,h)=>h===0?0:Math.round((c-h)/h*100);return t.jsxs("div",{className:`bg-white rounded-lg shadow-sm border p-4 ${o}`,children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[t.jsx(ns,{className:"h-5 w-5 mr-2 text-green-500"}),"Estadísticas en Tiempo Real"]}),t.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[t.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2 animate-pulse"}),"Actualizado: ",u.toLocaleTimeString()]})]}),t.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:n.map(c=>{const h=c.icon,w=f(c.value,c.previousValue);return t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-100 hover:shadow-sm transition-shadow",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx(h,{className:`h-5 w-5 ${c.color}`}),t.jsxs("div",{className:"flex items-center space-x-1",children:[x(c.trend),w!==0&&t.jsxs("span",{className:`text-xs font-medium ${p(c.trend)}`,children:[w>0?"+":"",w,"%"]})]})]}),t.jsxs("div",{className:"mb-1",children:[t.jsx("span",{className:"text-2xl font-bold text-gray-900",children:c.value}),c.unit&&t.jsx("span",{className:"text-sm text-gray-500 ml-1",children:c.unit})]}),t.jsx("div",{className:"text-xs text-gray-600",children:c.label}),c.previousValue!==c.value&&t.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Anterior: ",c.previousValue]})]},c.id)})}),t.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),t.jsx("span",{className:"text-gray-600",children:"Sistema Operativo"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),t.jsx("span",{className:"text-gray-600",children:"Base de Datos Conectada"})]})]}),t.jsx("button",{onClick:()=>{m(new Date)},className:"text-blue-600 hover:text-blue-800 font-medium",children:"Actualizar ahora"})]})})]})},zy=({loading:o,reporteData:n,selectedGroup:r,getKpiData:u,estadisticas:m})=>t.jsxs("div",{className:"space-y-6",children:[t.jsx(Sy,{loading:o,reporteData:n}),t.jsx(Ry,{grupoId:r==="all"?void 0:r}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:u().map((x,p)=>{const f=x.icon;return t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:`flex-shrink-0 p-3 rounded-lg ${x.color}`,children:t.jsx(f,{className:"h-6 w-6 text-white"})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:x.label}),t.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:[x.value," ",x.subtitle&&t.jsx("span",{className:"text-sm text-gray-500",children:x.subtitle})]})]})]})},p)})}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Descripción del Estudio"}),t.jsx("p",{className:"text-gray-700 mb-4",children:"Este análisis presenta los resultados del Test BULL-S aplicado a estudiantes del colegio, una herramienta diseñada para evaluar las dinámicas de agresividad y bullying entre escolares. El test analiza tres dimensiones principales: relaciones de aceptación/rechazo entre los estudiantes, dinámica de bullying (agresores y víctimas), y variables situacionales del fenómeno."}),t.jsxs("p",{className:"text-gray-700",children:["Los datos han sido recogidos mediante cuestionarios completados por ",(m==null?void 0:m.respuestasValidas)||0," estudiantes de ",(m==null?void 0:m.totalGrupos)||0," grupos activos, con edades ",(m==null?void 0:m.rangoEdad)||"no disponibles",". El análisis identifica patrones de relaciones, perfiles de posibles agresores y víctimas, así como características principales de las agresiones.",(m==null?void 0:m.porcentajeRespuestas)&&m.porcentajeRespuestas>0&&t.jsxs("span",{className:"font-medium",children:[" Tasa de respuesta: ",m.porcentajeRespuestas,"%"]})]})]})]}),ky=({eleccionesData:o,rechazosData:n})=>t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-green-600 mb-4",children:"Elecciones Recibidas"}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Estudiantes más elegidos como compañeros"}),t.jsx("div",{className:"space-y-2",children:o.map((r,u)=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-900",children:r.nombre}),t.jsxs("span",{className:"text-sm text-gray-600 ml-2",children:["(",r.grupo,")"]})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2 mr-2",children:t.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${r.porcentaje}%`}})}),t.jsxs("span",{className:"text-sm font-medium text-green-600",children:[r.porcentaje,"%"]})]})]},u))})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-red-600 mb-4",children:"Rechazos Recibidos"}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Estudiantes más rechazados como compañeros"}),t.jsx("div",{className:"space-y-2",children:n.map((r,u)=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-900",children:r.nombre}),t.jsxs("span",{className:"text-sm text-gray-600 ml-2",children:["(",r.grupo,")"]})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2 mr-2",children:t.jsx("div",{className:"bg-red-500 h-2 rounded-full",style:{width:`${r.porcentaje}%`}})}),t.jsxs("span",{className:"text-sm font-medium text-red-600",children:[r.porcentaje,"%"]})]})]},u))})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[t.jsx(Ol,{className:"h-5 w-5 text-blue-500 mr-2"}),"Interpretación Sociométrica"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"border-l-4 border-green-400 pl-4",children:[t.jsx("h4",{className:"font-medium text-green-800",children:"Estudiantes Populares"}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Alta aceptación, bajo rechazo"}),t.jsxs("ul",{className:"mt-2 text-sm text-gray-700",children:[t.jsx("li",{children:"• Raffaella Barrios (25% elecciones)"}),t.jsx("li",{children:"• María José Cañas (20% elecciones)"}),t.jsx("li",{children:"• Isabella Moreno (17% elecciones)"})]})]}),t.jsxs("div",{className:"border-l-4 border-red-400 pl-4",children:[t.jsx("h4",{className:"font-medium text-red-800",children:"Estudiantes Rechazados"}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Alto rechazo, baja aceptación"}),t.jsxs("ul",{className:"mt-2 text-sm text-gray-700",children:[t.jsx("li",{children:"• Paulina Bermúdez (50% rechazos)"}),t.jsx("li",{children:"• Isabella León (22% rechazos)"}),t.jsx("li",{children:"• Luciana Ríos (15% rechazos)"})]})]}),t.jsxs("div",{className:"border-l-4 border-yellow-400 pl-4",children:[t.jsx("h4",{className:"font-medium text-yellow-800",children:"Nivel de Cohesión"}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Evaluación grupal"}),t.jsxs("div",{className:"mt-2",children:[t.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"BAJO"}),t.jsx("p",{className:"text-sm text-gray-700 mt-1",children:"Formación de subgrupos aislados"})]})]})]})]})]}),Uy=({bullyingRolesData:o})=>t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Perfil de Roles de Bullying"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:o.map((n,r)=>t.jsxs("div",{className:"border rounded-lg p-4",children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:n.estudiante}),t.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Grupo: ",n.grupo]}),t.jsxs("div",{className:"space-y-1 text-xs",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Fuerte:"}),t.jsxs("span",{className:"font-medium text-blue-600",children:[n.fuerte,"%"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Maltrato:"}),t.jsxs("span",{className:"font-medium text-red-600",children:[n.maltrato,"%"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Víctima:"}),t.jsxs("span",{className:"font-medium text-green-600",children:[n.victima,"%"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Cobarde:"}),t.jsxs("span",{className:"font-medium text-yellow-600",children:[n.cobarde,"%"]})]})]})]},r))})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-blue-600 mb-4",children:"Agresores Identificados"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:"Isabella León (6B)"}),t.jsx("p",{className:"text-sm text-gray-600",children:"33% fuerte, 33% maltrato, 33% provocación"})]}),t.jsx(Rl,{className:"h-5 w-5 text-red-500"})]}),t.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:"Mía Cardozo (6B)"}),t.jsx("p",{className:"text-sm text-gray-600",children:"33% fuerte, 22% maltrato, 22% provocación"})]}),t.jsx(Rl,{className:"h-5 w-5 text-red-500"})]})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-green-600 mb-4",children:"Víctimas Identificadas"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:"Paulina Bermúdez (6A)"}),t.jsx("p",{className:"text-sm text-gray-600",children:"55% cobarde, 20% víctima, 35% manía"})]}),t.jsx(dd,{className:"h-5 w-5 text-yellow-500"})]}),t.jsxs("div",{className:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:"María Paula Amaya (6B)"}),t.jsx("p",{className:"text-sm text-gray-600",children:"33% cobarde, 11% víctima"})]}),t.jsx(dd,{className:"h-5 w-5 text-yellow-500"})]})]})]})]})]}),$y=({formasAgresionData:o,lugaresAgresionData:n,frecuenciaData:r})=>t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Formas de Agresión"}),t.jsx("div",{className:"space-y-3",children:o.map((u,m)=>t.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg",style:{backgroundColor:`${u.color}20`},children:[t.jsx("span",{className:"font-medium text-gray-900",children:u.tipo}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2 mr-2",children:t.jsx("div",{className:"h-2 rounded-full",style:{width:`${u.porcentaje}%`,backgroundColor:u.color}})}),t.jsxs("span",{className:"text-sm font-medium",style:{color:u.color},children:[u.porcentaje,"%"]})]})]},m))})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Lugares de Agresión"}),t.jsx("div",{className:"space-y-3",children:n.map((u,m)=>t.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg",style:{backgroundColor:`${u.color}20`},children:[t.jsx("span",{className:"font-medium text-gray-900",children:u.lugar}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2 mr-2",children:t.jsx("div",{className:"h-2 rounded-full",style:{width:`${u.porcentaje}%`,backgroundColor:u.color}})}),t.jsxs("span",{className:"text-sm font-medium",style:{color:u.color},children:[u.porcentaje,"%"]})]})]},m))})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Frecuencia de Agresiones"}),t.jsx("div",{className:"space-y-3",children:r.map((u,m)=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-900",children:u.frecuencia}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-3 mr-2",children:t.jsx("div",{className:"bg-purple-500 h-3 rounded-full",style:{width:`${u.porcentaje}%`}})}),t.jsxs("span",{className:"text-sm font-medium text-purple-600",children:[u.porcentaje,"%"]})]})]},m))})]})]}),By=({hallazgos:o,recomendaciones:n})=>t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Hallazgos Principales"}),t.jsx("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:o.map((r,u)=>t.jsx("li",{children:r},u))})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recomendaciones"}),t.jsx("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:n.map((r,u)=>t.jsx("li",{children:r},u))})]})]});var qy=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});const Gy=({className:o=""})=>{const[n,r]=v.useState("general"),[u,m]=v.useState("all"),[x,p]=v.useState(null),[f,c]=v.useState(!0),[h,w]=v.useState(null),[j,C]=v.useState({}),[y,O]=v.useState(null),[_,$]=v.useState([]),[q,k]=v.useState([]),[V,F]=v.useState([]),[E,S]=v.useState([]),[D,z]=v.useState([]),[N,M]=v.useState([]),[K,G]=v.useState([]),J=[{id:"general",label:"Información General",icon:ma},{id:"dimension1",label:"Aceptación/Rechazo",icon:ve},{id:"dimension2",label:"Dinámica Bullying",icon:Ve},{id:"dimension3",label:"Variables Situacionales",icon:zs},{id:"conclusions",label:"Conclusiones",icon:Ol}];v.useEffect(()=>{qy(void 0,null,function*(){var U,X,le,W,ne,oe,ge,xe,je,me,pe,st;try{c(!0),w(null);const lt=u==="all"?void 0:u;if(_.length===0){const Ma=yield qe.getGrupos();$(Ma)}const[os,Ze]=yield Promise.all([qe.getEstadisticasGenerales(void 0,lt),ua.generarReporteCompleto(lt)]);O(os),p(Ze),k(((X=(U=Ze==null?void 0:Ze.dimension1)==null?void 0:U.elecciones)==null?void 0:X.top5)||[]),F(((W=(le=Ze==null?void 0:Ze.dimension1)==null?void 0:le.rechazos)==null?void 0:W.top5)||[]),S(((oe=(ne=Ze==null?void 0:Ze.dimension2)==null?void 0:ne.roles)==null?void 0:oe.perfiles)||[]),z(((xe=(ge=Ze==null?void 0:Ze.dimension3)==null?void 0:ge.formasAgresion)==null?void 0:xe.distribucion)||[]),M(((me=(je=Ze==null?void 0:Ze.dimension3)==null?void 0:je.lugaresAgresion)==null?void 0:me.distribucion)||[]),G(((st=(pe=Ze==null?void 0:Ze.dimension3)==null?void 0:pe.frecuencia)==null?void 0:st.distribucion)||[])}catch(lt){console.error("Error al cargar datos del dashboard:",lt),w("No se pudieron cargar los datos del dashboard. Por favor, intente de nuevo más tarde.")}finally{c(!1)}})},[u,j]);const ae=()=>y?[{label:"Total Estudiantes",value:y.totalEstudiantes.toString(),icon:ve,color:"bg-blue-500"},{label:"Respuestas Válidas",value:y.respuestasValidas.toString(),subtitle:`(${y.porcentajeRespuestas}%)`,icon:ve,color:"bg-green-500"},{label:"Rango de Edad",value:y.rangoEdad,icon:ve,color:"bg-purple-500"},{label:u==="all"?"Total Grupos":"Grupo Seleccionado",value:u==="all"?y.totalGrupos.toString():y.gruposNombres.join(", ")||"N/A",icon:ve,color:"bg-orange-500"}]:[{label:"Total Estudiantes",value:"0",icon:ve,color:"bg-blue-500"},{label:"Respuestas Válidas",value:"0",subtitle:"(0%)",icon:ve,color:"bg-green-500"},{label:"Rango de Edad",value:"No disponible",icon:ve,color:"bg-purple-500"},{label:"Total Grupos",value:"0",icon:ve,color:"bg-orange-500"}],re=q,T=V,H=E;return t.jsxs("div",{className:`bg-gray-50 min-h-screen ${o}`,children:[t.jsx("div",{className:"bg-white shadow-sm border-b",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard: Análisis Test BULL-S (Colegio La SALLE)"}),t.jsxs("p",{className:"text-gray-600 mt-1",children:["Evaluación de la Agresividad entre Escolares - ",u==="all"?`${(y==null?void 0:y.totalGrupos)||3} grupos activos (6B, 8A, 8B)`:`Grupo ${(y==null?void 0:y.gruposNombres.join(", "))||"Seleccionado"}`," - ",(y==null?void 0:y.totalEstudiantes)||83," estudiantes"]})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx(Ny,{onFiltersChange:C}),t.jsxs("select",{value:u,onChange:Q=>m(Q.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"all",children:"Todos los grupos"}),_.map(Q=>t.jsx("option",{value:Q.id,children:Q.nombre},Q.id))]}),t.jsx("button",{onClick:()=>window.location.reload(),className:"flex items-center px-3 py-2 text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",title:"Actualizar datos",children:t.jsx(gd,{className:"h-4 w-4"})}),t.jsx(wy,{notifications:[{id:"1",type:"error",title:"Situación Crítica Detectada",message:"Paulina Bermúdez (6A) presenta 50% de rechazo social. Requiere intervención inmediata.",timestamp:new Date(Date.now()-2*60*60*1e3),read:!1,actionable:!0,action:{label:"Ver detalles",onClick:()=>r("dimension1")}},{id:"2",type:"warning",title:"Comportamiento Agresivo",message:"Isabella León (6B) muestra patrones de agresión sistemática.",timestamp:new Date(Date.now()-4*60*60*1e3),read:!1,actionable:!0,action:{label:"Ver análisis",onClick:()=>r("dimension2")}},{id:"3",type:"info",title:"Análisis Completado",message:"El análisis sociométrico ha sido completado exitosamente.",timestamp:new Date(Date.now()-6*60*60*1e3),read:!0}]}),t.jsx(_y,{currentTab:n}),t.jsx(xy,{grupoId:u==="all"?void 0:u})]})]})})}),t.jsx("div",{className:"bg-white border-b",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:t.jsx("nav",{className:"flex space-x-8",children:J.map(Q=>{const U=Q.icon;return t.jsxs("button",{onClick:()=>r(Q.id),className:`flex items-center px-3 py-4 text-sm font-medium border-b-2 transition-colors ${n===Q.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[t.jsx(U,{className:"h-4 w-4 mr-2"}),Q.label]},Q.id)})})})}),t.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[f&&t.jsx("div",{className:"text-center p-8",children:t.jsx("p",{children:"Cargando datos..."})}),h&&t.jsxs("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md",role:"alert",children:[t.jsx("p",{className:"font-bold",children:"Error"}),t.jsx("p",{children:h})]}),!f&&!h&&t.jsxs(t.Fragment,{children:[n==="general"&&t.jsx(zy,{loading:f,reporteData:x,selectedGroup:u,getKpiData:ae,estadisticas:y}),n==="dimension1"&&t.jsx(ky,{eleccionesData:re,rechazosData:T}),n==="dimension2"&&t.jsx(Uy,{bullyingRolesData:H}),n==="dimension3"&&t.jsx($y,{formasAgresionData:D,lugaresAgresionData:N,frecuenciaData:K}),n==="conclusions"&&t.jsx(By,{})]})]})]})},Ly=()=>t.jsx(Gy,{}),Py=[{label:"Total Estudiantes",value:"24",icon:ve},{label:"Respuestas Válidas",value:"20",subtitle:"(83%)",icon:ve},{label:"Rango de Edad",value:"10-12 años",icon:ve},{label:"Cursos",value:"6A, 6B",icon:ve}],Vy=[{name:"Raffaella Barrios",value:25,grupo:"6A"},{name:"María José Cañas",value:20,grupo:"6A"},{name:"Isabella Moreno",value:17,grupo:"6B"},{name:"Annie Méndez",value:17,grupo:"6B"},{name:"Luciana Ríos",value:15,grupo:"6A"}],Hy=[{name:"Paulina Bermúdez",value:50,grupo:"6A"},{name:"Luciana Ríos",value:15,grupo:"6A"},{name:"Isabella León",value:11,grupo:"6B"},{name:"Mía Cardozo",value:11,grupo:"6B"},{name:"María José Jiménez",value:10,grupo:"6A"}],sd=[{name:"Isabella León",fuerte:33,cobarde:0,maltrato:33,victima:0,provocacion:33,mania:0,grupo:"6B"},{name:"Mía Cardozo",fuerte:33,cobarde:0,maltrato:22,victima:0,provocacion:22,mania:0,grupo:"6B"},{name:"Paulina Bermúdez",fuerte:0,cobarde:55,maltrato:0,victima:20,provocacion:0,mania:35,grupo:"6A"},{name:"Valeria Ortiz",fuerte:20,cobarde:0,maltrato:10,victima:0,provocacion:15,mania:0,grupo:"6A"},{name:"María Paula Amaya",fuerte:0,cobarde:33,maltrato:0,victima:11,provocacion:0,mania:11,grupo:"6B"}],sx=[{name:"Insultos/Amenazas",value:42,color:"#ef4444"},{name:"Rechazo",value:26,color:"#f97316"},{name:"Ignorar",value:16,color:"#eab308"},{name:"Rumores",value:11,color:"#84cc16"},{name:"Maltrato Físico",value:5,color:"#dc2626"}],lx=[{name:"Aula",value:58,color:"#3b82f6"},{name:"Patio",value:21,color:"#06b6d4"},{name:"Pasillos",value:11,color:"#8b5cf6"},{name:"Baños",value:5,color:"#ec4899"},{name:"Otros",value:5,color:"#6b7280"}],Iy=[{name:"Nunca",value:21,color:"#10b981"},{name:"1-2 veces/semana",value:42,color:"#f59e0b"},{name:"Diariamente",value:16,color:"#ef4444"},{name:"Varias veces/día",value:11,color:"#dc2626"},{name:"No responde",value:10,color:"#6b7280"}],Yy=()=>{const[o,n]=v.useState("general"),[r,u]=v.useState("todos"),m=[{id:"general",label:"Información General",icon:Kr},{id:"dimension1",label:"Aceptación/Rechazo",icon:ve},{id:"dimension2",label:"Dinámica Bullying",icon:Ve},{id:"dimension3",label:"Variables Situacionales",icon:zs},{id:"conclusions",label:"Conclusiones",icon:Ol}],x=[{title:"Patrones de agresión claramente definidos",description:'Se identificaron perfiles específicos de agresores en ambos grupos, con Isabella León y Mía Cardozo destacando en 6B (33% cada una percibidas como "fuertes") y Valeria Ortiz, Luciana Ríos y María José Jiménez formando un triángulo de agresión en 6A.'},{title:"Víctimas vulnerables y aisladas",description:'Paulina Bermúdez en 6A emerge como la víctima más identificada (55% la considera "cobarde", 20% la señala como víctima de maltrato y 35% indica que "se le tiene manía"), mientras que María Paula Amaya presenta un perfil similar en 6B.'},{title:"Agresión predominantemente psicológica",description:"Las formas principales de acoso son insultos/amenazas (42%) y rechazo (26%), con el maltrato físico representando solo un 5% de los casos."},{title:"El aula como escenario principal",description:"El 58% de las agresiones ocurren en el aula, contradiciendo la percepción común de que el bullying sucede en espacios no supervisados."}],p=[{title:"Intervención focalizada",description:"Implementar programas específicos para agresores centrados en desarrollo de empatía y resolución de conflictos, y apoyo psicológico para víctimas orientado al fortalecimiento de autoestima y asertividad."},{title:"Reestructuración de espacios",description:"Reorganizar periódicamente la distribución física del aula y establecer un sistema de vigilancia activa durante momentos de transición."},{title:"Programa de alfabetización emocional",description:"Desarrollar talleres vivenciales sobre el impacto del maltrato verbal y relacional, con especial atención a las formas predominantes detectadas."},{title:"Seguimiento sistemático",description:"Reaplicar el Test BULL-S en 3-4 meses para evaluar la efectividad de las intervenciones y establecer un sistema de monitoreo continuo."}],f=({active:c,payload:h,label:w})=>c&&h&&h.length?t.jsxs("div",{className:"bg-white p-3 border border-gray-300 rounded-lg shadow-lg",children:[t.jsx("p",{className:"font-medium",children:w}),h.map((j,C)=>t.jsxs("p",{style:{color:j.color},children:[j.dataKey,": ",j.value,"%"]},C))]}):null;return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx("header",{className:"bg-white shadow-sm border-b",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard: Análisis Test BULL-S (Colegio la SALLE)"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"Evaluación de la Agresividad entre Escolares - Grupos 6A y 6B"})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("select",{value:r,onChange:c=>u(c.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"todos",children:"Todos los grupos"}),t.jsx("option",{value:"6a",children:"Grupo 6A"}),t.jsx("option",{value:"6b",children:"Grupo 6B"})]}),t.jsxs("button",{className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[t.jsx(Ml,{className:"h-4 w-4 mr-2"}),"Exportar Informe"]})]})]})})}),t.jsx("div",{className:"bg-white border-b",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:t.jsx("nav",{className:"flex space-x-8",children:m.map(c=>{const h=c.icon;return t.jsxs("button",{onClick:()=>n(c.id),className:`flex items-center px-3 py-4 text-sm font-medium border-b-2 transition-colors ${o===c.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[t.jsx(h,{className:"h-4 w-4 mr-2"}),c.label]},c.id)})})})}),t.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o==="general"&&t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Py.map((c,h)=>{const w=c.icon;return t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx(w,{className:"h-8 w-8 text-blue-600"})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:c.label}),t.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:[c.value," ",c.subtitle&&t.jsx("span",{className:"text-sm text-gray-500",children:c.subtitle})]})]})]})},h)})}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Descripción del Estudio"}),t.jsx("p",{className:"text-gray-700 mb-4",children:"Este análisis presenta los resultados del Test BULL-S aplicado a estudiantes de 6° grado, una herramienta diseñada para evaluar las dinámicas de agresividad y bullying entre escolares. El test analiza tres dimensiones principales: relaciones de aceptación/rechazo entre los estudiantes, dinámica de bullying (agresores y víctimas), y variables situacionales del fenómeno."}),t.jsx("p",{className:"text-gray-700",children:"Los datos han sido recogidos mediante cuestionarios completados por 20 estudiantes de los cursos 6A y 6B, con edades entre 10 y 12 años. El análisis identifica patrones de relaciones, perfiles de posibles agresores y víctimas, así como características principales de las agresiones."})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[t.jsx(Ve,{className:"h-5 w-5 text-orange-500 mr-2"}),"Hallazgos Principales"]}),t.jsx("ul",{className:"space-y-3",children:x.map((c,h)=>t.jsxs("li",{className:"border-l-4 border-orange-200 pl-4",children:[t.jsx("h4",{className:"font-medium text-gray-900",children:c.title}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:c.description})]},h))})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[t.jsx(Ol,{className:"h-5 w-5 text-green-500 mr-2"}),"Recomendaciones Clave"]}),t.jsx("ul",{className:"space-y-3",children:p.map((c,h)=>t.jsxs("li",{className:"border-l-4 border-green-200 pl-4",children:[t.jsx("h4",{className:"font-medium text-gray-900",children:c.title}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:c.description})]},h))})]})]})]}),o==="dimension1"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-green-600 mb-4",children:"Elecciones Recibidas"}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Estudiantes más elegidos como compañeros de grupo"}),t.jsx(Ye,{width:"100%",height:300,children:t.jsxs(Tt,{data:Vy,children:[t.jsx(Mt,{strokeDasharray:"3 3"}),t.jsx(Rt,{dataKey:"name",angle:-45,textAnchor:"end",height:100}),t.jsx(zt,{}),t.jsx(Fe,{content:t.jsx(f,{})}),t.jsx(kt,{dataKey:"value",fill:"#10b981"})]})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-red-600 mb-4",children:"Rechazos Recibidos"}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Estudiantes más rechazados como compañeros de grupo"}),t.jsx(Ye,{width:"100%",height:300,children:t.jsxs(Tt,{data:Hy,children:[t.jsx(Mt,{strokeDasharray:"3 3"}),t.jsx(Rt,{dataKey:"name",angle:-45,textAnchor:"end",height:100}),t.jsx(zt,{}),t.jsx(Fe,{content:t.jsx(f,{})}),t.jsx(kt,{dataKey:"value",fill:"#ef4444"})]})})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[t.jsx(Ix,{className:"h-5 w-5 text-yellow-500 mr-2"}),"Estudiantes Populares"]}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Alta aceptación, bajo rechazo"}),t.jsxs("ul",{className:"space-y-2",children:[t.jsxs("li",{className:"flex items-center p-2 bg-green-50 rounded",children:[t.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-3"}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium",children:"Raffaella Barrios"}),t.jsx("div",{className:"text-sm text-gray-600",children:"25% elecciones, 0% rechazos"})]})]}),t.jsxs("li",{className:"flex items-center p-2 bg-green-50 rounded",children:[t.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-3"}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium",children:"Isabella Moreno"}),t.jsx("div",{className:"text-sm text-gray-600",children:"17% elecciones, 0% rechazos"})]})]})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[t.jsx(Lp,{className:"h-5 w-5 text-red-500 mr-2"}),"Estudiantes Rechazados"]}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Alto rechazo, baja aceptación"}),t.jsxs("ul",{className:"space-y-2",children:[t.jsxs("li",{className:"flex items-center p-2 bg-red-50 rounded",children:[t.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full mr-3"}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium",children:"Paulina Bermúdez"}),t.jsx("div",{className:"text-sm text-gray-600",children:"0% elecciones, 50% rechazos"})]})]}),t.jsxs("li",{className:"flex items-center p-2 bg-red-50 rounded",children:[t.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full mr-3"}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium",children:"Luciana Ríos"}),t.jsx("div",{className:"text-sm text-gray-600",children:"15% elecciones, 15% rechazos"})]})]})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Nivel de Cohesión"}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-orange-100 rounded-full mb-4",children:t.jsx("span",{className:"text-lg font-bold text-orange-600",children:"BAJO"})}),t.jsx("p",{className:"text-sm text-gray-600",children:"Pocas elecciones recíprocas, formación de pequeños subgrupos aislados entre sí"})]})]})]})]}),o==="dimension2"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Perfil de Roles de Bullying"}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Análisis multidimensional de los estudiantes clave"}),t.jsx(Ye,{width:"100%",height:400,children:t.jsxs(Zx,{data:sd,children:[t.jsx(Kx,{}),t.jsx(Jx,{dataKey:"name"}),t.jsx(Wx,{angle:90,domain:[0,60]}),t.jsx(Si,{name:"Fuerte",dataKey:"fuerte",stroke:"#3b82f6",fill:"#3b82f6",fillOpacity:.1}),t.jsx(Si,{name:"Maltrato",dataKey:"maltrato",stroke:"#ef4444",fill:"#ef4444",fillOpacity:.1}),t.jsx(Si,{name:"Víctima",dataKey:"victima",stroke:"#f59e0b",fill:"#f59e0b",fillOpacity:.1}),t.jsx(is,{})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-blue-600 mb-4",children:"Más Fuertes"}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Estudiantes percibidos como los más fuertes del grupo"}),t.jsx(Ye,{width:"100%",height:250,children:t.jsxs(Tt,{data:sd.filter(c=>c.fuerte>0),children:[t.jsx(Mt,{strokeDasharray:"3 3"}),t.jsx(Rt,{dataKey:"name",angle:-45,textAnchor:"end",height:80}),t.jsx(zt,{}),t.jsx(Fe,{}),t.jsx(kt,{dataKey:"fuerte",fill:"#3b82f6"})]})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-yellow-600 mb-4",children:"Cobardes"}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Estudiantes percibidos como cobardes o infantiles"}),t.jsx(Ye,{width:"100%",height:250,children:t.jsxs(Tt,{data:sd.filter(c=>c.cobarde>0),children:[t.jsx(Mt,{strokeDasharray:"3 3"}),t.jsx(Rt,{dataKey:"name",angle:-45,textAnchor:"end",height:80}),t.jsx(zt,{}),t.jsx(Fe,{}),t.jsx(kt,{dataKey:"cobarde",fill:"#f59e0b"})]})})]})]})]}),o==="dimension3"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Formas de Agresión"}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Tipos de agresión más frecuentes"}),t.jsx(Ye,{width:"100%",height:300,children:t.jsxs(Ul,{children:[t.jsx($l,{data:sx,cx:"50%",cy:"50%",labelLine:!1,label:({name:c,value:h})=>`${c}: ${h}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:sx.map((c,h)=>t.jsx(aa,{fill:c.color},`cell-${h}`))}),t.jsx(Fe,{})]})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Lugares de Agresión"}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Espacios donde ocurren las agresiones"}),t.jsx(Ye,{width:"100%",height:300,children:t.jsxs(Ul,{children:[t.jsx($l,{data:lx,cx:"50%",cy:"50%",labelLine:!1,label:({name:c,value:h})=>`${c}: ${h}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:lx.map((c,h)=>t.jsx(aa,{fill:c.color},`cell-${h}`))}),t.jsx(Fe,{})]})})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Frecuencia de Agresiones"}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Con qué frecuencia ocurren las agresiones"}),t.jsx(Ye,{width:"100%",height:300,children:t.jsxs(Tt,{data:Iy,children:[t.jsx(Mt,{strokeDasharray:"3 3"}),t.jsx(Rt,{dataKey:"name"}),t.jsx(zt,{}),t.jsx(Fe,{}),t.jsx(kt,{dataKey:"value",fill:"#6366f1"})]})})]})]}),o==="conclusions"&&t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[t.jsx(Ol,{className:"h-5 w-5 text-purple-600 mr-2"}),"Conclusiones del Análisis"]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"border-l-4 border-purple-500 pl-6",children:[t.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Situación General"}),t.jsx("p",{className:"text-gray-700",children:"El análisis revela la presencia de dinámicas de bullying claramente establecidas en ambos grupos, con patrones específicos de agresión y victimización que requieren intervención inmediata y sistemática."})]}),t.jsxs("div",{className:"border-l-4 border-orange-500 pl-6",children:[t.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Factores de Riesgo Identificados"}),t.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-1",children:[t.jsx("li",{children:"Baja cohesión grupal que facilita la exclusión"}),t.jsx("li",{children:"Normalización de la agresión psicológica"}),t.jsx("li",{children:"Ausencia de mecanismos efectivos de denuncia"}),t.jsx("li",{children:"Concentración de agresiones en espacios supervisados"})]})]}),t.jsxs("div",{className:"border-l-4 border-green-500 pl-6",children:[t.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Oportunidades de Intervención"}),t.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-1",children:[t.jsx("li",{children:"Identificación clara de agresores y víctimas"}),t.jsx("li",{children:"Presencia de estudiantes con liderazgo positivo"}),t.jsx("li",{children:"Predominio de agresión psicológica sobre física"}),t.jsx("li",{children:"Disposición institucional para el cambio"})]})]}),t.jsxs("div",{className:"border-l-4 border-blue-500 pl-6",children:[t.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Próximos Pasos"}),t.jsx("p",{className:"text-gray-700",children:"Se recomienda implementar un plan de intervención integral que incluya trabajo individual con estudiantes identificados, reestructuración de dinámicas grupales, capacitación docente y seguimiento sistemático de la evolución de las relaciones interpersonales."})]})]})]})})]})]})},Qr=({message:o="Cargando..."})=>t.jsx("div",{className:"flex justify-center items-center h-full min-h-[300px]",children:t.jsxs("div",{className:"text-center",children:[t.jsx(Fr,{className:"h-12 w-12 animate-spin mx-auto mb-4 text-blue-dark"}),t.jsx("p",{className:"text-gray-500",children:o})]})}),Qy=({children:o,className:n=""})=>{const[r,u]=v.useState(!1);v.useEffect(()=>(u(!0),()=>u(!1)),[]);const m={hidden:{opacity:0,y:20},visible:{opacity:1,y:0},exit:{opacity:0,y:-20}};return t.jsx(Pp.div,{initial:"hidden",animate:r?"visible":"hidden",exit:"exit",variants:m,transition:{duration:.3,ease:"easeInOut"},className:n,children:o})};function Xy(){const[o,n]=v.useState({width:void 0,height:void 0,isMobile:!1,isTablet:!1,isDesktop:!0});return v.useEffect(()=>{function r(){const u=window.innerWidth,m=window.innerHeight;n({width:u,height:m,isMobile:u<640,isTablet:u>=640&&u<1024,isDesktop:u>=1024})}return window.addEventListener("resize",r),r(),()=>window.removeEventListener("resize",r)},[]),o}const wd=({title:o,groupId:n,groupName:r,children:u,loading:m=!1,error:x=null,actions:p})=>{const f=ke(),{isMobile:c}=Xy(),[h,w]=v.useState(!1);return t.jsxs(Qy,{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("div",{className:"flex items-center text-gray-500 mb-2",children:t.jsxs("button",{onClick:()=>{f("/admin/dashboards-por-grupo")},className:"flex items-center hover:text-blue-dark",children:[t.jsx($t,{className:"h-4 w-4 mr-1"}),t.jsx("span",{children:"Volver a la lista de grupos"})]})}),t.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[t.jsxs("h1",{className:"text-2xl font-bold text-gray-800",children:[o,": ",r]}),c?t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:()=>w(!h),className:"px-3 py-2 bg-blue-dark text-white rounded-md hover:bg-blue-900 flex items-center",children:[h?t.jsx(ha,{className:"h-5 w-5"}):t.jsx(Px,{className:"h-5 w-5"}),t.jsx("span",{className:"ml-1",children:"Acciones"})]}),h&&t.jsx("div",{className:"absolute right-0 mt-2 w-60 bg-white rounded-md shadow-lg z-20 border border-gray-200",children:t.jsxs("div",{className:"p-2 space-y-2",children:[t.jsxs("button",{onClick:()=>{window.print(),w(!1)},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 flex items-center justify-center",children:[t.jsx(bf,{className:"mr-2 h-4 w-4"}),"Imprimir Reporte"]}),t.jsx("div",{className:"space-y-2",children:p})]})})]}):t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsxs("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 flex items-center",children:[t.jsx(bf,{className:"mr-2 h-4 w-4"}),"Imprimir Reporte"]}),p]})]})]}),x&&t.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-6",children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),t.jsx("div",{className:"ml-3",children:t.jsx("p",{className:"text-sm text-red-700",children:x})})]})}),m?t.jsx("div",{className:"flex justify-center items-center py-12",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-dark"})}):u]})},ft=({title:o,children:n,icon:r,className:u=""})=>t.jsxs("div",{className:`bg-white shadow rounded-lg p-6 mb-6 ${u}`,children:[t.jsxs("div",{className:"flex items-center mb-4",children:[r||t.jsx(Ir,{className:"h-5 w-5 text-blue-dark mr-2"}),t.jsx("h2",{className:"text-xl font-medium text-gray-800",children:o})]}),n]}),Os=({title:o,value:n,subtitle:r,icon:u,color:m="border-blue-dark",trend:x,formatter:p=f=>typeof f=="number"?f.toFixed(1):f.toString()})=>{const f=p(n);return t.jsx("div",{className:`bg-white rounded-lg shadow p-6 border-t-4 ${m}`,children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:o}),t.jsxs("div",{className:"flex items-baseline",children:[t.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:f}),x&&t.jsxs("span",{className:`ml-2 text-sm font-medium ${x.isPositive?"text-green-600":"text-red-600"}`,children:[x.isPositive?"↑":"↓"," ",x.value,"%"]})]}),r&&t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:r})]}),u&&t.jsx("div",{className:"bg-gray-100 p-2 rounded-full",children:u})]})})};var Fy=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});const n0=({className:o=""})=>{const[n,r]=v.useState(!0),[u,m]=v.useState(null),[x,p]=v.useState({institutionsCount:0,groupsCount:0,studentsCount:0,completedSurveysCount:0});return v.useEffect(()=>{Fy(void 0,null,function*(){try{r(!0),m(null);const{count:c,error:h}=yield Z.from("instituciones_educativas").select("*",{count:"exact",head:!0});if(h)throw h;const{count:w,error:j}=yield Z.from("grupos").select("*",{count:"exact",head:!0});if(j)throw j;const{count:C,error:y}=yield Z.from("estudiantes").select("*",{count:"exact",head:!0});if(y)throw y;const{data:O,error:_}=yield Z.from("respuestas").select("*").limit(1);if(_)throw _;const $=O&&O.length>0&&"grupo_id"in O[0];let q=0;try{const{data:k,error:V}=yield Z.rpc("count_estudiantes_con_respuestas");if(!V&&k!==null)q=k,console.log("Usando función SQL optimizada para contar estudiantes con respuestas");else{const{data:F,error:E}=yield Z.from("respuestas").select("estudiante_id").is("estudiante_id",null,{negate:!0});if(E)throw E;const S=new Set;F==null||F.forEach(D=>{D.estudiante_id&&S.add(D.estudiante_id)}),q=S.size,console.log("Usando consulta estándar para contar estudiantes con respuestas")}}catch(k){console.warn("Error al usar método optimizado, usando método alternativo:",k);const{data:V,error:F}=yield Z.from("respuestas").select("estudiante_id").is("estudiante_id",null,{negate:!0});if(F)throw F;const E=new Set;V==null||V.forEach(S=>{S.estudiante_id&&E.add(S.estudiante_id)}),q=E.size}console.log(`Estructura de respuestas: ${$?"Incluye grupo_id":"Sin grupo_id"}`),console.log(`Estudiantes únicos con respuestas: ${q}`),p({institutionsCount:c||0,groupsCount:w||0,studentsCount:C||0,completedSurveysCount:q}),r(!1)}catch(c){console.error("Error al cargar estadísticas:",c),m(c.message||"Error al cargar estadísticas"),r(!1)}})},[]),n?t.jsx("div",{className:`bg-white p-4 rounded-lg shadow-md ${o}`,children:t.jsx("div",{className:"flex justify-center items-center h-32",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-600"})})}):u?t.jsx("div",{className:`bg-white p-4 rounded-lg shadow-md ${o}`,children:t.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4",children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx(Zt,{className:"h-5 w-5 text-red-400"})}),t.jsx("div",{className:"ml-3",children:t.jsx("p",{className:"text-sm text-red-700",children:u})})]})})}):t.jsxs("div",{className:`bg-white p-4 rounded-lg shadow-md ${o}`,children:[t.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800",children:"Resumen del Sistema"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg flex items-center",children:[t.jsx(Oa,{className:"h-10 w-10 text-blue-600 mr-3"}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"Colegios Inscritos"}),t.jsx("p",{className:"text-2xl font-bold text-blue-600",children:x.institutionsCount})]})]}),t.jsxs("div",{className:"bg-green-50 p-4 rounded-lg flex items-center",children:[t.jsx(ve,{className:"h-10 w-10 text-green-600 mr-3"}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"Grupos Registrados"}),t.jsx("p",{className:"text-2xl font-bold text-green-600",children:x.groupsCount})]})]}),t.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg flex items-center",children:[t.jsx(ve,{className:"h-10 w-10 text-purple-600 mr-3"}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"Estudiantes Totales"}),t.jsx("p",{className:"text-2xl font-bold text-purple-600",children:x.studentsCount})]})]}),t.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg flex items-center",children:[t.jsx(Yx,{className:"h-10 w-10 text-orange-600 mr-3"}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"Cuestionarios Completados"}),t.jsx("p",{className:"text-2xl font-bold text-orange-600",children:x.completedSurveysCount}),x.studentsCount>0&&t.jsxs("p",{className:"text-xs text-gray-500",children:[Math.round(x.completedSurveysCount/x.studentsCount*100),"% del total"]})]})]})]})]})};var Zy=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});const Ky={obtenerDatosConvivencia(o,n){return Zy(this,null,function*(){var r,u,m,x,p,f,c,h,w,j;try{const C=yield qe.getRolesBullying(o,n),y={agresores:((r=C.find(N=>N.name==="Agresores"))==null?void 0:r.value)||0,victimas:((u=C.find(N=>N.name==="Víctimas"))==null?void 0:u.value)||0,agresoresVictimas:((m=C.find(N=>N.name==="Víctima-Provocador"))==null?void 0:m.value)||0,otros:((x=C.find(N=>N.name==="No implicados"))==null?void 0:x.value)||0},O=yield qe.getEstatusSociometrico(o,n),_=yield qe.getCohesionGrupal(n),$=yield qe.getFormasAgresion(n),q=yield qe.getLugaresAgresion(n),k=yield qe.getTiposAgresion(n),V={};$.forEach(N=>{V[N.name]=N.value});const F={};q.forEach(N=>{F[N.name]=N.value});const E={fuertes:Math.round(((p=k.find(N=>N.name==="Físico"))==null?void 0:p.value)||35),cobardes:Math.round(((f=k.find(N=>N.name==="Intimidación"))==null?void 0:f.value)||28),agresivos:Math.round(((c=k.find(N=>N.name==="Verbal"))==null?void 0:c.value)||30),victimas:Math.round(((h=C.find(N=>N.name==="Víctimas"))==null?void 0:h.value)||25),provocadores:Math.round(((w=k.find(N=>N.name==="Exclusión"))==null?void 0:w.value)||15),recibenMania:Math.round(((j=k.find(N=>N.name==="Social"))==null?void 0:j.value)||20)};return{tasaIncidencia:y,estatusSociometrico:O,cohesionGrupal:_,dinamicasAcoso:E,factoresSituacionales:{formasAgresion:V,lugaresComunes:F,frecuenciaPercibida:{Nunca:20,"Pocas veces":45,"Bastantes veces":25,"Muchas veces":10},gravedadPercibida:{Nada:15,Poco:30,Bastante:40,Mucho:15},seguridadPercibida:{Nada:10,Poco:20,Bastante:45,Mucho:25}}}}catch(C){return console.error("Error al obtener datos de convivencia:",C),{tasaIncidencia:{agresores:15,victimas:20,agresoresVictimas:5,otros:60},estatusSociometrico:{populares:25,promedio:40,aislados:15,rechazados:12,controvertidos:8},cohesionGrupal:{valor:72,categoria:"Óptima"},dinamicasAcoso:{fuertes:35,cobardes:28,agresivos:30,victimas:25,provocadores:15,recibenMania:20},factoresSituacionales:{formasAgresion:{Insultos:45,Golpes:20,Amenazas:15,Rechazo:35,Rumores:30},lugaresComunes:{Aula:40,Patio:35,Pasillos:15,Baños:10,"Fuera del centro":5},frecuenciaPercibida:{Nunca:20,"Pocas veces":45,"Bastantes veces":25,"Muchas veces":10},gravedadPercibida:{Nada:15,Poco:30,Bastante:40,Mucho:15},seguridadPercibida:{Nada:10,Poco:20,Bastante:45,Mucho:25}}}}})}},Jy=({data:o})=>{const n=[{name:"Agresores",value:Math.round(o.agresores),color:"#FF8042"},{name:"Víctimas",value:Math.round(o.victimas),color:"#0088FE"},{name:"Agresores-Víctimas",value:Math.round(o.agresoresVictimas),color:"#FFBB28"},{name:"No Implicados",value:Math.round(o.otros),color:"#00C49F"}].filter(r=>r.value>0);return t.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md",children:[t.jsx("h3",{className:"font-medium text-gray-800 mb-4 text-center",children:"Tasas de Incidencia General"}),t.jsx("div",{className:"h-64",children:t.jsx(Ye,{width:"100%",height:"100%",children:t.jsxs(Ul,{children:[t.jsx($l,{data:n,cx:"50%",cy:"50%",labelLine:!0,outerRadius:80,fill:"#8884d8",dataKey:"value",nameKey:"name",label:({name:r,value:u})=>`${r}: ${u}%`,children:n.map((r,u)=>t.jsx(aa,{fill:r.color},`cell-${u}`))}),t.jsx(Fe,{formatter:r=>[`${r}%`,""]}),t.jsx(is,{layout:"horizontal",verticalAlign:"bottom",align:"center"})]})})})]})},Wy=({data:o})=>{const n=[{name:"Populares",value:Math.round(o.populares),color:"#0088FE"},{name:"Promedio",value:Math.round(o.promedio),color:"#00C49F"},{name:"Aislados",value:Math.round(o.aislados),color:"#FFBB28"},{name:"Rechazados",value:Math.round(o.rechazados),color:"#FF8042"},{name:"Controvertidos",value:Math.round(o.controvertidos),color:"#8884d8"}];return t.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md",children:[t.jsx("h3",{className:"font-medium text-gray-800 mb-4 text-center",children:"Estatus Sociométrico Promedio"}),t.jsx("div",{className:"h-64",children:t.jsx(Ye,{width:"100%",height:"100%",children:t.jsxs(Tt,{data:n,margin:{top:5,right:30,left:20,bottom:5},layout:"vertical",children:[t.jsx(Mt,{strokeDasharray:"3 3",horizontal:!0,vertical:!1}),t.jsx(Rt,{type:"number",domain:[0,100],label:{value:"Porcentaje (%)",position:"insideBottom",offset:-5}}),t.jsx(zt,{dataKey:"name",type:"category",width:100,tick:{fontSize:12}}),t.jsx(Fe,{formatter:r=>[`${r}%`,""]}),t.jsx(is,{}),t.jsx(kt,{dataKey:"value",name:"Porcentaje",radius:[0,4,4,0],barSize:30,children:n.map((r,u)=>t.jsx(aa,{fill:r.color},`cell-${u}`))})]})})})]})},ej=({data:o})=>{const r=(m=>m>=75?"#4CAF50":m>=50?"#8BC34A":m>=25?"#FFC107":"#F44336")(o.valor),u=[{name:"Valor",value:o.valor},{name:"Restante",value:100-o.valor}];return t.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md",children:[t.jsx("h3",{className:"font-medium text-gray-800 mb-4 text-center",children:"Cohesión Grupal Promedio"}),t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("div",{className:"h-64 w-full",children:t.jsx(Ye,{width:"100%",height:"100%",children:t.jsxs(Ul,{children:[t.jsxs($l,{data:u,cx:"50%",cy:"50%",startAngle:180,endAngle:0,innerRadius:"60%",outerRadius:"80%",paddingAngle:0,dataKey:"value",children:[t.jsx(aa,{fill:r},"cell-0"),t.jsx(aa,{fill:"#EEEEEE"},"cell-1")]}),t.jsx(Fe,{formatter:m=>[`${m}%`,"Cohesión"]})]})})}),t.jsxs("div",{className:"text-center mt-4",children:[t.jsxs("div",{className:"text-3xl font-bold",style:{color:r},children:[o.valor,"%"]}),t.jsx("div",{className:"text-lg font-medium mt-2",children:o.categoria}),t.jsx("div",{className:"text-sm text-gray-600 mt-1",children:o.valor>=75?"Cohesión muy alta":o.valor>=50?"Cohesión óptima":o.valor>=25?"Cohesión baja":"Cohesión muy baja"})]})]})]})},tj=({data:o})=>{const n=[{name:"Fuertes",value:Math.round(o.fuertes),color:"#8884d8"},{name:"Cobardes",value:Math.round(o.cobardes),color:"#82ca9d"},{name:"Agresivos",value:Math.round(o.agresivos),color:"#ffc658"},{name:"Víctimas",value:Math.round(o.victimas),color:"#ff8042"},{name:"Provocadores",value:Math.round(o.provocadores),color:"#a4de6c"},{name:"Reciben Manía",value:Math.round(o.recibenMania),color:"#d0ed57"}];return t.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md",children:[t.jsx("h3",{className:"font-medium text-gray-800 mb-4 text-center",children:"Dinámicas de Acoso Predominantes"}),t.jsx("div",{className:"h-64",children:t.jsx(Ye,{width:"100%",height:"100%",children:t.jsxs(Tt,{data:n,margin:{top:5,right:30,left:20,bottom:5},layout:"vertical",children:[t.jsx(Mt,{strokeDasharray:"3 3",horizontal:!0,vertical:!1}),t.jsx(Rt,{type:"number",domain:[0,100],label:{value:"Porcentaje (%)",position:"insideBottom",offset:-5}}),t.jsx(zt,{dataKey:"name",type:"category",width:100,tick:{fontSize:12}}),t.jsx(Fe,{formatter:r=>[`${r}%`,""]}),t.jsx(is,{}),t.jsx(kt,{dataKey:"value",name:"Porcentaje",radius:[0,4,4,0],barSize:30,children:n.map((r,u)=>t.jsx(aa,{fill:r.color},`cell-${u}`))})]})})})]})},aj=({data:o})=>{const n=Object.entries(o.formasAgresion).map(([f,c],h)=>({name:f,value:Math.round(c),color:["#8884d8","#82ca9d","#ffc658","#ff8042","#a4de6c","#d0ed57"][h%6]})),r=Object.entries(o.lugaresComunes).map(([f,c],h)=>({name:f,value:Math.round(c),color:["#8884d8","#82ca9d","#ffc658","#ff8042","#a4de6c","#d0ed57"][h%6]})),u=Object.entries(o.frecuenciaPercibida).map(([f,c],h)=>({name:f,value:Math.round(c),color:["#8884d8","#82ca9d","#ffc658","#ff8042"][h%4]})),m=Object.entries(o.gravedadPercibida).map(([f,c],h)=>({name:f,value:Math.round(c),color:["#8884d8","#82ca9d","#ffc658","#ff8042"][h%4]})),x=Object.entries(o.seguridadPercibida).map(([f,c],h)=>({name:f,value:Math.round(c),color:["#8884d8","#82ca9d","#ffc658","#ff8042"][h%4]})),p=({title:f,data:c})=>t.jsxs("div",{className:"mb-6",children:[t.jsx("h4",{className:"font-medium text-gray-700 mb-2 text-center",children:f}),t.jsx("div",{className:"h-64",children:t.jsx(Ye,{width:"100%",height:"100%",children:t.jsxs(Tt,{data:c,margin:{top:5,right:30,left:20,bottom:5},layout:"vertical",children:[t.jsx(Mt,{strokeDasharray:"3 3",horizontal:!0,vertical:!1}),t.jsx(Rt,{type:"number",domain:[0,100],label:{value:"Porcentaje (%)",position:"insideBottom",offset:-5}}),t.jsx(zt,{dataKey:"name",type:"category",width:100,tick:{fontSize:12}}),t.jsx(Fe,{formatter:h=>[`${h}%`,""]}),t.jsx(is,{}),t.jsx(kt,{dataKey:"value",name:"Porcentaje",radius:[0,4,4,0],barSize:30,children:c.map((h,w)=>t.jsx(aa,{fill:h.color},`cell-${w}`))})]})})})]});return t.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md",children:[t.jsx("h3",{className:"font-medium text-gray-800 mb-4 text-center",children:"Factores Situacionales"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsx(p,{title:"Formas de Agresión",data:n}),t.jsx(p,{title:"Lugares Comunes",data:r})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6",children:[t.jsx(p,{title:"Frecuencia Percibida",data:u}),t.jsx(p,{title:"Gravedad Percibida",data:m}),t.jsx(p,{title:"Seguridad Percibida",data:x})]})]})},sj={Físico:"#FF8042",Verbal:"#0088FE",Social:"#FFBB28",Cibernético:"#00C49F",Exclusión:"#9966FF",Intimidación:"#FF6666"},lj=({data:o,title:n="Tipos de Agresión",className:r})=>{const[u,m]=v.useState(!1),[x,p]=v.useState(0),[f,c]=v.useState([]),h=o.filter(y=>!(x>0&&y.value<x||f.length>0&&!f.includes(y.name))),w=o.map(y=>y.name),j=y=>{f.includes(y)?c(f.filter(O=>O!==y)):c([...f,y])},C=()=>{p(0),c([])};return t.jsxs("div",{className:`bg-white p-4 rounded-lg shadow-md ${r}`,children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"font-medium text-gray-800 text-lg",children:n}),t.jsxs("button",{onClick:()=>m(!u),className:"flex items-center justify-center px-3 py-1 bg-blue-50 text-blue-600 rounded-md hover:bg-blue-100 transition-colors text-sm",children:[t.jsx(Zr,{className:"h-3.5 w-3.5 mr-1"}),"Filtros",u?t.jsx(ki,{className:"h-3.5 w-3.5 ml-1"}):t.jsx(Bl,{className:"h-3.5 w-3.5 ml-1"})]})]}),u&&t.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor mínimo (%)"}),t.jsx("input",{type:"range",min:"0",max:"100",value:x,onChange:y=>p(parseInt(y.target.value)),className:"w-full"}),t.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[t.jsx("span",{children:"0%"}),t.jsxs("span",{children:[x,"%"]}),t.jsx("span",{children:"100%"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipos de agresión"}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:w.map(y=>t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",id:`type-${y}`,checked:f.length===0||f.includes(y),onChange:()=>j(y),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsx("label",{htmlFor:`type-${y}`,className:"ml-2 text-sm text-gray-700",children:y})]},y))})]})]}),t.jsxs("div",{className:"mt-3 flex justify-end",children:[t.jsx("button",{onClick:C,className:"px-3 py-1 text-sm bg-white border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 mr-2",children:"Limpiar"}),t.jsx("button",{onClick:()=>m(!1),className:"px-3 py-1 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Aplicar"})]})]}),t.jsx("div",{className:"h-80",children:t.jsx(Ye,{width:"100%",height:"100%",children:t.jsxs(Tt,{data:h,margin:{top:20,right:30,left:20,bottom:40},layout:"vertical",children:[t.jsx(Mt,{strokeDasharray:"3 3",horizontal:!0,vertical:!1}),t.jsx(Rt,{type:"number",domain:[0,"dataMax + 10"],label:{value:"Porcentaje (%)",position:"insideBottom",offset:-5}}),t.jsx(zt,{dataKey:"name",type:"category",width:100,tick:{fontSize:12}}),t.jsx(Fe,{formatter:y=>[`${y}%`,"Porcentaje"],contentStyle:{borderRadius:"4px"}}),t.jsx(is,{wrapperStyle:{paddingTop:10}}),t.jsx(kt,{dataKey:"value",name:"Porcentaje",radius:[0,4,4,0],barSize:30,children:h.map((y,O)=>t.jsx(aa,{fill:y.color||sj[y.name]||`#${Math.floor(Math.random()*16777215).toString(16)}`},`cell-${O}`))})]})})}),h.length===0&&t.jsx("div",{className:"text-center text-gray-500 mt-4",children:"No hay datos que cumplan con los criterios de filtrado."}),x>0&&t.jsxs("div",{className:"text-xs text-gray-500 italic mt-2",children:["* Mostrando solo tipos con un porcentaje ≥ ",x,"%"]})]})};var rj=Object.defineProperty,nj=Object.defineProperties,ij=Object.getOwnPropertyDescriptors,rx=Object.getOwnPropertySymbols,oj=Object.prototype.hasOwnProperty,cj=Object.prototype.propertyIsEnumerable,nx=(o,n,r)=>n in o?rj(o,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[n]=r,dj=(o,n)=>{for(var r in n||(n={}))oj.call(n,r)&&nx(o,r,n[r]);if(rx)for(var r of rx(n))cj.call(n,r)&&nx(o,r,n[r]);return o},uj=(o,n)=>nj(o,ij(n)),ld=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});const i0=()=>{var o,n;const[r,u]=v.useState(!0),[m,x]=v.useState(null),[p,f]=v.useState(null),[c,h]=v.useState({tasasIncidencia:!0,estatusSociometrico:!0,cohesionGrupal:!0,dinamicasAcoso:!0,factoresSituacionales:!0,tiposAgresion:!0}),[w,j]=v.useState(!1),[C,y]=v.useState([]),[O,_]=v.useState([]),[$,q]=v.useState("all"),[k,V]=v.useState("all"),[F,E]=v.useState([]),S=M=>{h(K=>uj(dj({},K),{[M]:!K[M]}))};if(v.useEffect(()=>{const M=()=>ld(void 0,null,function*(){try{const G=yield qe.getInstituciones();y(G)}catch(G){console.error("Error al cargar instituciones:",G)}}),K=()=>ld(void 0,null,function*(){try{const G=yield qe.getGrupos();_(G),E(G)}catch(G){console.error("Error al cargar grupos:",G)}});M(),K()},[]),v.useEffect(()=>{E($==="all"?O:O.filter(M=>M.institucion_id===$))},[$,O]),v.useEffect(()=>{ld(void 0,null,function*(){try{u(!0),x(null);const K=$!=="all"?$:void 0,G=k!=="all"?k:void 0,J=yield Ky.obtenerDatosConvivencia(K,G);f(J),u(!1)}catch(K){console.error("Error al cargar datos de convivencia:",K),x("Error al cargar datos de convivencia. Por favor, intente de nuevo."),u(!1)}})},[$,k]),r)return t.jsx("div",{className:"flex justify-center items-center p-8",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-800"})});if(m)return t.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-4",children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx(Ve,{className:"h-5 w-5 text-red-500"})}),t.jsx("div",{className:"ml-3",children:t.jsx("p",{className:"text-sm text-red-700",children:m})})]})});if(!p)return t.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-500 p-4 mb-4",children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx(Ve,{className:"h-5 w-5 text-yellow-500"})}),t.jsx("div",{className:"ml-3",children:t.jsx("p",{className:"text-sm text-yellow-700",children:"No hay datos disponibles para mostrar."})})]})});const D=M=>{q(M.target.value),V("all")},z=M=>{V(M.target.value)},N=()=>{j(!1)};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(Oa,{className:"h-5 w-5 text-blue-600 mr-2"}),t.jsxs("h2",{className:"text-lg font-medium text-gray-800",children:[$==="all"?"Todas las instituciones":((o=C.find(M=>M.id===$))==null?void 0:o.nombre)||"Institución seleccionada",k!=="all"&&` - ${(n=O.find(M=>M.id===k))==null?void 0:n.nombre}`]})]}),t.jsxs("button",{onClick:()=>j(!w),className:"flex items-center justify-center px-4 py-2 bg-blue-800 text-white rounded-md hover:bg-blue-900 transition-colors",children:[t.jsx(Zr,{className:"h-4 w-4 mr-2"}),"Filtros",t.jsx(Bl,{className:"h-4 w-4 ml-2"})]})]}),w&&t.jsxs("div",{className:"mb-6 bg-white p-4 rounded-lg shadow-md",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"institucion",className:"block text-sm font-medium text-gray-700 mb-1",children:"Institución"}),t.jsxs("select",{id:"institucion",className:"block w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",value:$,onChange:D,children:[t.jsx("option",{value:"all",children:"Todas las instituciones"}),C.map(M=>t.jsx("option",{value:M.id,children:M.nombre},M.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"grupo",className:"block text-sm font-medium text-gray-700 mb-1",children:"Grupo"}),t.jsxs("select",{id:"grupo",className:"block w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",value:k,onChange:z,children:[t.jsx("option",{value:"all",children:"Todos los grupos"}),F.map(M=>t.jsx("option",{value:M.id,children:M.nombre},M.id))]})]})]}),t.jsxs("div",{className:"mt-4 flex justify-end",children:[t.jsx("button",{onClick:()=>j(!1),className:"mr-2 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancelar"}),t.jsx("button",{onClick:N,className:"px-4 py-2 bg-blue-800 text-white rounded-md hover:bg-blue-900",children:"Aplicar filtros"})]})]}),t.jsx(ft,{title:"Tasas de Incidencia General",icon:t.jsx(Qx,{className:"h-5 w-5"}),isExpanded:c.tasasIncidencia,onToggle:()=>S("tasasIncidencia"),children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsx(Jy,{data:p.tasaIncidencia}),t.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md",children:[t.jsx("h3",{className:"font-medium text-gray-800 mb-4",children:"Interpretación"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("p",{className:"text-sm text-gray-600",children:[t.jsx("span",{className:"font-semibold",children:"Agresores:"})," ",Math.round(p.tasaIncidencia.agresores),"% de los estudiantes."]}),t.jsxs("p",{className:"text-sm text-gray-600",children:[t.jsx("span",{className:"font-semibold",children:"Víctimas:"})," ",Math.round(p.tasaIncidencia.victimas),"% de los estudiantes."]}),t.jsxs("p",{className:"text-sm text-gray-600",children:[t.jsx("span",{className:"font-semibold",children:"Agresores-Víctimas:"})," ",Math.round(p.tasaIncidencia.agresoresVictimas),"% de los estudiantes."]}),t.jsxs("p",{className:"text-sm text-gray-600",children:[t.jsx("span",{className:"font-semibold",children:"No Implicados:"})," ",Math.round(p.tasaIncidencia.otros),"% de los estudiantes."]}),t.jsxs("p",{className:"text-sm text-gray-600 mt-4",children:[t.jsx("span",{className:"font-semibold",children:"Implicación Total:"})," ",Math.round(p.tasaIncidencia.agresores+p.tasaIncidencia.victimas+p.tasaIncidencia.agresoresVictimas),"% de los estudiantes están implicados en situaciones de acoso escolar."]})]})]})]})}),t.jsx(ft,{title:"Estatus Sociométrico Promedio",icon:t.jsx(ve,{className:"h-5 w-5"}),isExpanded:c.estatusSociometrico,onToggle:()=>S("estatusSociometrico"),children:t.jsx(Wy,{data:p.estatusSociometrico})}),t.jsx(ft,{title:"Cohesión Grupal Promedio",icon:t.jsx(ve,{className:"h-5 w-5"}),isExpanded:c.cohesionGrupal,onToggle:()=>S("cohesionGrupal"),children:t.jsx(ej,{data:p.cohesionGrupal})}),t.jsx(ft,{title:"Dinámicas de Acoso Predominantes",icon:t.jsx(Ve,{className:"h-5 w-5"}),isExpanded:c.dinamicasAcoso,onToggle:()=>S("dinamicasAcoso"),children:t.jsx(tj,{data:p.dinamicasAcoso})}),t.jsx(ft,{title:"Factores Situacionales",icon:t.jsx(Ut,{className:"h-5 w-5"}),isExpanded:c.factoresSituacionales,onToggle:()=>S("factoresSituacionales"),children:t.jsx(aj,{data:p.factoresSituacionales})}),t.jsx(ft,{title:"Tipos de Agresión",icon:t.jsx(Ve,{className:"h-5 w-5"}),isExpanded:c.tiposAgresion,onToggle:()=>S("tiposAgresion"),children:t.jsx(lj,{data:[{name:"Físico",value:Math.round(p.factoresSituacionales.formasAgresion.Físico||35)},{name:"Verbal",value:Math.round(p.factoresSituacionales.formasAgresion.Verbal||65)},{name:"Social",value:Math.round(p.factoresSituacionales.formasAgresion.Social||45)},{name:"Cibernético",value:Math.round(p.factoresSituacionales.formasAgresion.Cibernético||25)},{name:"Exclusión",value:Math.round(p.factoresSituacionales.formasAgresion.Exclusión||40)},{name:"Intimidación",value:Math.round(p.factoresSituacionales.formasAgresion.Intimidación||30)}]})})]})};var mj=Object.defineProperty,hj=Object.defineProperties,fj=Object.getOwnPropertyDescriptors,ix=Object.getOwnPropertySymbols,xj=Object.prototype.hasOwnProperty,gj=Object.prototype.propertyIsEnumerable,ox=(o,n,r)=>n in o?mj(o,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[n]=r,pj=(o,n)=>{for(var r in n||(n={}))xj.call(n,r)&&ox(o,r,n[r]);if(ix)for(var r of ix(n))gj.call(n,r)&&ox(o,r,n[r]);return o},bj=(o,n)=>hj(o,fj(n));function o0(o){const[n,r]=v.useState(o);return{expandedSections:n,toggleSection:p=>{r(f=>bj(pj({},f),{[p]:!f[p]}))},expandAll:()=>{const p=Object.keys(o).reduce((f,c)=>(f[c]=!0,f),{});r(p)},collapseAll:()=>{const p=Object.keys(o).reduce((f,c)=>(f[c]=!1,f),{});r(p)}}}var vj=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});const yj=({groupIdProp:o})=>{var n,r;const{groupId:u}=ql(),m=ke(),x=Zp(),p=o||(x==null?void 0:x.groupId)||u,[f,c]=v.useState(null),[h,w]=v.useState(null),[j,C]=v.useState(null),[y,O]=v.useState(!0),[_,$]=v.useState(null),{expandedSections:q,toggleSection:k}=o0({overview:!0,students:!0,surveys:!1,academic:!1,convivencia:!0}),V=()=>vj(void 0,null,function*(){if(p)try{O(!0),$(null);const{data:F,error:E}=yield Z.from("grupos").select(`
          *,
          instituciones_educativas(*)
        `).eq("id",p).single();if(E)throw E;if(c(F),F!=null&&F.institucion_id){const{data:z}=yield Z.from("instituciones_educativas").select("*").eq("id",F.institucion_id).single();C(z)}const{data:S}=yield Z.from("estudiantes").select("*").eq("grupo_id",p),{data:D}=yield Z.from("respuestas").select("estudiante_id").eq("grupo_id",p);if(S){const z=S.length,N=S.filter(H=>H.genero==="M").length,M=S.filter(H=>H.genero==="F").length;let K="N/A";const G=S.filter(H=>H.edad);G.length>0&&(K=(G.reduce((Q,U)=>Q+U.edad,0)/G.length).toFixed(1));const J={};G.forEach(H=>{const Q=`${H.edad} años`;J[Q]=(J[Q]||0)+1});const ae=Object.entries(J).map(([H,Q])=>({name:H,value:Q})),re=new Set;D==null||D.forEach(H=>re.add(H.estudiante_id));const T=re.size;w({total:z,male:N,female:M,avgAge:K,byAgeGroup:ae,withResponses:T,responseRate:z>0?T/z*100:0})}}catch(F){console.error("Error al cargar datos del grupo:",F),$(F.message||"Error al cargar los datos del grupo")}finally{O(!1)}});return v.useEffect(()=>{V();const F=Z.channel(`dashboard-general-${p}`).on("postgres_changes",{event:"*",schema:"public",table:"estudiantes",filter:`grupo_id=eq.${p}`},()=>V()).on("postgres_changes",{event:"*",schema:"public",table:"respuestas",filter:`grupo_id=eq.${p}`},()=>V()).subscribe();return()=>{Z.removeChannel(F)}},[p]),_?t.jsxs("div",{className:"p-8",children:[t.jsxs("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-6",role:"alert",children:[t.jsx("p",{className:"font-bold",children:"Error"}),t.jsx("p",{children:_})]}),t.jsxs("button",{onClick:()=>m(-1),className:"flex items-center text-blue-600 hover:text-blue-800",children:[t.jsx($t,{className:"mr-2",size:16})," Volver"]})]}):y?t.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-8",children:[t.jsx(Fr,{className:"h-8 w-8 text-blue-600 animate-spin mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Cargando datos del dashboard..."})]}):t.jsxs(wd,{title:"Dashboard General",children:[t.jsxs(ft,{title:"Información General",icon:t.jsx(Oa,{className:"h-5 w-5"}),isExpanded:q.overview,onToggle:()=>k("overview"),children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[t.jsx(Os,{title:"Institución",value:((n=f==null?void 0:f.instituciones_educativas)==null?void 0:n.nombre)||"No disponible",icon:t.jsx(Oa,{className:"h-8 w-8 text-blue-600"}),description:((r=f==null?void 0:f.instituciones_educativas)==null?void 0:r.tipo_institucion)||""}),t.jsx(Os,{title:"Grupo",value:(f==null?void 0:f.nombre)||"No disponible",icon:t.jsx(ve,{className:"h-8 w-8 text-green-600"}),description:`Grado: ${(f==null?void 0:f.grado)||"No especificado"}`}),t.jsx(Os,{title:"Año Escolar",value:(f==null?void 0:f.año_escolar)||"No disponible",icon:t.jsx(Ta,{className:"h-8 w-8 text-purple-600"}),description:"Periodo académico actual"}),t.jsx(Os,{title:"Estudiantes",value:(h==null?void 0:h.total)||0,icon:t.jsx(mt,{className:"h-8 w-8 text-orange-600"}),description:`${(h==null?void 0:h.withResponses)||0} con respuestas`})]}),j&&t.jsx(n0,{institution:j})]}),t.jsxs(ft,{title:"Estudiantes",icon:t.jsx(mt,{className:"h-5 w-5"}),isExpanded:q.students,onToggle:()=>k("students"),children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:[t.jsx(Os,{title:"Total Estudiantes",value:(h==null?void 0:h.total)||0,icon:t.jsx(ve,{className:"h-8 w-8 text-blue-600"}),description:"Matriculados en el grupo"}),t.jsx(Os,{title:"Distribución por Género",value:`${(h==null?void 0:h.male)||0} / ${(h==null?void 0:h.female)||0}`,icon:t.jsx(mt,{className:"h-8 w-8 text-purple-600"}),description:"Masculino / Femenino"}),t.jsx(Os,{title:"Edad Promedio",value:(h==null?void 0:h.avgAge)||"N/A",icon:t.jsx(Ta,{className:"h-8 w-8 text-green-600"}),description:"Años"})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Tasa de Respuesta al Cuestionario"}),t.jsxs("div",{className:"relative pt-1",children:[t.jsxs("div",{className:"flex mb-2 items-center justify-between",children:[t.jsx("div",{children:t.jsxs("span",{className:"text-xs font-semibold inline-block py-1 px-2 uppercase rounded-full text-blue-600 bg-blue-200",children:[h==null?void 0:h.responseRate.toFixed(1),"%"]})}),t.jsx("div",{className:"text-right",children:t.jsxs("span",{className:"text-xs font-semibold inline-block text-blue-600",children:[h==null?void 0:h.withResponses," de ",h==null?void 0:h.total," estudiantes"]})})]}),t.jsx("div",{className:"overflow-hidden h-2 mb-4 text-xs flex rounded bg-blue-200",children:t.jsx("div",{style:{width:`${(h==null?void 0:h.responseRate)||0}%`},className:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-blue-600"})})]}),(h==null?void 0:h.responseRate)<70&&t.jsxs("div",{className:"flex items-start mt-2 text-amber-700 bg-amber-50 p-3 rounded-md",children:[t.jsx(Zt,{className:"h-5 w-5 mr-2 flex-shrink-0 mt-0.5"}),t.jsx("p",{className:"text-sm",children:"La tasa de respuesta es inferior al 70%. Para obtener resultados más precisos, se recomienda que más estudiantes completen el cuestionario."})]})]})]}),t.jsx(ft,{title:"Cuestionarios y Respuestas",icon:t.jsx(Yx,{className:"h-5 w-5"}),isExpanded:q.surveys,onToggle:()=>k("surveys"),children:t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Estado de Cuestionarios"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"Esta sección mostrará información detallada sobre los cuestionarios aplicados y el estado de las respuestas."}),t.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[t.jsxs(Be,{to:`/admin/grupo/${p}/bullying`,className:"bg-blue-800 hover:bg-blue-900 text-white py-2 px-4 rounded flex items-center justify-center",children:[t.jsx(Qx,{className:"h-5 w-5 mr-2"}),"Ver Dashboard de Bullying"]}),t.jsxs("button",{onClick:V,className:"bg-gray-200 hover:bg-gray-300 text-gray-800 py-2 px-4 rounded flex items-center justify-center",children:[t.jsx(gd,{className:"h-5 w-5 mr-2"}),"Actualizar Datos"]})]})]})}),t.jsx(ft,{title:"Información Académica",icon:t.jsx(Ci,{className:"h-5 w-5"}),isExpanded:q.academic,onToggle:()=>k("academic"),children:t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Rendimiento Académico"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"Esta sección mostrará información sobre el rendimiento académico del grupo, incluyendo promedios, asistencia y otros indicadores relevantes."}),t.jsxs(Be,{to:`/admin/grupo/${p}/academico`,className:"bg-blue-800 hover:bg-blue-900 text-white py-2 px-4 rounded inline-flex items-center",children:[t.jsx(Ix,{className:"h-5 w-5 mr-2"}),"Ver Dashboard Académico"]})]})}),t.jsx(ft,{title:"Resumen General de Convivencia Escolar y Dinámicas de Acoso",icon:t.jsx(Zt,{className:"h-5 w-5"}),isExpanded:q.convivencia,onToggle:()=>k("convivencia"),children:t.jsx(i0,{})})]})},Ei=()=>t.jsx(yj,{});var jj=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});const Nj=()=>{const o=ke(),[n,r]=v.useState(!0),[u,m]=v.useState(null),[x,p]=v.useState(!1);return v.useEffect(()=>{jj(void 0,null,function*(){try{const c=localStorage.getItem("lastVisitedGroupId");if(c){const{data:j,error:C}=yield Z.from("grupos").select("id").eq("id",c).single();if(j&&!C){m(c),r(!1);return}}const{data:h,error:w}=yield Z.from("grupos").select("id").limit(1);if(w){console.error("Error al buscar grupos:",w),p(!0),r(!1);return}h&&h.length>0?(m(h[0].id),localStorage.setItem("lastVisitedGroupId",h[0].id)):p(!0)}catch(c){console.error("Error al cargar datos del grupo:",c),p(!0)}finally{r(!1)}})},[o]),n?t.jsx(Qr,{message:"Preparando dashboard..."}):x?(o("/admin/dashboard-general"),t.jsx(Qr,{message:"Redirigiendo..."})):u?t.jsx(Ei,{groupIdProp:u}):t.jsx(Qr,{message:"Cargando dashboard..."})},wj=o=>o.toString().normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""),cx=(o,n)=>{const r=wj(o),u=n.substring(0,8);return`${r}-${u}`};var dx=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});const _j={generateFriendlyRoute(o,n){return dx(this,null,function*(){var r;try{const{data:u,error:m}=yield Z.from("grupos").select("nombre, institucion_id, instituciones_educativas(nombre)").eq("id",o).single();if(m||!u)return console.error("Error al obtener datos del grupo:",m),`/admin/grupo/${o}/${n}`;const x=cx(u.nombre,o);let p="institucion";return(r=u.instituciones_educativas)!=null&&r.nombre&&(p=cx(u.instituciones_educativas.nombre,u.institucion_id)),`/admin/dashboard/${p}/${x}/${n}`}catch(u){return console.error("Error al generar ruta amigable:",u),`/admin/grupo/${o}/${n}`}})},getGroupIdFromFriendlyRoute(o,n){return dx(this,null,function*(){try{const r=n.split("-");if(r.length<2)return null;const u=r[r.length-1],{data:m,error:x}=yield Z.from("grupos").select("id").ilike("id",`${u}%`);return x||!m||m.length===0?(console.error("Error al buscar grupo por shortId:",x),null):m[0].id}catch(r){return console.error("Error al obtener ID del grupo desde ruta amigable:",r),null}})}};var Sj=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});const Ej=()=>{const{institutionSlug:o,groupSlug:n}=ql(),r=ke(),[u,m]=v.useState(!0),[x,p]=v.useState(null),[f,c]=v.useState(!1);return v.useEffect(()=>{Sj(void 0,null,function*(){try{if(!o||!n){c(!0),m(!1);return}const w=yield _j.getGroupIdFromFriendlyRoute(o,n);if(!w){c(!0),m(!1);return}localStorage.setItem("lastVisitedGroupId",w),p(w),m(!1)}catch(w){console.error("Error al resolver ruta amigable:",w),c(!0),m(!1)}})},[o,n,r]),u?t.jsx(Qr,{message:"Cargando dashboard..."}):f||!x?(r("/admin/dashboard-general"),t.jsx(Qr,{message:"Redirigiendo..."})):t.jsx(r0,{children:t.jsx(bd,{context:{groupId:x}})})};var Cj=Object.defineProperty,Aj=Object.defineProperties,Dj=Object.getOwnPropertyDescriptors,ux=Object.getOwnPropertySymbols,Oj=Object.prototype.hasOwnProperty,Tj=Object.prototype.propertyIsEnumerable,mx=(o,n,r)=>n in o?Cj(o,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[n]=r,Mj=(o,n)=>{for(var r in n||(n={}))Oj.call(n,r)&&mx(o,r,n[r]);if(ux)for(var r of ux(n))Tj.call(n,r)&&mx(o,r,n[r]);return o},Rj=(o,n)=>Aj(o,Dj(n)),rd=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});const zj=5*60*1e3,kj=15e3,hx=()=>{const o=ke(),{profile:n={}}=Bt()||{},r=v.useRef(!0),u=v.useRef(new Set),m=v.useRef(!1),[x,p]=v.useState([]),[f,c]=v.useState([]),[h,w]=v.useState(!0),[j,C]=v.useState(null),[y,O]=v.useState(!1),[_,$]=v.useState(""),[q,k]=v.useState("all"),V=[{id:"general",title:"Dashboard General",description:"Visualiza estadísticas generales y resumen de datos del sistema.",icon:t.jsx(Ir,{className:"h-6 w-6 text-blue-600"}),color:"bg-blue-100",path:N=>`/admin/dashboard/${N}/general`},{id:"bullying",title:"Dashboard de Bullying",description:"Análisis detallado de indicadores y métricas relacionadas con situaciones de bullying.",icon:t.jsx(Zt,{className:"h-6 w-6 text-orange-600"}),color:"bg-orange-100",path:N=>`/admin/dashboard/${N}/bullying`},{id:"academic",title:"Rendimiento Académico",description:"Seguimiento del rendimiento académico y factores relacionados.",icon:t.jsx(Vp,{className:"h-6 w-6 text-green-600"}),color:"bg-green-100",path:N=>`/admin/dashboard/${N}/academic`,disabled:!0},{id:"social",title:"Relaciones Sociales",description:"Análisis de redes sociales y dinámicas de grupo entre estudiantes.",icon:t.jsx(ve,{className:"h-6 w-6 text-purple-600"}),color:"bg-purple-100",path:N=>`/admin/dashboard/${N}/social`,disabled:!0}];v.useEffect(()=>(r.current=!0,()=>{r.current=!1}),[]);const F=v.useCallback(()=>(n==null?void 0:n.role)==="Administrador"?V:(n==null?void 0:n.role)==="Psicologo"?V.filter(N=>N.id!=="academic"):(n==null?void 0:n.role)==="Profesor"?V.filter(N=>["general","academic"].includes(N.id)):V.filter(N=>N.id==="general"),[n]),E=v.useCallback(N=>rd(void 0,null,function*(){if(u.current.has(N))return 0;const M=`student_count_${N}`;try{u.current.add(N);const K=Da.get(M);if(K!==null)return K;const{data:G,error:J}=yield Z.from("grupos").select("institucion_id").eq("id",N).single();if(J||!G)return 0;const ae=G.institucion_id,{data:re,error:T}=yield Z.from("estudiantes").select("id").eq("institucion_id",ae);if(T)return 0;const H=(re==null?void 0:re.length)||0;return Da.set(M,H,zj),H}catch(K){return console.warn(`Error al obtener conteo para grupo ${N}:`,K),0}finally{u.current.delete(N)}}),[]),S=v.useCallback(N=>rd(void 0,null,function*(){try{const M=yield E(N.id);r.current&&p(K=>K.map(G=>G.id===N.id?Rj(Mj({},G),{estudiantes_count:M}):G))}catch(M){console.warn(`No se pudo actualizar el conteo para el grupo ${N.id}`)}}),[E]);v.useEffect(()=>{if(m.current)return;const N=()=>rd(void 0,null,function*(){const K=Date.now();try{w(!0),C(null);const{data:G,error:J}=yield Z.from("instituciones_educativas").select("id, nombre").order("nombre");if(J)throw J;if(!r.current)return;c(G||[]);const{data:ae,error:re}=yield Z.from("grupos").select(`
            id,
            nombre,
            institucion_id,
            instituciones_educativas(nombre)
          `).order("nombre");if(re)throw re;if(!r.current)return;const T=ae.map(H=>{var Q,U;return{id:H.id,nombre:H.nombre,institucion_id:H.institucion_id,institucion_nombre:(U=(Q=H.instituciones_educativas)==null?void 0:Q[0])==null?void 0:U.nombre,estudiantes_count:void 0}});p(T),Date.now()-K<5e3&&setTimeout(()=>{if(!r.current)return;T.slice(0,3).forEach(Q=>{S(Q)})},500),m.current=!0}catch(G){if(!r.current)return;console.error("Error al cargar datos:",G),C(G.message||"Error al cargar los datos")}finally{r.current&&w(!1)}}),M=setTimeout(()=>{h&&r.current&&(w(!1),C("La carga de datos está tomando demasiado tiempo. Por favor, recarga la página."))},kj);return N(),()=>clearTimeout(M)},[S]);const D=x.filter(N=>{const M=N.nombre.toLowerCase().includes(_.toLowerCase())||N.institucion_nombre&&N.institucion_nombre.toLowerCase().includes(_.toLowerCase()),K=q==="all"||N.institucion_id===q;return M&&K}),z=(N,M)=>{const K=V.find(G=>G.id===M);if(K){if(K.disabled)return;localStorage.setItem("lastVisitedGroupId",N),o(K.path(N))}};return h?t.jsx("div",{className:"p-6 bg-gray-100 min-h-screen flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx(Fr,{className:"h-10 w-10 animate-spin text-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Cargando grupos y dashboards disponibles..."})]})}):t.jsxs("div",{className:"p-6 bg-gray-100 min-h-screen",children:[t.jsx("h1",{className:"text-3xl font-bold mb-6 text-gray-800",children:"Dashboards Disponibles"}),t.jsx(n0,{className:"mb-6"}),t.jsxs("div",{className:"mb-6 bg-white rounded-lg shadow-md overflow-hidden",children:[t.jsxs("div",{className:"p-4 flex justify-between items-center cursor-pointer hover:bg-gray-50",onClick:()=>O(!y),children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(Kr,{className:"h-5 w-5 text-blue-600 mr-2"}),t.jsx("h2",{className:"text-lg font-medium text-gray-800",children:"Información sobre estudiantes"})]}),t.jsx("div",{children:y?t.jsx(ki,{className:"h-5 w-5 text-gray-600"}):t.jsx(Bl,{className:"h-5 w-5 text-gray-600"})})]}),y&&t.jsxs("div",{className:"p-4 border-t border-gray-200",children:[t.jsx("p",{className:"text-gray-600 mb-2",children:"El conteo de estudiantes muestra el total de estudiantes en la institución."}),t.jsx("p",{className:"text-gray-600",children:"Los dashboards mostrarán información detallada según el grupo seleccionado."})]})]}),t.jsxs("div",{className:"mb-6 bg-white p-4 rounded-lg shadow",children:[t.jsx("p",{className:"mb-4 text-gray-600",children:"Selecciona un grupo para visualizar los dashboards disponibles. Los datos mostrados dependerán del grupo seleccionado."}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-1",children:"Buscar grupo"}),t.jsxs("div",{className:"relative rounded-md shadow-sm",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(zl,{className:"h-4 w-4 text-gray-400"})}),t.jsx("input",{type:"text",id:"search",className:"focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 sm:text-sm border-gray-300 rounded-md",placeholder:"Buscar por nombre de grupo o institución",value:_,onChange:N=>$(N.target.value)})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"institution",className:"block text-sm font-medium text-gray-700 mb-1",children:"Institución"}),t.jsxs("select",{id:"institution",className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",value:q,onChange:N=>k(N.target.value),children:[t.jsx("option",{value:"all",children:"Todas las instituciones"}),f.map(N=>t.jsx("option",{value:N.id,children:N.nombre},N.id))]})]})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6",children:D.length>0?D.map(N=>t.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[t.jsxs("div",{className:"p-4 border-b",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx(Oa,{className:"h-5 w-5 text-blue-600 mr-2"}),t.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:N.nombre})]}),t.jsx("p",{className:"text-sm text-gray-600",children:N.institucion_nombre}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:u.current.has(N.id)?t.jsxs("span",{className:"flex items-center",children:[t.jsx(Fr,{className:"h-3 w-3 animate-spin text-blue-500 mr-1"}),"Consultando estudiantes..."]}):N.estudiantes_count!==void 0?`${N.estudiantes_count} estudiantes en la institución`:"Información no disponible"})]}),t.jsxs("div",{className:"p-4 bg-gray-50",children:[t.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Dashboards disponibles:"}),t.jsx("div",{className:"space-y-2",children:F().map(M=>t.jsxs("button",{className:`w-full flex items-center justify-between px-3 py-2 text-sm rounded-md ${M.disabled?"bg-gray-100 text-gray-500 cursor-not-allowed":`${M.color} text-gray-800 hover:bg-opacity-80`}`,onClick:()=>z(N.id,M.id),disabled:M.disabled,children:[t.jsxs("span",{className:"flex items-center",children:[M.icon,t.jsx("span",{className:"ml-2",children:M.title})]}),M.disabled&&t.jsx("span",{className:"text-xs bg-gray-200 px-2 py-1 rounded",children:"Próximamente"})]},`${N.id}-${M.id}`))})]})]},N.id)):t.jsxs("div",{className:"col-span-full bg-white p-8 rounded-lg shadow-md text-center",children:[t.jsx("div",{className:"text-gray-400 mb-4",children:t.jsx(zl,{className:"h-12 w-12 mx-auto"})}),t.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"No se encontraron grupos"}),t.jsx("p",{className:"text-gray-500",children:_||q!=="all"?"No hay grupos que coincidan con los criterios de búsqueda. Intenta ajustar los filtros.":"No hay grupos disponibles en el sistema."})]})}),t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Acerca de los Dashboards"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:V.map(N=>t.jsxs("div",{className:`p-4 rounded-lg ${N.color}`,children:[t.jsxs("div",{className:"flex items-center mb-2",children:[N.icon,t.jsx("h3",{className:"ml-2 text-lg font-medium",children:N.title})]}),t.jsx("p",{className:"text-gray-700",children:N.description}),N.disabled&&t.jsx("p",{className:"mt-2 text-sm text-gray-500 italic",children:"Esta funcionalidad estará disponible próximamente."})]},N.id))})]})]})},Uj=({students:o,responses:n,filters:r})=>{const[u,m]=v.useState(null),[x,p]=v.useState(null),[f,c]=v.useState({});v.useEffect(()=>{if(o.length===0||n.length===0)return;(()=>{const O={};o.forEach($=>{O[$.id]={},o.forEach(q=>{$.id!==q.id&&(O[$.id][q.id]=0)})}),n.forEach($=>{var q,k,V;if(((q=$.pregunta)==null?void 0:q.categoria)==="aceptacion"||((k=$.pregunta)==null?void 0:k.categoria)==="rechazo"){const F=$.estudiante_id,E=$.respuesta.split(",").map(D=>D.trim()),S=((V=$.pregunta)==null?void 0:V.categoria)==="aceptacion"?1:-1;E.forEach(D=>{O[F]&&O[F][D]!==void 0&&(O[F][D]+=S)})}});const _={};o.forEach($=>{let q=0,k=0;o.forEach(D=>{if($.id!==D.id&&O[D.id][$.id]!==void 0){const z=O[D.id][$.id];z>0&&(q+=z),z<0&&(k+=Math.abs(z))}});const V=o.length-1,F=V>0?q/V:0,E=V>0?k/V:0;let S="promedio";F>.3&&E<.1?S="popular":F<.1&&E>.3?S="rechazado":F>.3&&E>.3?S="controvertido":F<.1&&E<.1&&(S="aislado"),_[$.id]={acceptances:q,rejections:k,acceptanceIndex:F,rejectionIndex:E,statusType:S}}),c(_),p(O)})()},[o,n]);const h=y=>{switch(y){case"popular":return"bg-green-100 text-green-800";case"rechazado":return"bg-red-100 text-red-800";case"controvertido":return"bg-amber-100 text-amber-800";case"aislado":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},w=y=>{switch(y){case"popular":return"Popular";case"rechazado":return"Rechazado";case"controvertido":return"Controvertido";case"aislado":return"Aislado";default:return"Promedio"}},j=()=>!x||o.length===0?t.jsx("div",{className:"bg-gray-50 p-8 rounded-lg text-center",children:t.jsx("p",{className:"text-gray-600",children:"No hay datos suficientes para generar el sociograma."})}):t.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[t.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Este es un sociograma simplificado. En la implementación completa, se mostraría un grafo interactivo con nodos representando estudiantes y aristas representando relaciones."}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(y=>{const O=f[y.id]||{},_=O.statusType||"promedio",$=h(_);return t.jsxs("div",{className:`p-4 rounded-lg border ${u===y.id?"border-blue-500 ring-2 ring-blue-300":"border-gray-200"} cursor-pointer hover:bg-gray-50`,onClick:()=>m(y.id===u?null:y.id),children:[t.jsx("div",{className:"flex justify-between items-start mb-2",children:t.jsxs("div",{className:"flex items-center",children:[t.jsxs("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${y.genero==="M"?"bg-blue-100 text-blue-800":"bg-pink-100 text-pink-800"} mr-2`,children:[y.nombre.charAt(0),y.apellido.charAt(0)]}),t.jsxs("div",{children:[t.jsxs("h4",{className:"font-medium text-gray-800",children:[y.nombre," ",y.apellido]}),t.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${$}`,children:w(_)})]})]})}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(Oi,{className:"h-4 w-4 text-green-600 mr-1"}),t.jsxs("span",{className:"text-sm",children:["Aceptaciones: ",O.acceptances||0]})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(vf,{className:"h-4 w-4 text-red-600 mr-1"}),t.jsxs("span",{className:"text-sm",children:["Rechazos: ",O.rejections||0]})]})]})]},y.id)})})]}),C=()=>{if(!u)return null;const y=o.find($=>$.id===u);if(!y)return null;const O=f[y.id]||{},_={acceptedBy:[],rejectedBy:[],accepts:[],rejects:[]};return x&&(o.forEach($=>{$.id!==y.id&&x[$.id]&&x[$.id][y.id]>0&&_.acceptedBy.push($)}),o.forEach($=>{$.id!==y.id&&x[$.id]&&x[$.id][y.id]<0&&_.rejectedBy.push($)}),x[y.id]&&Object.entries(x[y.id]).forEach(([$,q])=>{if(Number(q)>0){const k=o.find(V=>V.id===$);k&&_.accepts.push(k)}}),x[y.id]&&Object.entries(x[y.id]).forEach(([$,q])=>{if(Number(q)<0){const k=o.find(V=>V.id===$);k&&_.rejects.push(k)}})),t.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200 mt-4",children:[t.jsxs("h3",{className:"text-lg font-semibold mb-3",children:["Detalles de ",y.nombre," ",y.apellido]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Estatus Sociométrico"}),t.jsx("div",{className:`inline-block px-3 py-1 rounded-full ${h(O.statusType||"promedio")} mb-3`,children:w(O.statusType||"promedio")}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Índice de aceptación:"}),t.jsxs("span",{className:"text-sm font-medium",children:[(O.acceptanceIndex*100||0).toFixed(1),"%"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Índice de rechazo:"}),t.jsxs("span",{className:"text-sm font-medium",children:[(O.rejectionIndex*100||0).toFixed(1),"%"]})]})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Relaciones"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center mb-1",children:[t.jsx(Oi,{className:"h-4 w-4 text-green-600 mr-1"}),t.jsxs("span",{className:"text-sm font-medium",children:["Es aceptado por (",_.acceptedBy.length,"):"]})]}),_.acceptedBy.length>0?t.jsx("div",{className:"text-sm text-gray-600 pl-5",children:_.acceptedBy.map($=>t.jsxs("span",{className:"inline-block mr-2",children:[$.nombre," ",$.apellido.charAt(0),".,"]},$.id))}):t.jsx("div",{className:"text-sm text-gray-500 pl-5",children:"Ningún estudiante"})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center mb-1",children:[t.jsx(vf,{className:"h-4 w-4 text-red-600 mr-1"}),t.jsxs("span",{className:"text-sm font-medium",children:["Es rechazado por (",_.rejectedBy.length,"):"]})]}),_.rejectedBy.length>0?t.jsx("div",{className:"text-sm text-gray-600 pl-5",children:_.rejectedBy.map($=>t.jsxs("span",{className:"inline-block mr-2",children:[$.nombre," ",$.apellido.charAt(0),".,"]},$.id))}):t.jsx("div",{className:"text-sm text-gray-500 pl-5",children:"Ningún estudiante"})]})]})]})]})]})};return t.jsxs("div",{children:[t.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 mb-6",children:t.jsxs("div",{className:"flex",children:[t.jsx(Kr,{className:"h-6 w-6 text-blue-600 mr-2"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-blue-800",children:"Análisis Sociométrico"}),t.jsx("p",{className:"text-sm text-blue-700",children:"Este análisis muestra las relaciones sociales entre los estudiantes del grupo, identificando patrones de aceptación y rechazo. Seleccione un estudiante para ver más detalles."})]})]})}),t.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[t.jsx("span",{className:"text-sm font-medium mr-2",children:"Estatus:"}),t.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-green-100 text-green-800",children:"Popular"}),t.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-red-100 text-red-800",children:"Rechazado"}),t.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-amber-100 text-amber-800",children:"Controvertido"}),t.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-blue-100 text-blue-800",children:"Aislado"}),t.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-gray-100 text-gray-800",children:"Promedio"})]}),j(),C()]})};var $j=Object.defineProperty,Bj=Object.defineProperties,qj=Object.getOwnPropertyDescriptors,fx=Object.getOwnPropertySymbols,Gj=Object.prototype.hasOwnProperty,Lj=Object.prototype.propertyIsEnumerable,xx=(o,n,r)=>n in o?$j(o,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[n]=r,gx=(o,n)=>{for(var r in n||(n={}))Gj.call(n,r)&&xx(o,r,n[r]);if(fx)for(var r of fx(n))Lj.call(n,r)&&xx(o,r,n[r]);return o},Pj=(o,n)=>Bj(o,qj(n)),Vj=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});const px=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8","#82ca9d"],Hj=({students:o,responses:n,filters:r})=>{var u,m,x;const[p,f]=v.useState(null),[c,h]=v.useState(null),[w,j]=v.useState([]),[C,y]=v.useState(!1),[O,_]=v.useState({}),[$,q]=v.useState(!1),k=v.useRef(null),V=(N,M)=>{const K=gx({},O);M?K[N]=M:delete K[N],_(K)},F=()=>{_({})},E=()=>Vj(void 0,null,function*(){var N,M,K,G;if(!(!p||!k.current))try{q(!0);const J=new ab("p","mm","a4"),ae=J.internal.pageSize.getWidth(),re=20;let T=20;J.setFontSize(18),J.setTextColor(0,51,153),J.text("Informe de Indicadores de Bullying",re,T),T+=10,J.setFontSize(10),J.setTextColor(100,100,100),J.text(`Fecha: ${new Date().toLocaleDateString()}`,re,T),T+=15,J.setFontSize(14),J.setTextColor(0,0,0),J.text("Resumen de Bullying",re,T),T+=10,J.setFontSize(10),J.setTextColor(60,60,60),J.text(`• Índice de Bullying: ${p.bullyingRate.toFixed(1)}%`,re,T),T+=5,J.text(`• Víctimas: ${((N=p.roles.find(U=>U.name==="Víctimas"))==null?void 0:N.value)||0}`,re,T),T+=5,J.text(`• Agresores: ${((M=p.roles.find(U=>U.name==="Agresores"))==null?void 0:M.value)||0}`,re,T),T+=5,J.text(`• Observadores: ${((K=p.roles.find(U=>U.name==="Observadores"))==null?void 0:K.value)||0}`,re,T),T+=5,J.text(`• No involucrados: ${((G=p.roles.find(U=>U.name==="No involucrados"))==null?void 0:G.value)||0}`,re,T),T+=15,J.setFontSize(14),J.setTextColor(0,0,0),J.text("Tipos de Bullying",re,T),T+=10,J.setFontSize(10),J.setTextColor(60,60,60),p.types.forEach(U=>{J.text(`• ${U.name}: ${U.value} casos`,re,T),T+=5}),T+=10,J.setFontSize(14),J.setTextColor(0,0,0),J.text("Lugares de Bullying",re,T),T+=10,J.setFontSize(10),J.setTextColor(60,60,60),p.places.forEach(U=>{J.text(`• ${U.name}: ${U.value} casos`,re,T),T+=5}),J.addPage(),T=20,J.setFontSize(14),J.setTextColor(0,0,0),J.text("Estudiantes en Situación de Riesgo",re,T),T+=10,J.setFontSize(10),J.setTextColor(60,60,60),w.length>0?w.forEach(U=>{J.text(`• ${U.nombre} ${U.apellido}`,re,T),T+=5,J.text(`   Índice como víctima: ${U.victimScore}`,re,T),T+=5,J.text(`   Índice como agresor: ${U.bullyScore}`,re,T),T+=5,J.text(`   Índice como observador: ${U.observerScore||0}`,re,T),T+=10}):J.text("No se han identificado estudiantes en situación de riesgo",re,T),T+=15,J.setFontSize(14),J.setTextColor(0,0,0),J.text("Recomendaciones Generales",re,T),T+=10,J.setFontSize(10),J.setTextColor(60,60,60),["Implementar un programa de prevención de bullying en el aula","Realizar actividades de cohesión grupal para mejorar las relaciones entre estudiantes","Establecer un sistema de reporte confidencial para situaciones de bullying","Capacitar a los docentes en la detección temprana de situaciones de bullying","Involucrar a las familias en la prevención del bullying"].forEach(U=>{J.text(`• ${U}`,re,T),T+=5});const Q=J.getNumberOfPages();for(let U=1;U<=Q;U++)J.setPage(U),J.setFontSize(8),J.setTextColor(150,150,150),J.text(`BULLS - Informe generado el ${new Date().toLocaleDateString()} - Página ${U} de ${Q}`,re,285);J.save(`Informe_Bullying_${new Date().toISOString().split("T")[0]}.pdf`)}catch(J){console.error("Error al exportar el informe:",J)}finally{q(!1)}}),S=n.filter(N=>{var M,K;return!(O.bullyingType&&((M=N.pregunta)!=null&&M.texto.includes("tipo de agresión"))&&!N.respuesta.split(",").map(J=>J.trim().toLowerCase()).includes(O.bullyingType.toLowerCase())||O.bullyingPlace&&((K=N.pregunta)!=null&&K.texto.includes("lugar donde ocurre"))&&!N.respuesta.split(",").map(J=>J.trim().toLowerCase()).includes(O.bullyingPlace.toLowerCase()))}),D=o.filter(N=>{if(O.gender&&N.genero!==O.gender)return!1;if(O.ageRange&&N.edad){const[M,K]=O.ageRange.split("-").map(Number);if(N.edad<M||N.edad>K)return!1}return!0});v.useEffect(()=>{if(o.length===0||n.length===0)return;const N=Object.keys(O).length>0?D:o,M=Object.keys(O).length>0?S:n;(()=>{const G={físico:0,verbal:0,social:0,psicológico:0,cibernético:0,otro:0},J={aula:0,patio:0,pasillos:0,baños:0,comedor:0,"fuera del colegio":0,"redes sociales":0,otro:0},ae={};N.forEach(U=>{ae[U.id]={víctima:0,agresor:0,observador:0}}),M.forEach(U=>{var X;((X=U.pregunta)==null?void 0:X.categoria)==="bullying"&&(U.pregunta.texto.includes("tipo de agresión")&&U.respuesta.split(",").map(W=>W.trim().toLowerCase()).forEach(W=>{W in G?G[W]++:G.otro++}),U.pregunta.texto.includes("lugar donde ocurre")&&U.respuesta.split(",").map(W=>W.trim().toLowerCase()).forEach(W=>{W in J?J[W]++:J.otro++}),U.pregunta.texto.includes("víctima")&&U.respuesta.split(",").map(W=>W.trim()).forEach(W=>{ae[W]&&ae[W].víctima++}),(U.pregunta.texto.includes("agresor")||U.pregunta.texto.includes("agresión"))&&U.respuesta.split(",").map(W=>W.trim()).forEach(W=>{ae[W]&&ae[W].agresor++}),(U.pregunta.texto.includes("observador")||U.pregunta.texto.includes("presenciado"))&&ae[U.estudiante_id]&&ae[U.estudiante_id].observador++)});const re=Object.entries(G).filter(([U,X])=>X>0).map(([U,X])=>({name:U,value:X})),T=Object.entries(J).filter(([U,X])=>X>0).map(([U,X])=>({name:U,value:X})),H=N.map(U=>{var X,le,W,ne,oe;return Pj(gx({},U),{victimScore:((X=ae[U.id])==null?void 0:X.víctima)||0,bullyScore:((le=ae[U.id])==null?void 0:le.agresor)||0,observerScore:((W=ae[U.id])==null?void 0:W.observador)||0,totalScore:(((ne=ae[U.id])==null?void 0:ne.víctima)||0)*3+(((oe=ae[U.id])==null?void 0:oe.agresor)||0)*2})}).filter(U=>U.victimScore>0||U.bullyScore>0).sort((U,X)=>X.totalScore-U.totalScore);j(H.slice(0,5));const Q=[{name:"Víctimas",value:N.filter(U=>{var X;return(((X=ae[U.id])==null?void 0:X.víctima)||0)>0}).length},{name:"Agresores",value:N.filter(U=>{var X;return(((X=ae[U.id])==null?void 0:X.agresor)||0)>0}).length},{name:"Observadores",value:N.filter(U=>{var X;return(((X=ae[U.id])==null?void 0:X.observador)||0)>0}).length},{name:"No involucrados",value:N.filter(U=>{var X,le,W;return(((X=ae[U.id])==null?void 0:X.víctima)||0)===0&&(((le=ae[U.id])==null?void 0:le.agresor)||0)===0&&(((W=ae[U.id])==null?void 0:W.observador)||0)===0}).length}];f({types:re,places:T,roles:Q,studentRoles:ae,bullyingRate:N.length>0?N.filter(U=>{var X,le;return(((X=ae[U.id])==null?void 0:X.víctima)||0)>0||(((le=ae[U.id])==null?void 0:le.agresor)||0)>0}).length/N.length*100:0})})()},[o,n]);const z=()=>{if(!c||!p)return null;const N=o.find(K=>K.id===c);if(!N)return null;const M=p.studentRoles[N.id]||{víctima:0,agresor:0,observador:0};return t.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200 mt-4",children:[t.jsxs("h3",{className:"text-lg font-semibold mb-3",children:["Perfil de Bullying: ",N.nombre," ",N.apellido]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[t.jsxs("div",{className:"bg-red-50 p-3 rounded-lg",children:[t.jsxs("div",{className:"flex items-center mb-1",children:[t.jsx(Ut,{className:"h-4 w-4 text-red-600 mr-1"}),t.jsx("h4",{className:"font-medium text-gray-800",children:"Índice como Víctima"})]}),t.jsx("p",{className:"text-2xl font-bold text-red-700",children:M.víctima}),t.jsx("p",{className:"text-xs text-gray-600",children:"Menciones como víctima"})]}),t.jsxs("div",{className:"bg-amber-50 p-3 rounded-lg",children:[t.jsxs("div",{className:"flex items-center mb-1",children:[t.jsx(Ve,{className:"h-4 w-4 text-amber-600 mr-1"}),t.jsx("h4",{className:"font-medium text-gray-800",children:"Índice como Agresor"})]}),t.jsx("p",{className:"text-2xl font-bold text-amber-700",children:M.agresor}),t.jsx("p",{className:"text-xs text-gray-600",children:"Menciones como agresor"})]}),t.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[t.jsxs("div",{className:"flex items-center mb-1",children:[t.jsx(xd,{className:"h-4 w-4 text-blue-600 mr-1"}),t.jsx("h4",{className:"font-medium text-gray-800",children:"Índice como Observador"})]}),t.jsx("p",{className:"text-2xl font-bold text-blue-700",children:M.observador}),t.jsx("p",{className:"text-xs text-gray-600",children:"Menciones como observador"})]})]}),t.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[t.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"Recomendaciones"}),M.víctima>2&&t.jsxs("div",{className:"text-sm text-red-700 mb-2",children:[t.jsx("strong",{children:"Atención prioritaria:"})," Este estudiante muestra un alto índice como víctima y requiere intervención inmediata."]}),M.agresor>2&&t.jsxs("div",{className:"text-sm text-amber-700 mb-2",children:[t.jsx("strong",{children:"Intervención conductual:"})," Este estudiante muestra un alto índice como agresor y requiere seguimiento."]}),M.víctima<=2&&M.agresor<=2&&t.jsx("div",{className:"text-sm text-gray-700",children:"No se detectan patrones de riesgo significativos para este estudiante."})]})]})};return p?t.jsxs("div",{ref:k,children:[t.jsx("div",{className:"bg-amber-50 border-l-4 border-amber-500 p-4 mb-6",children:t.jsxs("div",{className:"flex",children:[t.jsx(Kr,{className:"h-6 w-6 text-amber-600 mr-2"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-amber-800",children:"Indicadores de Bullying"}),t.jsx("p",{className:"text-sm text-amber-700",children:"Este análisis muestra los patrones de bullying detectados en el grupo, identificando tipos, lugares y estudiantes en situación de riesgo."})]})]})}),t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsxs("button",{onClick:()=>y(!C),className:"flex items-center bg-white border border-gray-300 rounded-md px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:[t.jsx(Zr,{className:"h-4 w-4 mr-2"}),"Filtros",Object.keys(O).length>0&&t.jsx("span",{className:"ml-2 bg-blue-100 text-blue-800 text-xs font-medium px-2 py-0.5 rounded-full",children:Object.keys(O).length}),C?t.jsx(ki,{className:"h-4 w-4 ml-2"}):t.jsx(Bl,{className:"h-4 w-4 ml-2"})]}),Object.keys(O).length>0&&t.jsxs("button",{onClick:F,className:"ml-2 flex items-center text-sm text-gray-500 hover:text-red-500",children:[t.jsx(ha,{className:"h-4 w-4 mr-1"}),"Limpiar"]})]}),t.jsx("button",{onClick:E,disabled:$,className:"flex items-center bg-blue-600 hover:bg-blue-700 text-white rounded-md px-4 py-2 text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:$?t.jsxs(t.Fragment,{children:[t.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Exportando..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Ml,{className:"h-4 w-4 mr-2"}),"Exportar Informe"]})})]}),C&&t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 mb-6 shadow-sm",children:[t.jsx("h4",{className:"font-medium text-gray-800 mb-3",children:"Filtrar Indicadores de Bullying"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Ve,{className:"h-4 w-4 mr-1"}),t.jsx("span",{children:"Tipo de Bullying"})]})}),t.jsxs("select",{className:"block w-full bg-white border border-gray-300 rounded-md py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:O.bullyingType||"",onChange:N=>V("bullyingType",N.target.value),children:[t.jsx("option",{value:"",children:"Todos los tipos"}),t.jsx("option",{value:"físico",children:"Físico"}),t.jsx("option",{value:"verbal",children:"Verbal"}),t.jsx("option",{value:"social",children:"Social"}),t.jsx("option",{value:"psicológico",children:"Psicológico"}),t.jsx("option",{value:"cibernético",children:"Cibernético"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(zs,{className:"h-4 w-4 mr-1"}),t.jsx("span",{children:"Lugar"})]})}),t.jsxs("select",{className:"block w-full bg-white border border-gray-300 rounded-md py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:O.bullyingPlace||"",onChange:N=>V("bullyingPlace",N.target.value),children:[t.jsx("option",{value:"",children:"Todos los lugares"}),t.jsx("option",{value:"aula",children:"Aula"}),t.jsx("option",{value:"patio",children:"Patio"}),t.jsx("option",{value:"pasillos",children:"Pasillos"}),t.jsx("option",{value:"baños",children:"Baños"}),t.jsx("option",{value:"comedor",children:"Comedor"}),t.jsx("option",{value:"fuera del colegio",children:"Fuera del colegio"}),t.jsx("option",{value:"redes sociales",children:"Redes sociales"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(mt,{className:"h-4 w-4 mr-1"}),t.jsx("span",{children:"Género"})]})}),t.jsxs("select",{className:"block w-full bg-white border border-gray-300 rounded-md py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:O.gender||"",onChange:N=>V("gender",N.target.value),children:[t.jsx("option",{value:"",children:"Todos los géneros"}),t.jsx("option",{value:"M",children:"Masculino"}),t.jsx("option",{value:"F",children:"Femenino"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Ta,{className:"h-4 w-4 mr-1"}),t.jsx("span",{children:"Rango de Edad"})]})}),t.jsxs("select",{className:"block w-full bg-white border border-gray-300 rounded-md py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:O.ageRange||"",onChange:N=>V("ageRange",N.target.value),children:[t.jsx("option",{value:"",children:"Todas las edades"}),t.jsx("option",{value:"6-8",children:"6-8 años"}),t.jsx("option",{value:"9-11",children:"9-11 años"}),t.jsx("option",{value:"12-14",children:"12-14 años"}),t.jsx("option",{value:"15-18",children:"15-18 años"})]})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[t.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx(ns,{className:"h-5 w-5 text-red-600 mr-2"}),t.jsx("h4",{className:"font-medium text-gray-800",children:"Índice de Bullying"})]}),t.jsxs("p",{className:"text-2xl font-bold text-red-700",children:[p.bullyingRate.toFixed(1),"%"]}),t.jsx("p",{className:"text-sm text-gray-600",children:"Estudiantes involucrados"})]}),t.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx(mt,{className:"h-5 w-5 text-amber-600 mr-2"}),t.jsx("h4",{className:"font-medium text-gray-800",children:"Víctimas"})]}),t.jsx("p",{className:"text-2xl font-bold text-amber-700",children:((u=p.roles.find(N=>N.name==="Víctimas"))==null?void 0:u.value)||0}),t.jsx("p",{className:"text-sm text-gray-600",children:"Estudiantes identificados"})]}),t.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx(mt,{className:"h-5 w-5 text-blue-600 mr-2"}),t.jsx("h4",{className:"font-medium text-gray-800",children:"Agresores"})]}),t.jsx("p",{className:"text-2xl font-bold text-blue-700",children:((m=p.roles.find(N=>N.name==="Agresores"))==null?void 0:m.value)||0}),t.jsx("p",{className:"text-sm text-gray-600",children:"Estudiantes identificados"})]}),t.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx(ve,{className:"h-5 w-5 text-green-600 mr-2"}),t.jsx("h4",{className:"font-medium text-gray-800",children:"Observadores"})]}),t.jsx("p",{className:"text-2xl font-bold text-green-700",children:((x=p.roles.find(N=>N.name==="Observadores"))==null?void 0:x.value)||0}),t.jsx("p",{className:"text-sm text-gray-600",children:"Estudiantes identificados"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[t.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[t.jsx("h4",{className:"font-medium text-gray-800 mb-4",children:"Tipos de Bullying"}),p.types.length>0?t.jsx("div",{className:"h-64",children:t.jsx(Ye,{width:"100%",height:"100%",children:t.jsxs(Tt,{data:p.types,margin:{top:5,right:30,left:20,bottom:5},children:[t.jsx(Mt,{strokeDasharray:"3 3"}),t.jsx(Rt,{dataKey:"name"}),t.jsx(zt,{}),t.jsx(Fe,{}),t.jsx(kt,{dataKey:"value",fill:"#8884d8",name:"Casos"})]})})}):t.jsx("div",{className:"h-64 flex items-center justify-center bg-gray-50 rounded-lg",children:t.jsx("p",{className:"text-gray-500",children:"No hay datos disponibles"})})]}),t.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[t.jsx("h4",{className:"font-medium text-gray-800 mb-4",children:"Lugares de Bullying"}),p.places.length>0?t.jsx("div",{className:"h-64",children:t.jsx(Ye,{width:"100%",height:"100%",children:t.jsxs(Tt,{data:p.places,margin:{top:5,right:30,left:20,bottom:5},children:[t.jsx(Mt,{strokeDasharray:"3 3"}),t.jsx(Rt,{dataKey:"name"}),t.jsx(zt,{}),t.jsx(Fe,{}),t.jsx(kt,{dataKey:"value",fill:"#82ca9d",name:"Casos"})]})})}):t.jsx("div",{className:"h-64 flex items-center justify-center bg-gray-50 rounded-lg",children:t.jsx("p",{className:"text-gray-500",children:"No hay datos disponibles"})})]})]}),t.jsxs("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:[t.jsx("h4",{className:"font-medium text-gray-800 mb-4",children:"Distribución de Roles"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx("div",{className:"h-64",children:t.jsx(Ye,{width:"100%",height:"100%",children:t.jsxs(Ul,{children:[t.jsx($l,{data:p.roles,cx:"50%",cy:"50%",labelLine:!0,outerRadius:80,fill:"#8884d8",dataKey:"value",nameKey:"name",label:({name:N,percent:M})=>`${N}: ${(M*100).toFixed(0)}%`,children:p.roles.map((N,M)=>t.jsx(aa,{fill:px[M%px.length]},`cell-${M}`))}),t.jsx(Fe,{}),t.jsx(is,{})]})})}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-medium text-gray-700 mb-3",children:"Estudiantes en Riesgo"}),w.length>0?t.jsx("div",{className:"space-y-2",children:w.map(N=>t.jsx("div",{className:"p-2 border border-gray-200 rounded hover:bg-gray-50 cursor-pointer",onClick:()=>h(N.id===c?null:N.id),children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsxs("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${N.genero==="M"?"bg-blue-100 text-blue-800":"bg-pink-100 text-pink-800"} mr-2`,children:[N.nombre.charAt(0),N.apellido.charAt(0)]}),t.jsxs("span",{className:"font-medium",children:[N.nombre," ",N.apellido]})]}),t.jsxs("div",{className:"flex space-x-1",children:[N.victimScore>0&&t.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:["V:",N.victimScore]}),N.bullyScore>0&&t.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-amber-100 text-amber-800",children:["A:",N.bullyScore]})]})]})},N.id))}):t.jsx("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:t.jsx("p",{className:"text-gray-500",children:"No se han identificado estudiantes en situación de riesgo"})})]})]})]}),z()]}):t.jsx("div",{className:"bg-gray-50 p-8 rounded-lg text-center",children:t.jsx("p",{className:"text-gray-600",children:"Procesando datos de bullying..."})})},Ij=({students:o,responses:n,filters:r})=>{const[u,m]=v.useState(null),[x,p]=v.useState("general");v.useEffect(()=>{if(o.length===0||n.length===0)return;const c=o.filter(w=>{if(r.gender&&w.genero!==r.gender)return!1;if(r.ageRange&&w.edad){const[j,C]=r.ageRange.split("-").map(Number);if(w.edad<j||w.edad>C)return!1}return!0});(()=>{const w={generalCohesion:0,reciprocityIndex:0,networkDensity:0,centralization:0,fragmentation:0},j={};c.forEach(z=>{j[z.id]=[]});let C=0,y=0;n.forEach(z=>{var N;if(((N=z.pregunta)==null?void 0:N.categoria)==="aceptacion"){const M=z.estudiante_id;z.respuesta.split(",").map(G=>G.trim()).forEach(G=>{j[M]&&(j[M].push(G),C++)})}}),Object.entries(j).forEach(([z,N])=>{N.forEach(M=>{j[M]&&j[M].includes(z)&&y++})}),y=y/2;const O=c.length,_=O*(O-1);w.generalCohesion=_>0?C/_*100:0,w.reciprocityIndex=C>0?y/(C/2)*100:0,w.networkDensity=_>0?C/_*100:0;const $={};c.forEach(z=>{$[z.id]=0}),Object.values(j).forEach(z=>{z.forEach(N=>{$[N]!==void 0&&$[N]++})});const q=Math.max(...Object.values($)),k=Object.values($).reduce((z,N)=>z+(q-N),0),V=O>1?(O-1)*(O-1):0;w.centralization=V>0?k/V*100:0;const F={};let E=0;const S=z=>{F[z]=!0,j[z].forEach(N=>{F[N]||S(N)})};c.forEach(z=>{F[z.id]||(S(z.id),E++)}),w.fragmentation=E;const D=[{metric:"Cohesión",value:w.generalCohesion,fullMark:100},{metric:"Reciprocidad",value:w.reciprocityIndex,fullMark:100},{metric:"Densidad",value:w.networkDensity,fullMark:100},{metric:"Centralización",value:100-w.centralization,fullMark:100},{metric:"Integración",value:O>0?(1-w.fragmentation/O)*100:0,fullMark:100}];m({metrics:w,radarData:D,subgroups:E})})()},[o,n,r]);const f=()=>{if(!u)return null;const{metrics:c}=u;switch(x){case"general":return t.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200 mt-4",children:[t.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"Interpretación de la Cohesión Grupal"}),t.jsxs("p",{className:"text-gray-600 text-sm mb-3",children:["El índice de cohesión general del grupo es de ",t.jsxs("span",{className:"font-semibold",children:[c.generalCohesion.toFixed(1),"%"]}),".",c.generalCohesion>70?" Esto indica un grupo con alta cohesión, donde la mayoría de los estudiantes mantienen relaciones positivas entre sí.":c.generalCohesion>40?" El grupo muestra una cohesión moderada, con un balance entre relaciones positivas y neutrales.":" La cohesión del grupo es baja, lo que sugiere posibles dificultades en las relaciones interpersonales."]}),t.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[t.jsx("h5",{className:"font-medium text-blue-800 text-sm mb-1",children:"Recomendaciones"}),c.generalCohesion>70?t.jsx("p",{className:"text-blue-700 text-xs",children:"Mantener las dinámicas positivas del grupo y reforzar la inclusión de todos los miembros."}):c.generalCohesion>40?t.jsx("p",{className:"text-blue-700 text-xs",children:"Implementar actividades de integración grupal y fomentar la cooperación entre estudiantes."}):t.jsx("p",{className:"text-blue-700 text-xs",children:"Se recomienda intervención prioritaria con actividades de cohesión grupal y mediación de conflictos."})]})]});case"reciprocity":return t.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200 mt-4",children:[t.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"Interpretación de la Reciprocidad"}),t.jsxs("p",{className:"text-gray-600 text-sm mb-3",children:["El índice de reciprocidad es de ",t.jsxs("span",{className:"font-semibold",children:[c.reciprocityIndex.toFixed(1),"%"]}),".",c.reciprocityIndex>60?" Esto indica un alto nivel de relaciones mutuas, donde las elecciones son correspondidas.":c.reciprocityIndex>30?" El grupo muestra un nivel moderado de reciprocidad en sus relaciones.":" La reciprocidad es baja, lo que sugiere relaciones unidireccionales o desequilibradas."]})]});case"density":return t.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200 mt-4",children:[t.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"Interpretación de la Densidad de Red"}),t.jsxs("p",{className:"text-gray-600 text-sm mb-3",children:["La densidad de la red social es de ",t.jsxs("span",{className:"font-semibold",children:[c.networkDensity.toFixed(1),"%"]}),".",c.networkDensity>60?" Esto indica una red densa con muchas conexiones entre estudiantes.":c.networkDensity>30?" La red muestra una densidad moderada con un número razonable de conexiones.":" La red es poco densa, con pocas conexiones entre los miembros del grupo."]})]});case"centralization":return t.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200 mt-4",children:[t.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"Interpretación de la Centralización"}),t.jsxs("p",{className:"text-gray-600 text-sm mb-3",children:["El índice de centralización es de ",t.jsxs("span",{className:"font-semibold",children:[c.centralization.toFixed(1),"%"]}),".",c.centralization>60?" Esto indica un grupo altamente centralizado, donde unos pocos estudiantes concentran la mayoría de las elecciones.":c.centralization>30?" El grupo muestra una centralización moderada.":" La centralización es baja, lo que sugiere una distribución más equitativa de las relaciones."]})]});case"fragmentation":return t.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200 mt-4",children:[t.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"Interpretación de la Fragmentación"}),t.jsxs("p",{className:"text-gray-600 text-sm mb-3",children:["Se han identificado ",t.jsx("span",{className:"font-semibold",children:u.subgroups})," subgrupos en la clase.",u.subgroups>3?" El grupo muestra una alta fragmentación, con varios subgrupos aislados entre sí.":u.subgroups>1?" Existe cierta fragmentación en el grupo, con algunos subgrupos identificables.":" El grupo muestra una buena integración, sin fragmentación significativa."]})]});default:return null}};return u?t.jsxs("div",{children:[t.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 mb-6",children:t.jsxs("div",{className:"flex",children:[t.jsx(Hp,{className:"h-6 w-6 text-blue-600 mr-2"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-blue-800",children:"Cohesión Grupal"}),t.jsx("p",{className:"text-sm text-blue-700",children:"Este análisis muestra las métricas de cohesión del grupo, incluyendo reciprocidad, densidad de la red social y centralización."})]})]})}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Métricas de Cohesión"}),t.jsx("div",{className:"h-80",children:t.jsx(Ye,{width:"100%",height:"100%",children:t.jsxs(Zx,{cx:"50%",cy:"50%",outerRadius:"80%",data:u.radarData,children:[t.jsx(Kx,{}),t.jsx(Jx,{dataKey:"metric"}),t.jsx(Wx,{angle:30,domain:[0,100]}),t.jsx(Si,{name:"Cohesión",dataKey:"value",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6}),t.jsx(Fe,{})]})})}),t.jsxs("div",{className:"mt-6",children:[t.jsx("h4",{className:"font-medium text-gray-800 mb-3",children:"Seleccionar métrica para interpretación:"}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsx("button",{onClick:()=>p("general"),className:`px-3 py-1 rounded-full text-sm ${x==="general"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Cohesión General"}),t.jsx("button",{onClick:()=>p("reciprocity"),className:`px-3 py-1 rounded-full text-sm ${x==="reciprocity"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Reciprocidad"}),t.jsx("button",{onClick:()=>p("density"),className:`px-3 py-1 rounded-full text-sm ${x==="density"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Densidad de Red"}),t.jsx("button",{onClick:()=>p("centralization"),className:`px-3 py-1 rounded-full text-sm ${x==="centralization"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Centralización"}),t.jsx("button",{onClick:()=>p("fragmentation"),className:`px-3 py-1 rounded-full text-sm ${x==="fragmentation"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Fragmentación"})]})]}),f()]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[t.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx(ns,{className:"h-5 w-5 text-blue-600 mr-2"}),t.jsx("h4",{className:"font-medium text-gray-800",children:"Índice de Cohesión"})]}),t.jsxs("p",{className:"text-2xl font-bold text-blue-700",children:[u.metrics.generalCohesion.toFixed(1),"%"]}),t.jsx("p",{className:"text-xs text-gray-600",children:"Proporción de elecciones positivas"})]}),t.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx(Oi,{className:"h-5 w-5 text-green-600 mr-2"}),t.jsx("h4",{className:"font-medium text-gray-800",children:"Reciprocidad"})]}),t.jsxs("p",{className:"text-2xl font-bold text-green-700",children:[u.metrics.reciprocityIndex.toFixed(1),"%"]}),t.jsx("p",{className:"text-xs text-gray-600",children:"Elecciones mutuas"})]}),t.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx(ve,{className:"h-5 w-5 text-amber-600 mr-2"}),t.jsx("h4",{className:"font-medium text-gray-800",children:"Subgrupos"})]}),t.jsx("p",{className:"text-2xl font-bold text-amber-700",children:u.subgroups}),t.jsx("p",{className:"text-xs text-gray-600",children:"Número de subgrupos identificados"})]})]})]}):t.jsx("div",{className:"bg-gray-50 p-8 rounded-lg text-center",children:t.jsx("p",{className:"text-gray-600",children:"Procesando datos de cohesión grupal..."})})},bx=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8","#82ca9d"],Yj=({students:o,responses:n,filters:r})=>{const[u,m]=v.useState(null),[x,p]=v.useState("place");v.useEffect(()=>{if(o.length===0||n.length===0)return;const c=n.filter(w=>{var j,C;return!(r.bullyingType&&((j=w.pregunta)!=null&&j.texto.includes("tipo de agresión"))&&!w.respuesta.split(",").map(O=>O.trim().toLowerCase()).includes(r.bullyingType.toLowerCase())||r.bullyingPlace&&((C=w.pregunta)!=null&&C.texto.includes("lugar donde ocurre"))&&!w.respuesta.split(",").map(O=>O.trim().toLowerCase()).includes(r.bullyingPlace.toLowerCase()))});(()=>{var w,j,C;const y={aula:0,patio:0,pasillos:0,baños:0,comedor:0,"fuera del colegio":0,"redes sociales":0,otro:0},O={entrada:0,clases:0,recreo:0,almuerzo:0,salida:0,"fuera del horario escolar":0,otro:0},_={físico:0,verbal:0,social:0,psicológico:0,cibernético:0,otro:0};c.forEach(K=>{var G,J,ae,re;(G=K.pregunta)!=null&&G.texto.includes("lugar donde ocurre")&&K.respuesta.split(",").map(H=>H.trim().toLowerCase()).forEach(H=>{H in y?y[H]++:y.otro++}),((J=K.pregunta)!=null&&J.texto.includes("momento del día")||(ae=K.pregunta)!=null&&ae.texto.includes("horario"))&&K.respuesta.split(",").map(H=>H.trim().toLowerCase()).forEach(H=>{H in O?O[H]++:O.otro++}),(re=K.pregunta)!=null&&re.texto.includes("tipo de agresión")&&K.respuesta.split(",").map(H=>H.trim().toLowerCase()).forEach(H=>{H in _?_[H]++:_.otro++})});const $=Object.entries(y).filter(([K,G])=>G>0).map(([K,G])=>({name:K,value:G})),q=Object.entries(O).filter(([K,G])=>G>0).map(([K,G])=>({name:K,value:G})),k=Object.entries(_).filter(([K,G])=>G>0).map(([K,G])=>({name:K,value:G})),V=[],F=Math.max(...Object.values(y)),E=(w=Object.entries(y).find(([K,G])=>G===F))==null?void 0:w[0];F>5&&E&&V.push({type:"place",description:`Alta concentración de incidentes en ${E}`,severity:"high"});const S=Math.max(...Object.values(O)),D=(j=Object.entries(O).find(([K,G])=>G===S))==null?void 0:j[0];S>5&&D&&V.push({type:"time",description:`Alta concentración de incidentes durante ${D}`,severity:"medium"});const z=Math.max(...Object.values(_)),N=(C=Object.entries(_).find(([K,G])=>G===z))==null?void 0:C[0],M=Object.values(_).reduce((K,G)=>K+G,0);z>0&&M>0&&z/M>.6&&N&&V.push({type:"type",description:`Predominancia de agresión ${N}`,severity:N==="físico"||N==="cibernético"?"high":"medium"}),m({places:$,times:q,types:k,riskPatterns:V})})()},[o,n,r]);const f=()=>{if(!u)return null;switch(x){case"place":return t.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200 mt-4",children:[t.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"Recomendaciones por Lugar"}),t.jsx("p",{className:"text-gray-600 text-sm mb-3",children:u.places.length>0?`Los incidentes se concentran principalmente en ${u.places[0].name}.`:"No hay datos suficientes sobre lugares de incidentes."}),u.places.length>0&&t.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[t.jsx("h5",{className:"font-medium text-blue-800 text-sm mb-1",children:"Acciones sugeridas"}),t.jsxs("ul",{className:"text-blue-700 text-xs list-disc pl-4",children:[t.jsxs("li",{children:["Aumentar la supervisión en ",u.places[0].name]}),t.jsx("li",{children:"Implementar un sistema de vigilancia por pares en zonas de riesgo"}),t.jsx("li",{children:"Reorganizar espacios para mejorar la visibilidad y reducir zonas aisladas"})]})]})]});case"time":return t.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200 mt-4",children:[t.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"Recomendaciones por Horario"}),t.jsx("p",{className:"text-gray-600 text-sm mb-3",children:u.times.length>0?`Los incidentes ocurren principalmente durante ${u.times[0].name}.`:"No hay datos suficientes sobre horarios de incidentes."}),u.times.length>0&&t.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[t.jsx("h5",{className:"font-medium text-blue-800 text-sm mb-1",children:"Acciones sugeridas"}),t.jsxs("ul",{className:"text-blue-700 text-xs list-disc pl-4",children:[t.jsxs("li",{children:["Reforzar la supervisión durante ",u.times[0].name]}),t.jsx("li",{children:"Implementar actividades estructuradas durante este horario"}),t.jsx("li",{children:"Capacitar a los docentes para intervención temprana en estos momentos"})]})]})]});case"type":return t.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200 mt-4",children:[t.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"Recomendaciones por Tipo de Agresión"}),t.jsx("p",{className:"text-gray-600 text-sm mb-3",children:u.types.length>0?`El tipo de agresión predominante es ${u.types[0].name}.`:"No hay datos suficientes sobre tipos de agresión."}),u.types.length>0&&t.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[t.jsx("h5",{className:"font-medium text-blue-800 text-sm mb-1",children:"Acciones sugeridas"}),t.jsx("ul",{className:"text-blue-700 text-xs list-disc pl-4",children:u.types[0].name==="físico"?t.jsxs(t.Fragment,{children:[t.jsx("li",{children:"Implementar protocolos específicos para prevenir agresiones físicas"}),t.jsx("li",{children:"Capacitar al personal en técnicas de intervención segura"}),t.jsx("li",{children:"Establecer consecuencias claras para agresiones físicas"})]}):u.types[0].name==="verbal"?t.jsxs(t.Fragment,{children:[t.jsx("li",{children:"Desarrollar programas de comunicación asertiva"}),t.jsx("li",{children:"Implementar campañas de respeto y lenguaje positivo"}),t.jsx("li",{children:"Trabajar en el reconocimiento de agresiones verbales"})]}):u.types[0].name==="social"?t.jsxs(t.Fragment,{children:[t.jsx("li",{children:"Implementar actividades de inclusión y cohesión grupal"}),t.jsx("li",{children:"Trabajar en la empatía y el reconocimiento de la exclusión"}),t.jsx("li",{children:"Fomentar la integración de todos los estudiantes"})]}):u.types[0].name==="cibernético"?t.jsxs(t.Fragment,{children:[t.jsx("li",{children:"Desarrollar programas de ciudadanía digital"}),t.jsx("li",{children:"Establecer protocolos para reportar ciberbullying"}),t.jsx("li",{children:"Educar sobre el uso responsable de redes sociales"})]}):t.jsxs(t.Fragment,{children:[t.jsx("li",{children:"Implementar programas generales de prevención del bullying"}),t.jsx("li",{children:"Capacitar a la comunidad educativa en detección temprana"}),t.jsx("li",{children:"Establecer canales seguros para reportar incidentes"})]})})]})]});default:return null}};return u?t.jsxs("div",{children:[t.jsx("div",{className:"bg-amber-50 border-l-4 border-amber-500 p-4 mb-6",children:t.jsxs("div",{className:"flex",children:[t.jsx(zs,{className:"h-6 w-6 text-amber-600 mr-2"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-amber-800",children:"Factores Situacionales"}),t.jsx("p",{className:"text-sm text-amber-700",children:"Este análisis muestra dónde, cuándo y cómo ocurren las situaciones de bullying, permitiendo identificar patrones y desarrollar intervenciones específicas."})]})]})}),u.riskPatterns.length>0&&t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[t.jsxs("div",{className:"flex items-center mb-3",children:[t.jsx(Ve,{className:"h-5 w-5 text-red-600 mr-2"}),t.jsx("h4",{className:"font-medium text-red-800",children:"Patrones de Riesgo Identificados"})]}),t.jsx("ul",{className:"space-y-2",children:u.riskPatterns.map((c,h)=>t.jsxs("li",{className:"flex items-start",children:[t.jsx("span",{className:`inline-block w-2 h-2 rounded-full mt-1.5 mr-2 ${c.severity==="high"?"bg-red-500":c.severity==="medium"?"bg-amber-500":"bg-blue-500"}`}),t.jsx("span",{className:"text-sm text-gray-700",children:c.description})]},h))})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsxs("div",{className:"flex items-center mb-3",children:[t.jsx(zs,{className:"h-5 w-5 text-blue-600 mr-2"}),t.jsx("h4",{className:"font-medium text-gray-800",children:"Por Lugar"})]}),u.places.length>0?t.jsx("div",{className:"h-64",children:t.jsx(Ye,{width:"100%",height:"100%",children:t.jsxs(Tt,{data:u.places,margin:{top:5,right:30,left:20,bottom:5},children:[t.jsx(Mt,{strokeDasharray:"3 3"}),t.jsx(Rt,{dataKey:"name"}),t.jsx(zt,{}),t.jsx(Fe,{}),t.jsx(kt,{dataKey:"value",fill:"#0088FE",name:"Casos"})]})})}):t.jsx("div",{className:"h-64 flex items-center justify-center bg-gray-50 rounded-lg",children:t.jsx("p",{className:"text-gray-500",children:"No hay datos disponibles"})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsxs("div",{className:"flex items-center mb-3",children:[t.jsx(Xr,{className:"h-5 w-5 text-green-600 mr-2"}),t.jsx("h4",{className:"font-medium text-gray-800",children:"Por Horario"})]}),u.times.length>0?t.jsx("div",{className:"h-64",children:t.jsx(Ye,{width:"100%",height:"100%",children:t.jsxs(Tt,{data:u.times,margin:{top:5,right:30,left:20,bottom:5},children:[t.jsx(Mt,{strokeDasharray:"3 3"}),t.jsx(Rt,{dataKey:"name"}),t.jsx(zt,{}),t.jsx(Fe,{}),t.jsx(kt,{dataKey:"value",fill:"#00C49F",name:"Casos"})]})})}):t.jsx("div",{className:"h-64 flex items-center justify-center bg-gray-50 rounded-lg",children:t.jsx("p",{className:"text-gray-500",children:"No hay datos disponibles"})})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[t.jsxs("div",{className:"flex items-center mb-3",children:[t.jsx(Ve,{className:"h-5 w-5 text-amber-600 mr-2"}),t.jsx("h4",{className:"font-medium text-gray-800",children:"Por Tipo de Agresión"})]}),u.types.length>0?t.jsx("div",{className:"h-64",children:t.jsx(Ye,{width:"100%",height:"100%",children:t.jsxs(Ul,{children:[t.jsx($l,{data:u.types,cx:"50%",cy:"50%",labelLine:!0,outerRadius:80,fill:"#8884d8",dataKey:"value",nameKey:"name",label:({name:c,percent:h})=>`${c}: ${(h*100).toFixed(0)}%`,children:u.types.map((c,h)=>t.jsx(aa,{fill:bx[h%bx.length]},`cell-${h}`))}),t.jsx(Fe,{}),t.jsx(is,{})]})})}):t.jsx("div",{className:"h-64 flex items-center justify-center bg-gray-50 rounded-lg",children:t.jsx("p",{className:"text-gray-500",children:"No hay datos disponibles"})})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("h4",{className:"font-medium text-gray-800 mb-3",children:"Seleccionar factor para recomendaciones:"}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsx("button",{onClick:()=>p("place"),className:`px-3 py-1 rounded-full text-sm ${x==="place"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Lugar"}),t.jsx("button",{onClick:()=>p("time"),className:`px-3 py-1 rounded-full text-sm ${x==="time"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Horario"}),t.jsx("button",{onClick:()=>p("type"),className:`px-3 py-1 rounded-full text-sm ${x==="type"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Tipo de Agresión"})]})]}),f()]}):t.jsx("div",{className:"bg-gray-50 p-8 rounded-lg text-center",children:t.jsx("p",{className:"text-gray-600",children:"Procesando datos situacionales..."})})};var Qj=Object.defineProperty,vx=Object.getOwnPropertySymbols,Xj=Object.prototype.hasOwnProperty,Fj=Object.prototype.propertyIsEnumerable,yx=(o,n,r)=>n in o?Qj(o,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[n]=r,Zj=(o,n)=>{for(var r in n||(n={}))Xj.call(n,r)&&yx(o,r,n[r]);if(vx)for(var r of vx(n))Fj.call(n,r)&&yx(o,r,n[r]);return o};const Kj=({onFilterChange:o,students:n,responses:r})=>{const[u,m]=v.useState(!1),[x,p]=v.useState({}),[f,c]=v.useState({genders:[],ageRanges:[],bullyingTypes:[],bullyingPlaces:[]});v.useEffect(()=>{if(n.length===0&&r.length===0)return;const j=[...new Set(n.filter(k=>k.genero).map(k=>k.genero))],C=n.filter(k=>k.edad).map(k=>k.edad),y=Math.min(...C),O=Math.max(...C),_=[];for(let k=y;k<=O;k+=2)_.push(`${k}-${Math.min(k+1,O)}`);const $=[];r.forEach(k=>{var V;(V=k.pregunta)!=null&&V.texto.includes("tipo de agresión")&&k.respuesta.split(",").map(E=>E.trim().toLowerCase()).forEach(E=>{$.includes(E)||$.push(E)})});const q=[];r.forEach(k=>{var V;(V=k.pregunta)!=null&&V.texto.includes("lugar donde ocurre")&&k.respuesta.split(",").map(E=>E.trim().toLowerCase()).forEach(E=>{q.includes(E)||q.push(E)})}),c({genders:j,ageRanges:_,bullyingTypes:$,bullyingPlaces:q})},[n,r]);const h=(j,C)=>{const y=Zj({},x);C?y[j]=C:delete y[j],p(y),o(y)},w=()=>{p({}),o({})};return t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsxs("button",{onClick:()=>m(!u),className:"flex items-center bg-white border border-gray-300 rounded-md px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:[t.jsx(Zr,{className:"h-4 w-4 mr-2"}),"Filtros",Object.keys(x).length>0&&t.jsx("span",{className:"ml-2 bg-blue-100 text-blue-800 text-xs font-medium px-2 py-0.5 rounded-full",children:Object.keys(x).length}),u?t.jsx(ki,{className:"h-4 w-4 ml-2"}):t.jsx(Bl,{className:"h-4 w-4 ml-2"})]}),Object.keys(x).length>0&&t.jsxs("button",{onClick:w,className:"flex items-center text-sm text-gray-500 hover:text-red-500",children:[t.jsx(ha,{className:"h-4 w-4 mr-1"}),"Limpiar filtros"]})]}),u&&t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm",children:[t.jsx("h4",{className:"font-medium text-gray-800 mb-3",children:"Filtrar datos del grupo"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[t.jsx(ve,{className:"h-4 w-4 inline mr-1"}),"Género"]}),t.jsxs("select",{value:x.gender||"",onChange:j=>h("gender",j.target.value),className:"w-full rounded-md border border-gray-300 py-2 px-3 text-sm",children:[t.jsx("option",{value:"",children:"Todos"}),f.genders.map(j=>t.jsx("option",{value:j,children:j.charAt(0).toUpperCase()+j.slice(1)},j))]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[t.jsx(Ta,{className:"h-4 w-4 inline mr-1"}),"Rango de edad"]}),t.jsxs("select",{value:x.ageRange||"",onChange:j=>h("ageRange",j.target.value),className:"w-full rounded-md border border-gray-300 py-2 px-3 text-sm",children:[t.jsx("option",{value:"",children:"Todos"}),f.ageRanges.map(j=>t.jsxs("option",{value:j,children:[j," años"]},j))]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[t.jsx(Ve,{className:"h-4 w-4 inline mr-1"}),"Tipo de bullying"]}),t.jsxs("select",{value:x.bullyingType||"",onChange:j=>h("bullyingType",j.target.value),className:"w-full rounded-md border border-gray-300 py-2 px-3 text-sm",children:[t.jsx("option",{value:"",children:"Todos"}),f.bullyingTypes.map(j=>t.jsx("option",{value:j,children:j.charAt(0).toUpperCase()+j.slice(1)},j))]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[t.jsx(zs,{className:"h-4 w-4 inline mr-1"}),"Lugar"]}),t.jsxs("select",{value:x.bullyingPlace||"",onChange:j=>h("bullyingPlace",j.target.value),className:"w-full rounded-md border border-gray-300 py-2 px-3 text-sm",children:[t.jsx("option",{value:"",children:"Todos"}),f.bullyingPlaces.map(j=>t.jsx("option",{value:j,children:j.charAt(0).toUpperCase()+j.slice(1)},j))]})]})]}),Object.keys(x).length>0&&t.jsxs("div",{className:"mt-4 bg-blue-50 p-3 rounded-lg",children:[t.jsx("h5",{className:"text-sm font-medium text-blue-800 mb-1",children:"Filtros activos:"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(x).map(([j,C])=>t.jsxs("span",{className:"inline-flex items-center bg-white border border-blue-200 rounded-full px-2 py-1 text-xs text-blue-800",children:[j==="gender"&&"Género: ",j==="ageRange"&&"Edad: ",j==="bullyingType"&&"Tipo: ",j==="bullyingPlace"&&"Lugar: ",C,t.jsx("button",{onClick:()=>h(j,""),className:"ml-1 text-blue-500 hover:text-blue-700",children:t.jsx(ha,{className:"h-3 w-3"})})]},j))})]})]})]})};var Jj=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});const Wj=({groupIdProp:o})=>{var n;const{groupId:r}=ql(),u=ke(),m=o||r,[x,p]=v.useState(null),[f,c]=v.useState([]),[h,w]=v.useState([]),[j,C]=v.useState(!0),[y,O]=v.useState(null),[_,$]=v.useState({}),{expandedSections:q,toggleSection:k}=o0({sociometric:!0,bullying:!0,cohesion:!1,situational:!1}),V=()=>Jj(void 0,null,function*(){if(m)try{C(!0),O(null);const{data:E,error:S}=yield Z.from("grupos").select(`
          *,
          instituciones_educativas(*)
        `).eq("id",m).single();if(S)throw S;p(E);const{data:D,error:z}=yield Z.from("estudiantes").select("*").eq("grupo_id",m);if(z)throw z;c(D||[]);const{data:N,error:M}=yield Z.from("respuestas").select(`
          *,
          estudiante:estudiante_id(id, nombre, apellido, genero),
          pregunta:pregunta_id(id, texto, tipo, categoria)
        `).eq("grupo_id",m);if(M)throw M;w(N||[])}catch(E){console.error("Error al cargar datos del grupo:",E),O(E.message||"Error al cargar los datos del grupo")}finally{C(!1)}});v.useEffect(()=>{V()},[m]);const F=E=>{$(E)};return y?t.jsxs("div",{className:"p-8",children:[t.jsxs("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-6",role:"alert",children:[t.jsx("p",{className:"font-bold",children:"Error"}),t.jsx("p",{children:y})]}),t.jsxs("button",{onClick:()=>u(-1),className:"flex items-center text-blue-600 hover:text-blue-800",children:[t.jsx($t,{className:"mr-2",size:16})," Volver"]})]}):j?t.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-8",children:[t.jsx(Fr,{className:"h-8 w-8 text-blue-600 animate-spin mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Cargando datos del grupo..."})]}):t.jsxs(wd,{title:`Dashboard del Grupo: ${(x==null?void 0:x.nombre)||"Sin nombre"}`,subtitle:`${((n=x==null?void 0:x.instituciones_educativas)==null?void 0:n.nombre)||"Institución no especificada"} - ${(x==null?void 0:x.grado)||""} - ${(x==null?void 0:x.año_escolar)||""}`,children:[t.jsx(Kj,{onFilterChange:F,initialFilters:_}),t.jsx(ft,{title:"Análisis Sociométrico",icon:t.jsx(ve,{className:"h-5 w-5"}),isExpanded:q.sociometric,onToggle:()=>k("sociometric"),children:t.jsx(Uj,{students:f,responses:h,filters:_})}),t.jsx(ft,{title:"Indicadores de Bullying",icon:t.jsx(Ve,{className:"h-5 w-5"}),isExpanded:q.bullying,onToggle:()=>k("bullying"),children:t.jsx(Hj,{students:f,responses:h,filters:_})}),t.jsx(ft,{title:"Cohesión Grupal",icon:t.jsx(Oi,{className:"h-5 w-5"}),isExpanded:q.cohesion,onToggle:()=>k("cohesion"),children:t.jsx(Ij,{students:f,responses:h,filters:_})}),t.jsx(ft,{title:"Factores Situacionales",icon:t.jsx(ma,{className:"h-5 w-5"}),isExpanded:q.situational,onToggle:()=>k("situational"),children:t.jsx(Yj,{students:f,responses:h,filters:_})}),t.jsxs("div",{className:"flex flex-wrap gap-4 mt-6",children:[t.jsxs("button",{onClick:V,className:"bg-gray-200 hover:bg-gray-300 text-gray-800 py-2 px-4 rounded flex items-center",children:[t.jsx(gd,{className:"h-5 w-5 mr-2"}),"Actualizar Datos"]}),t.jsxs("button",{className:"bg-blue-800 hover:bg-blue-900 text-white py-2 px-4 rounded flex items-center",children:[t.jsx(Ml,{className:"h-5 w-5 mr-2"}),"Exportar Informe"]})]})]})},jx=()=>t.jsx(Wj,{}),Nx=()=>t.jsxs("div",{className:"p-6",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Dashboard Académico"}),t.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4",children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("svg",{className:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),t.jsx("div",{className:"ml-3",children:t.jsx("p",{className:"text-sm text-yellow-700",children:"Este dashboard está en desarrollo. Próximamente estará disponible."})})]})})]}),wx=()=>t.jsxs("div",{className:"p-6",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Dashboard Social"}),t.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4",children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("svg",{className:"h-5 w-5 text-blue-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),t.jsx("div",{className:"ml-3",children:t.jsx("p",{className:"text-sm text-blue-700",children:"Este dashboard está en desarrollo. Próximamente estará disponible."})})]})})]}),eN=()=>{const[o,n]=v.useState(!1);return t.jsxs(wd,{title:"Dashboard de Convivencia Escolar",children:[t.jsx("div",{className:"mb-6",children:t.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4",children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx(Zt,{className:"h-5 w-5 text-blue-500"})}),t.jsx("div",{className:"ml-3",children:t.jsx("p",{className:"text-sm text-blue-700",children:"Este dashboard muestra un análisis general de la convivencia escolar y las dinámicas de acoso en todas las instituciones registradas en el sistema."})})]})})}),t.jsx(i0,{})]})},tN=()=>t.jsxs("div",{className:"container mx-auto px-4 py-8",children:[t.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Perfil de Usuario"}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsx("p",{className:"text-gray-600 mb-4",children:"Esta página está en construcción. Pronto podrás ver y editar tu información de perfil aquí."})})]});var aN=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});const sN=()=>{const[o,n]=v.useState("checking"),[r,u]=v.useState(null),[m,x]=v.useState(null);return v.useEffect(()=>{aN(void 0,null,function*(){try{const{data:f,error:c}=yield Z.from("user_profiles").select("count").limit(1);if(c){n("error"),u(c.message);return}n("connected");const{data:h}=yield Z.from("information_schema.tables").select("table_name").eq("table_schema","public");x({tables:h||[]})}catch(f){n("error"),u(f.message||"Error desconocido al conectar con Supabase")}})},[]),t.jsxs("div",{className:"container mx-auto px-4 py-8",children:[t.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Diagnóstico de Supabase"}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Estado de la conexión"}),o==="checking"&&t.jsxs("div",{className:"flex items-center text-blue-600",children:[t.jsxs("svg",{className:"animate-spin h-5 w-5 mr-3",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t.jsx("span",{children:"Verificando conexión..."})]}),o==="connected"&&t.jsxs("div",{className:"text-green-600 flex items-center",children:[t.jsx("svg",{className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),t.jsx("span",{children:"Conectado correctamente a Supabase"})]}),o==="error"&&t.jsxs("div",{className:"text-red-600",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("svg",{className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.jsx("span",{children:"Error de conexión"})]}),r&&t.jsx("div",{className:"mt-2 text-sm bg-red-50 p-3 rounded border border-red-200",children:r})]})]}),o==="connected"&&m&&t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Información de la base de datos"}),t.jsxs("div",{className:"mb-6",children:[t.jsxs("h3",{className:"text-lg font-medium mb-2",children:["Tablas disponibles (",m.tables.length,")"]}),t.jsx("div",{className:"bg-gray-50 p-4 rounded border border-gray-200 max-h-60 overflow-y-auto",children:m.tables.length>0?t.jsx("ul",{className:"space-y-1",children:m.tables.map((p,f)=>t.jsx("li",{className:"text-sm font-mono",children:p.table_name},f))}):t.jsx("p",{className:"text-gray-500 italic",children:"No se encontraron tablas"})})]})]})]})};var lN=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});const rN=()=>{const o=ke(),[n,r]=v.useState({totalInstituciones:0,totalGrupos:0,totalEstudiantes:0,respuestasRecientes:0,alertasCriticas:0}),[u,m]=v.useState(!0);v.useEffect(()=>{x()},[]);const x=()=>lN(void 0,null,function*(){try{m(!0);const c=yield qe.getEstadisticasGenerales(),h=yield qe.getInstituciones();r({totalInstituciones:h.length,totalGrupos:c.totalGrupos,totalEstudiantes:c.totalEstudiantes,respuestasRecientes:c.respuestasValidas,alertasCriticas:0})}catch(c){console.error("Error al cargar estadísticas de administración:",c)}finally{m(!1)}}),p=[{title:"Gestión de Instituciones",description:"Administrar colegios y centros educativos",icon:kl,color:"bg-blue-500",path:"/admin/instituciones",stats:`${n.totalInstituciones} instituciones`},{title:"Gestión de Grupos",description:"Administrar grupos y cursos por institución",icon:Rs,color:"bg-green-500",path:"/admin/grupos",stats:`${n.totalGrupos} grupos activos`},{title:"Gestión de Estudiantes",description:"Administrar estudiantes por grupo",icon:ve,color:"bg-purple-500",path:"/admin/estudiantes",stats:`${n.totalEstudiantes} estudiantes`},{title:"Gestión de Usuarios",description:"Administrar usuarios del sistema",icon:Ut,color:"bg-orange-500",path:"/admin/usuarios",stats:"Administradores y docentes"},{title:"Análisis Sociométrico",description:"Ejecutar y revisar análisis BULL-S",icon:fd,color:"bg-indigo-500",path:"/admin/analisis-sociometrico",stats:`${n.respuestasRecientes} respuestas`},{title:"Reportes y Dashboards",description:"Visualizar reportes y estadísticas",icon:ma,color:"bg-teal-500",path:"/admin/reportes",stats:"Dashboards interactivos"},{title:"Configuraciones",description:"Configurar parámetros del sistema",icon:Ai,color:"bg-gray-500",path:"/admin/configuraciones",stats:"Sistema y preferencias"},{title:"Diagnósticos",description:"Monitorear estado del sistema",icon:ns,color:"bg-red-500",path:"/admin/diagnostics/supabase",stats:"Estado de conexiones"}],f=[{label:"Instituciones",value:n.totalInstituciones,icon:kl,color:"text-blue-600 bg-blue-100",change:"+0%"},{label:"Grupos Activos",value:n.totalGrupos,icon:Rs,color:"text-green-600 bg-green-100",change:"+0%"},{label:"Estudiantes",value:n.totalEstudiantes,icon:ve,color:"text-purple-600 bg-purple-100",change:"+0%"},{label:"Respuestas Recientes",value:n.respuestasRecientes,icon:Rl,color:"text-teal-600 bg-teal-100",change:"+0%"}];return t.jsx("div",{className:"min-h-screen bg-gray-50",children:t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Panel de Administración BULL-S"}),t.jsx("p",{className:"text-gray-600",children:"Sistema de gestión para análisis sociométrico y detección de bullying escolar"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:f.map((c,h)=>{const w=c.icon;return t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:`flex-shrink-0 p-3 rounded-lg ${c.color}`,children:t.jsx(w,{className:"h-6 w-6"})}),t.jsxs("div",{className:"ml-4 flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:c.label}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:u?"...":c.value}),t.jsx("span",{className:"ml-2 text-sm text-gray-500",children:c.change})]})]})]})},h)})}),n.alertasCriticas>0&&t.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-8",children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx(Ve,{className:"h-5 w-5 text-red-400"})}),t.jsx("div",{className:"ml-3",children:t.jsxs("p",{className:"text-sm text-red-700",children:[t.jsx("strong",{children:"Atención:"})," Hay ",n.alertasCriticas," alertas críticas que requieren revisión inmediata."]})})]})}),t.jsxs("div",{className:"mb-8",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Módulos de Administración"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:p.map((c,h)=>{const w=c.icon;return t.jsxs("div",{onClick:()=>o(c.path),className:"bg-white rounded-lg shadow hover:shadow-lg transition-shadow cursor-pointer p-6 border border-gray-200 hover:border-gray-300",children:[t.jsx("div",{className:"flex items-center mb-4",children:t.jsx("div",{className:`flex-shrink-0 p-3 rounded-lg ${c.color}`,children:t.jsx(w,{className:"h-6 w-6 text-white"})})}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:c.title}),t.jsx("p",{className:"text-gray-600 text-sm mb-3",children:c.description}),t.jsx("div",{className:"text-xs text-gray-500 bg-gray-50 px-2 py-1 rounded",children:c.stats})]},h)})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Actividad Reciente"}),t.jsx(Ta,{className:"h-5 w-5 text-gray-400"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[t.jsx(Xx,{className:"h-5 w-5 text-blue-500 mr-3"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Sistema iniciado"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Conexión a base de datos establecida"})]}),t.jsx("span",{className:"text-xs text-gray-400",children:"Hace unos minutos"})]}),t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx(ns,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),t.jsx("p",{className:"text-sm",children:"La actividad reciente se mostrará aquí"})]})]})]})]})})};var nN=Object.defineProperty,iN=Object.defineProperties,oN=Object.getOwnPropertyDescriptors,_x=Object.getOwnPropertySymbols,cN=Object.prototype.hasOwnProperty,dN=Object.prototype.propertyIsEnumerable,Sx=(o,n,r)=>n in o?nN(o,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[n]=r,Sl=(o,n)=>{for(var r in n||(n={}))cN.call(n,r)&&Sx(o,r,n[r]);if(_x)for(var r of _x(n))dN.call(n,r)&&Sx(o,r,n[r]);return o},El=(o,n)=>iN(o,oN(n)),Ni=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});const uN=()=>{const o=ke(),[n,r]=v.useState([]),[u,m]=v.useState(!0),[x,p]=v.useState(""),[f,c]=v.useState(!1),[h,w]=v.useState(null),[j,C]=v.useState({nombre:"",direccion:"",telefono:"",email:""});v.useEffect(()=>{y()},[]);const y=()=>Ni(void 0,null,function*(){try{m(!0);const k=yield qe.getInstituciones(),V=yield Promise.all(k.map(F=>Ni(void 0,null,function*(){try{const{count:E}=yield Z.from("grupos").select("*",{count:"exact",head:!0}).eq("institucion_id",F.id),{data:S}=yield Z.from("grupos").select("id").eq("institucion_id",F.id);let D=0;if(S&&S.length>0){const z=S.map(M=>M.id),{count:N}=yield Z.from("estudiantes").select("*",{count:"exact",head:!0}).in("grupo_id",z);D=N||0}return El(Sl({},F),{grupos_count:E||0,estudiantes_count:D})}catch(E){return console.error(`Error al obtener conteos para institución ${F.id}:`,E),El(Sl({},F),{grupos_count:0,estudiantes_count:0})}})));r(V)}catch(k){console.error("Error al cargar instituciones:",k)}finally{m(!1)}}),O=k=>Ni(void 0,null,function*(){k.preventDefault();try{if(h){const{error:V}=yield Z.from("instituciones").update(j).eq("id",h.id);if(V)throw V}else{const{error:V}=yield Z.from("instituciones").insert([j]);if(V)throw V}c(!1),w(null),C({nombre:"",direccion:"",telefono:"",email:""}),y()}catch(V){console.error("Error al guardar institución:",V),alert("Error al guardar la institución")}}),_=k=>{w(k),C({nombre:k.nombre,direccion:k.direccion||"",telefono:k.telefono||"",email:k.email||""}),c(!0)},$=k=>Ni(void 0,null,function*(){if(confirm("¿Estás seguro de que deseas eliminar esta institución?"))try{const{error:V}=yield Z.from("instituciones").delete().eq("id",k);if(V)throw V;y()}catch(V){console.error("Error al eliminar institución:",V),alert("Error al eliminar la institución")}}),q=n.filter(k=>k.nombre.toLowerCase().includes(x.toLowerCase()));return t.jsx("div",{className:"min-h-screen bg-gray-50",children:t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("div",{className:"mb-8",children:[t.jsxs("button",{onClick:()=>o("/admin"),className:"flex items-center text-gray-600 hover:text-gray-800 mb-4",children:[t.jsx($t,{className:"h-4 w-4 mr-2"}),"Volver al Panel de Administración"]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[t.jsx(kl,{className:"h-8 w-8 mr-3 text-blue-600"}),"Gestión de Instituciones"]}),t.jsx("p",{className:"text-gray-600 mt-2",children:"Administrar colegios y centros educativos del sistema"})]}),t.jsxs("button",{onClick:()=>{w(null),C({nombre:"",direccion:"",telefono:"",email:""}),c(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center",children:[t.jsx(Ui,{className:"h-4 w-4 mr-2"}),"Nueva Institución"]})]})]}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:t.jsxs("div",{className:"relative",children:[t.jsx(zl,{className:"h-5 w-5 absolute left-3 top-3 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Buscar instituciones...",value:x,onChange:k=>p(k.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow",children:u?t.jsx("div",{className:"flex justify-center items-center py-12",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):q.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(kl,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),t.jsx("p",{className:"text-gray-500",children:"No se encontraron instituciones"})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Institución"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contacto"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estadísticas"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:q.map(k=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:k.nombre}),k.direccion&&t.jsxs("div",{className:"text-sm text-gray-500 flex items-center mt-1",children:[t.jsx(zs,{className:"h-3 w-3 mr-1"}),k.direccion]})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"space-y-1",children:[k.telefono&&t.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[t.jsx(Ip,{className:"h-3 w-3 mr-1"}),k.telefono]}),k.email&&t.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[t.jsx(zi,{className:"h-3 w-3 mr-1"}),k.email]})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"text-sm text-gray-900",children:[k.grupos_count," grupos"]}),t.jsxs("div",{className:"text-sm text-gray-500",children:[k.estudiantes_count," estudiantes"]})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>_(k),className:"text-blue-600 hover:text-blue-900",children:t.jsx($i,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>$(k.id),className:"text-red-600 hover:text-red-900",children:t.jsx(Bi,{className:"h-4 w-4"})})]})})]},k.id))})]})})}),f&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:h?"Editar Institución":"Nueva Institución"}),t.jsxs("form",{onSubmit:O,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre *"}),t.jsx("input",{type:"text",required:!0,value:j.nombre,onChange:k=>C(El(Sl({},j),{nombre:k.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dirección"}),t.jsx("input",{type:"text",value:j.direccion,onChange:k=>C(El(Sl({},j),{direccion:k.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teléfono"}),t.jsx("input",{type:"tel",value:j.telefono,onChange:k=>C(El(Sl({},j),{telefono:k.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),t.jsx("input",{type:"email",value:j.email,onChange:k=>C(El(Sl({},j),{email:k.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{type:"button",onClick:()=>c(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancelar"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:h?"Actualizar":"Crear"})]})]})]})})})]})})};var mN=Object.defineProperty,hN=Object.defineProperties,fN=Object.getOwnPropertyDescriptors,Ex=Object.getOwnPropertySymbols,xN=Object.prototype.hasOwnProperty,gN=Object.prototype.propertyIsEnumerable,Cx=(o,n,r)=>n in o?mN(o,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[n]=r,rs=(o,n)=>{for(var r in n||(n={}))xN.call(n,r)&&Cx(o,r,n[r]);if(Ex)for(var r of Ex(n))gN.call(n,r)&&Cx(o,r,n[r]);return o},Ts=(o,n)=>hN(o,fN(n)),wi=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});const pN=()=>{const o=ke(),[n,r]=v.useState([]),[u,m]=v.useState([]),[x,p]=v.useState(!0),[f,c]=v.useState(""),[h,w]=v.useState(""),[j,C]=v.useState(!1),[y,O]=v.useState(null),[_,$]=v.useState({nombre:"",institucion_id:"",ano_escolar:"",grado:""});v.useEffect(()=>{q()},[]);const q=()=>wi(void 0,null,function*(){try{p(!0);const S=yield qe.getInstituciones();m(S);let D,z;try{const M=yield Z.from("grupos").select(`
            *,
            instituciones!inner(nombre)
          `).order("nombre");D=M.data,z=M.error}catch(M){try{const K=yield Z.from("grupos").select(`
              *,
              instituciones_educativas!inner(nombre)
            `).order("nombre");D=K.data,z=K.error,D&&(D=D.map(G=>Ts(rs({},G),{instituciones:G.instituciones_educativas})))}catch(K){console.error("Error al intentar con instituciones_educativas:",K),D=yield qe.getGrupos(),z=null}}z&&(console.error("Error al cargar grupos:",z),D=qe.getGruposEjemplo());const N=yield Promise.all((D||[]).map(M=>wi(void 0,null,function*(){var K;let G=0;try{const{count:J}=yield Z.from("estudiantes").select("*",{count:"exact",head:!0}).eq("grupo_id",M.id);G=J||0}catch(J){console.error("Error contando estudiantes:",J),G=0}return Ts(rs({},M),{estudiantes_count:G,institucion_nombre:((K=M.instituciones)==null?void 0:K.nombre)||"Colegio La SALLE"})})));r(N)}catch(S){console.error("Error al cargar datos:",S);const z=qe.getGruposEjemplo().map(N=>Ts(rs({},N),{institucion_nombre:"Colegio La SALLE",estudiantes_count:0}));r(z)}finally{p(!1)}}),k=S=>wi(void 0,null,function*(){S.preventDefault();try{const D={nombre:_.nombre,institucion_id:_.institucion_id},z=rs({},D);if(_.grado&&(z.grado=_.grado),_.ano_escolar&&(z.ano_escolar=_.ano_escolar),y){const{error:N}=yield Z.from("grupos").update(z).eq("id",y.id);if(N)if(N.code==="PGRST204"){console.log("Columnas adicionales no encontradas, usando solo campos básicos");const{error:M}=yield Z.from("grupos").update(D).eq("id",y.id);if(M)throw M}else throw N}else{const{error:N}=yield Z.from("grupos").insert([z]);if(N)if(N.code==="PGRST204"){console.log("Columnas adicionales no encontradas, usando solo campos básicos");const{error:M}=yield Z.from("grupos").insert([D]);if(M)throw M}else throw N}C(!1),O(null),$({nombre:"",institucion_id:"",ano_escolar:"",grado:""}),q()}catch(D){console.error("Error al guardar grupo:",D),alert("Error al guardar el grupo. Verifique que la base de datos esté configurada correctamente.")}}),V=S=>{O(S),$({nombre:S.nombre,institucion_id:S.institucion_id,ano_escolar:S.ano_escolar||"",grado:S.grado||""}),C(!0)},F=S=>wi(void 0,null,function*(){if(confirm("¿Estás seguro de que deseas eliminar este grupo?"))try{const{error:D}=yield Z.from("grupos").delete().eq("id",S);if(D)throw D;q()}catch(D){console.error("Error al eliminar grupo:",D),alert("Error al eliminar el grupo")}}),E=n.filter(S=>{var D;const z=S.nombre.toLowerCase().includes(f.toLowerCase())||((D=S.institucion_nombre)==null?void 0:D.toLowerCase().includes(f.toLowerCase())),N=!h||S.institucion_id===h;return z&&N});return t.jsx("div",{className:"min-h-screen bg-gray-50",children:t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("div",{className:"mb-8",children:[t.jsxs("button",{onClick:()=>o("/admin"),className:"flex items-center text-gray-600 hover:text-gray-800 mb-4",children:[t.jsx($t,{className:"h-4 w-4 mr-2"}),"Volver al Panel de Administración"]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[t.jsx(Rs,{className:"h-8 w-8 mr-3 text-green-600"}),"Gestión de Grupos"]}),t.jsx("p",{className:"text-gray-600 mt-2",children:"Administrar grupos y cursos por institución educativa"})]}),t.jsxs("button",{onClick:()=>{O(null),$({nombre:"",institucion_id:"",ano_escolar:"",grado:""}),C(!0)},className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[t.jsx(Ui,{className:"h-4 w-4 mr-2"}),"Nuevo Grupo"]})]})]}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx(zl,{className:"h-5 w-5 absolute left-3 top-3 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Buscar grupos o instituciones...",value:f,onChange:S=>c(S.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),t.jsxs("select",{value:h,onChange:S=>w(S.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500",children:[t.jsx("option",{value:"",children:"Todas las instituciones"}),u.map(S=>t.jsx("option",{value:S.id,children:S.nombre},S.id))]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow",children:x?t.jsx("div",{className:"flex justify-center items-center py-12",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"})}):E.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Rs,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),t.jsx("p",{className:"text-gray-500",children:"No se encontraron grupos"})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Grupo"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Institución"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Detalles"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estudiantes"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:E.map(S=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm font-medium text-gray-900",children:S.nombre})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"text-sm text-gray-900 flex items-center",children:[t.jsx(kl,{className:"h-4 w-4 mr-2 text-gray-400"}),S.institucion_nombre]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"space-y-1",children:[S.grado&&t.jsxs("div",{className:"text-sm text-gray-500",children:["Grado: ",S.grado]}),S.ano_escolar&&t.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[t.jsx(Ta,{className:"h-3 w-3 mr-1"}),S.ano_escolar]})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"text-sm text-gray-900 flex items-center",children:[t.jsx(ve,{className:"h-4 w-4 mr-2 text-gray-400"}),S.estudiantes_count," estudiantes"]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>V(S),className:"text-green-600 hover:text-green-900",children:t.jsx($i,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>F(S.id),className:"text-red-600 hover:text-red-900",children:t.jsx(Bi,{className:"h-4 w-4"})})]})})]},S.id))})]})})}),j&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:y?"Editar Grupo":"Nuevo Grupo"}),t.jsxs("form",{onSubmit:k,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del Grupo *"}),t.jsx("input",{type:"text",required:!0,value:_.nombre,onChange:S=>$(Ts(rs({},_),{nombre:S.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500",placeholder:"Ej: 6A, Séptimo B, etc."})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Institución *"}),t.jsxs("select",{required:!0,value:_.institucion_id,onChange:S=>$(Ts(rs({},_),{institucion_id:S.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500",children:[t.jsx("option",{value:"",children:"Seleccionar institución"}),u.map(S=>t.jsx("option",{value:S.id,children:S.nombre},S.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Grado"}),t.jsx("input",{type:"text",value:_.grado,onChange:S=>$(Ts(rs({},_),{grado:S.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500",placeholder:"Ej: 6°, Séptimo, etc."})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Año Escolar"}),t.jsx("input",{type:"text",value:_.ano_escolar,onChange:S=>$(Ts(rs({},_),{ano_escolar:S.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500",placeholder:"Ej: 2024-2025"})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{type:"button",onClick:()=>C(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancelar"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:y?"Actualizar":"Crear"})]})]})]})})})]})})};var bN=Object.defineProperty,vN=Object.defineProperties,yN=Object.getOwnPropertyDescriptors,Ax=Object.getOwnPropertySymbols,jN=Object.prototype.hasOwnProperty,NN=Object.prototype.propertyIsEnumerable,Dx=(o,n,r)=>n in o?bN(o,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[n]=r,dt=(o,n)=>{for(var r in n||(n={}))jN.call(n,r)&&Dx(o,r,n[r]);if(Ax)for(var r of Ax(n))NN.call(n,r)&&Dx(o,r,n[r]);return o},ut=(o,n)=>vN(o,yN(n)),nd=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});const wN=()=>{const o=ke(),[n,r]=v.useState([]),[u,m]=v.useState([]),[x,p]=v.useState(!0),[f,c]=v.useState(""),[h,w]=v.useState(""),[j,C]=v.useState(!1),[y,O]=v.useState(null),[_,$]=v.useState({nombre:"",apellido:"",edad:"",genero:"",numero_documento:"",tipo_documento:"CC",grupo_id:""});v.useEffect(()=>{q()},[]);const q=()=>nd(void 0,null,function*(){try{p(!0);let S,D;try{const G=yield Z.from("grupos").select(`
            *,
            instituciones!inner(nombre)
          `).order("nombre");if(S=G.data,D=G.error,D){const J=yield Z.from("grupos").select(`
              *,
              instituciones_educativas!inner(nombre)
            `).order("nombre");S=J.data,D=J.error,S&&(S=S.map(ae=>ut(dt({},ae),{instituciones:ae.instituciones_educativas})))}}catch(G){console.error("Error al cargar grupos:",G),S=qe.getGruposEjemplo(),D=null}if(D)throw D;const z=(S||[]).map(G=>{var J;return ut(dt({},G),{institucion_nombre:((J=G.instituciones)==null?void 0:J.nombre)||"Colegio La SALLE"})});m(z);let N,M;try{const G=yield Z.from("estudiantes").select(`
            *,
            grupos!inner(
              nombre,
              instituciones!inner(nombre)
            )
          `).order("nombre");if(N=G.data,M=G.error,M&&M.code==="PGRST200"){const J=yield Z.from("estudiantes").select(`
              *,
              grupos!inner(
                nombre,
                instituciones_educativas!inner(nombre)
              )
            `).order("nombre");N=J.data,M=J.error,N&&(N=N.map(ae=>{var re;return ut(dt({},ae),{grupos:ut(dt({},ae.grupos),{instituciones:(re=ae.grupos)==null?void 0:re.instituciones_educativas})})}))}}catch(G){console.error("Error al cargar estudiantes:",G),N=qe.getEstudiantesEjemplo(),M=null}M&&(console.error("Error al cargar estudiantes:",M),N=qe.getEstudiantesEjemplo());const K=(N||[]).map(G=>{var J,ae,re;if(!G.grupos){const T=z.find(H=>H.id===G.grupo_id);return ut(dt({},G),{grupo_nombre:(T==null?void 0:T.nombre)||"Grupo desconocido",institucion_nombre:(T==null?void 0:T.institucion_nombre)||"Colegio La SALLE"})}return ut(dt({},G),{grupo_nombre:(J=G.grupos)==null?void 0:J.nombre,institucion_nombre:(re=(ae=G.grupos)==null?void 0:ae.instituciones)==null?void 0:re.nombre})});r(K)}catch(S){console.error("Error al cargar datos:",S);const D=qe.getGruposEjemplo(),z=qe.getEstudiantesEjemplo(),N=D.map(K=>ut(dt({},K),{institucion_nombre:"Colegio La SALLE"})),M=z.map(K=>{const G=N.find(J=>J.id===K.grupo_id);return ut(dt({},K),{grupo_nombre:(G==null?void 0:G.nombre)||"Grupo desconocido",institucion_nombre:"Colegio La SALLE"})});m(N),r(M)}finally{p(!1)}}),k=S=>nd(void 0,null,function*(){S.preventDefault();try{const D=ut(dt({},_),{edad:_.edad?parseInt(_.edad):null});if(y){const{error:z}=yield Z.from("estudiantes").update(D).eq("id",y.id);if(z)throw z}else{const{error:z}=yield Z.from("estudiantes").insert([D]);if(z)throw z}C(!1),O(null),$({nombre:"",apellido:"",edad:"",genero:"",numero_documento:"",tipo_documento:"CC",grupo_id:""}),q()}catch(D){console.error("Error al guardar estudiante:",D),alert("Error al guardar el estudiante")}}),V=S=>{var D;O(S),$({nombre:S.nombre,apellido:S.apellido||"",edad:((D=S.edad)==null?void 0:D.toString())||"",genero:S.genero||"",numero_documento:S.numero_documento||"",tipo_documento:S.tipo_documento||"CC",grupo_id:S.grupo_id}),C(!0)},F=S=>nd(void 0,null,function*(){if(confirm("¿Estás seguro de que deseas eliminar este estudiante?"))try{const{error:D}=yield Z.from("estudiantes").delete().eq("id",S);if(D)throw D;q()}catch(D){console.error("Error al eliminar estudiante:",D),alert("Error al eliminar el estudiante")}}),E=n.filter(S=>{var D,z,N,M;const K=S.nombre.toLowerCase().includes(f.toLowerCase())||((D=S.apellido)==null?void 0:D.toLowerCase().includes(f.toLowerCase()))||((z=S.numero_documento)==null?void 0:z.includes(f))||((N=S.grupo_nombre)==null?void 0:N.toLowerCase().includes(f.toLowerCase()))||((M=S.institucion_nombre)==null?void 0:M.toLowerCase().includes(f.toLowerCase())),G=!h||S.grupo_id===h;return K&&G});return t.jsx("div",{className:"min-h-screen bg-gray-50",children:t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("div",{className:"mb-8",children:[t.jsxs("button",{onClick:()=>o("/admin"),className:"flex items-center text-gray-600 hover:text-gray-800 mb-4",children:[t.jsx($t,{className:"h-4 w-4 mr-2"}),"Volver al Panel de Administración"]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[t.jsx(ve,{className:"h-8 w-8 mr-3 text-purple-600"}),"Gestión de Estudiantes"]}),t.jsx("p",{className:"text-gray-600 mt-2",children:"Administrar estudiantes por grupo e institución educativa"})]}),t.jsxs("button",{onClick:()=>{O(null),$({nombre:"",apellido:"",edad:"",genero:"",numero_documento:"",tipo_documento:"CC",grupo_id:""}),C(!0)},className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 flex items-center",children:[t.jsx(Ui,{className:"h-4 w-4 mr-2"}),"Nuevo Estudiante"]})]})]}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx(zl,{className:"h-5 w-5 absolute left-3 top-3 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Buscar por nombre, documento, grupo...",value:f,onChange:S=>c(S.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),t.jsxs("select",{value:h,onChange:S=>w(S.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500",children:[t.jsx("option",{value:"",children:"Todos los grupos"}),u.map(S=>t.jsxs("option",{value:S.id,children:[S.nombre," - ",S.institucion_nombre]},S.id))]})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(ve,{className:"h-8 w-8 text-purple-500"}),t.jsxs("div",{className:"ml-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Estudiantes"}),t.jsx("p",{className:"text-xl font-semibold text-gray-900",children:E.length})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(mt,{className:"h-8 w-8 text-blue-500"}),t.jsxs("div",{className:"ml-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Masculino"}),t.jsx("p",{className:"text-xl font-semibold text-gray-900",children:E.filter(S=>S.genero==="M").length})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(mt,{className:"h-8 w-8 text-pink-500"}),t.jsxs("div",{className:"ml-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Femenino"}),t.jsx("p",{className:"text-xl font-semibold text-gray-900",children:E.filter(S=>S.genero==="F").length})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Ta,{className:"h-8 w-8 text-green-500"}),t.jsxs("div",{className:"ml-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Edad Promedio"}),t.jsxs("p",{className:"text-xl font-semibold text-gray-900",children:[E.length>0&&Math.round(E.filter(S=>S.edad).reduce((S,D)=>S+(D.edad||0),0)/E.filter(S=>S.edad).length)||0," años"]})]})]})})]}),t.jsx("div",{className:"bg-white rounded-lg shadow",children:x?t.jsx("div",{className:"flex justify-center items-center py-12",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):E.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(ve,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),t.jsx("p",{className:"text-gray-500",children:"No se encontraron estudiantes"})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estudiante"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Documento"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Edad/Género"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Grupo"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Institución"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:E.map(S=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:t.jsx("div",{className:"h-10 w-10 rounded-full bg-purple-100 flex items-center justify-center",children:t.jsx(mt,{className:"h-5 w-5 text-purple-600"})})}),t.jsx("div",{className:"ml-4",children:t.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[S.nombre," ",S.apellido]})})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"text-sm text-gray-900",children:[S.tipo_documento,": ",S.numero_documento||"N/A"]})}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.jsx("div",{className:"text-sm text-gray-900",children:S.edad?`${S.edad} años`:"N/A"}),t.jsx("div",{className:"text-sm text-gray-500",children:S.genero==="M"?"Masculino":S.genero==="F"?"Femenino":"N/A"})]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"text-sm text-gray-900 flex items-center",children:[t.jsx(Rs,{className:"h-4 w-4 mr-2 text-gray-400"}),S.grupo_nombre]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"text-sm text-gray-900 flex items-center",children:[t.jsx(kl,{className:"h-4 w-4 mr-2 text-gray-400"}),S.institucion_nombre]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>V(S),className:"text-purple-600 hover:text-purple-900",children:t.jsx($i,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>F(S.id),className:"text-red-600 hover:text-red-900",children:t.jsx(Bi,{className:"h-4 w-4"})})]})})]},S.id))})]})})}),j&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:y?"Editar Estudiante":"Nuevo Estudiante"}),t.jsxs("form",{onSubmit:k,className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre *"}),t.jsx("input",{type:"text",required:!0,value:_.nombre,onChange:S=>$(ut(dt({},_),{nombre:S.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Apellido"}),t.jsx("input",{type:"text",value:_.apellido,onChange:S=>$(ut(dt({},_),{apellido:S.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Grupo *"}),t.jsxs("select",{required:!0,value:_.grupo_id,onChange:S=>$(ut(dt({},_),{grupo_id:S.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500",children:[t.jsx("option",{value:"",children:"Seleccionar grupo"}),u.map(S=>t.jsxs("option",{value:S.id,children:[S.nombre," - ",S.institucion_nombre]},S.id))]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Edad"}),t.jsx("input",{type:"number",min:"5",max:"25",value:_.edad,onChange:S=>$(ut(dt({},_),{edad:S.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Género"}),t.jsxs("select",{value:_.genero,onChange:S=>$(ut(dt({},_),{genero:S.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500",children:[t.jsx("option",{value:"",children:"Seleccionar"}),t.jsx("option",{value:"M",children:"Masculino"}),t.jsx("option",{value:"F",children:"Femenino"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo Doc."}),t.jsxs("select",{value:_.tipo_documento,onChange:S=>$(ut(dt({},_),{tipo_documento:S.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500",children:[t.jsx("option",{value:"CC",children:"CC"}),t.jsx("option",{value:"TI",children:"TI"}),t.jsx("option",{value:"RC",children:"RC"}),t.jsx("option",{value:"CE",children:"CE"})]})]}),t.jsxs("div",{className:"col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Número de Documento"}),t.jsx("input",{type:"text",value:_.numero_documento,onChange:S=>$(ut(dt({},_),{numero_documento:S.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500"})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{type:"button",onClick:()=>C(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancelar"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700",children:y?"Actualizar":"Crear"})]})]})]})})})]})})};var _N=Object.defineProperty,SN=Object.defineProperties,EN=Object.getOwnPropertyDescriptors,Ox=Object.getOwnPropertySymbols,CN=Object.prototype.hasOwnProperty,AN=Object.prototype.propertyIsEnumerable,Tx=(o,n,r)=>n in o?_N(o,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[n]=r,Cl=(o,n)=>{for(var r in n||(n={}))CN.call(n,r)&&Tx(o,r,n[r]);if(Ox)for(var r of Ox(n))AN.call(n,r)&&Tx(o,r,n[r]);return o},Al=(o,n)=>SN(o,EN(n)),_i=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});const DN=()=>{const o=ke(),[n,r]=v.useState([]),[u,m]=v.useState(!0),[x,p]=v.useState(""),[f,c]=v.useState(""),[h,w]=v.useState(!1),[j,C]=v.useState(null),[y,O]=v.useState({email:"",nombre:"",apellido:"",rol:"docente",password:"",activo:!0});v.useEffect(()=>{_()},[]);const _=()=>_i(void 0,null,function*(){try{m(!0);const{data:D,error:z}=yield Z.auth.admin.listUsers();if(z){console.error("Error al obtener usuarios de auth:",z);const{data:N,error:M}=yield Z.from("profiles").select("*").order("created_at",{ascending:!1});if(M)throw M;const K=(N||[]).map(G=>({id:G.id,email:G.email||"N/A",nombre:G.nombre,apellido:G.apellido,rol:G.rol||"docente",activo:G.activo!==!1,created_at:G.created_at,last_sign_in_at:null}));r(K)}else{const N=D.users.map(M=>{var K,G,J,ae;return{id:M.id,email:M.email||"N/A",nombre:((K=M.user_metadata)==null?void 0:K.nombre)||((G=M.user_metadata)==null?void 0:G.name),apellido:(J=M.user_metadata)==null?void 0:J.apellido,rol:((ae=M.user_metadata)==null?void 0:ae.rol)||"docente",activo:!M.banned_until,created_at:M.created_at,last_sign_in_at:M.last_sign_in_at}});r(N)}}catch(D){console.error("Error al cargar usuarios:",D),r([{id:"1",email:"admin@bulls.edu",nombre:"Administrador",apellido:"Sistema",rol:"admin",activo:!0,created_at:new Date().toISOString()}])}finally{m(!1)}}),$=D=>_i(void 0,null,function*(){D.preventDefault();try{if(j){const{error:z}=yield Z.auth.admin.updateUserById(j.id,{email:y.email,user_metadata:{nombre:y.nombre,apellido:y.apellido,rol:y.rol}});if(z){const{error:N}=yield Z.from("profiles").upsert({id:j.id,email:y.email,nombre:y.nombre,apellido:y.apellido,rol:y.rol,activo:y.activo});if(N)throw N}}else{const{data:z,error:N}=yield Z.auth.admin.createUser({email:y.email,password:y.password,user_metadata:{nombre:y.nombre,apellido:y.apellido,rol:y.rol}});if(N){const{error:M}=yield Z.from("profiles").insert({email:y.email,nombre:y.nombre,apellido:y.apellido,rol:y.rol,activo:y.activo});if(M)throw M}}w(!1),C(null),O({email:"",nombre:"",apellido:"",rol:"docente",password:"",activo:!0}),_()}catch(z){console.error("Error al guardar usuario:",z),alert("Error al guardar el usuario")}}),q=D=>{C(D),O({email:D.email,nombre:D.nombre||"",apellido:D.apellido||"",rol:D.rol,password:"",activo:D.activo}),w(!0)},k=D=>_i(void 0,null,function*(){try{!D.activo?yield Z.auth.admin.updateUserById(D.id,{banned_until:"none"}):yield Z.auth.admin.updateUserById(D.id,{banned_until:new Date(Date.now()+365*24*60*60*1e3).toISOString()}),_()}catch(z){console.error("Error al cambiar estado del usuario:",z),alert("Error al cambiar el estado del usuario")}}),V=D=>_i(void 0,null,function*(){if(confirm("¿Estás seguro de que deseas eliminar este usuario?"))try{const{error:z}=yield Z.auth.admin.deleteUser(D);z&&(yield Z.from("profiles").delete().eq("id",D)),_()}catch(z){console.error("Error al eliminar usuario:",z),alert("Error al eliminar el usuario")}}),F=n.filter(D=>{var z,N;const M=D.email.toLowerCase().includes(x.toLowerCase())||((z=D.nombre)==null?void 0:z.toLowerCase().includes(x.toLowerCase()))||((N=D.apellido)==null?void 0:N.toLowerCase().includes(x.toLowerCase())),K=!f||D.rol===f;return M&&K}),E=D=>{switch(D){case"admin":return"bg-red-100 text-red-800";case"docente":return"bg-blue-100 text-blue-800";case"estudiante":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},S=D=>{switch(D){case"admin":return"Administrador";case"docente":return"Docente";case"estudiante":return"Estudiante";default:return D}};return t.jsx("div",{className:"min-h-screen bg-gray-50",children:t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("div",{className:"mb-8",children:[t.jsxs("button",{onClick:()=>o("/admin"),className:"flex items-center text-gray-600 hover:text-gray-800 mb-4",children:[t.jsx($t,{className:"h-4 w-4 mr-2"}),"Volver al Panel de Administración"]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[t.jsx(Ut,{className:"h-8 w-8 mr-3 text-orange-600"}),"Gestión de Usuarios"]}),t.jsx("p",{className:"text-gray-600 mt-2",children:"Administrar usuarios del sistema y sus permisos"})]}),t.jsxs("button",{onClick:()=>{C(null),O({email:"",nombre:"",apellido:"",rol:"docente",password:"",activo:!0}),w(!0)},className:"bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 flex items-center",children:[t.jsx(Ui,{className:"h-4 w-4 mr-2"}),"Nuevo Usuario"]})]})]}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx(zl,{className:"h-5 w-5 absolute left-3 top-3 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Buscar por email, nombre...",value:x,onChange:D=>p(D.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),t.jsxs("select",{value:f,onChange:D=>c(D.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500",children:[t.jsx("option",{value:"",children:"Todos los roles"}),t.jsx("option",{value:"admin",children:"Administradores"}),t.jsx("option",{value:"docente",children:"Docentes"}),t.jsx("option",{value:"estudiante",children:"Estudiantes"})]})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Ut,{className:"h-8 w-8 text-red-500"}),t.jsxs("div",{className:"ml-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Administradores"}),t.jsx("p",{className:"text-xl font-semibold text-gray-900",children:F.filter(D=>D.rol==="admin").length})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(mt,{className:"h-8 w-8 text-blue-500"}),t.jsxs("div",{className:"ml-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Docentes"}),t.jsx("p",{className:"text-xl font-semibold text-gray-900",children:F.filter(D=>D.rol==="docente").length})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(od,{className:"h-8 w-8 text-green-500"}),t.jsxs("div",{className:"ml-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Activos"}),t.jsx("p",{className:"text-xl font-semibold text-gray-900",children:F.filter(D=>D.activo).length})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(cd,{className:"h-8 w-8 text-gray-500"}),t.jsxs("div",{className:"ml-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Inactivos"}),t.jsx("p",{className:"text-xl font-semibold text-gray-900",children:F.filter(D=>!D.activo).length})]})]})})]}),t.jsx("div",{className:"bg-white rounded-lg shadow",children:u?t.jsx("div",{className:"flex justify-center items-center py-12",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600"})}):F.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Ut,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),t.jsx("p",{className:"text-gray-500",children:"No se encontraron usuarios"})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usuario"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rol"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Último Acceso"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:F.map(D=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:t.jsx("div",{className:"h-10 w-10 rounded-full bg-orange-100 flex items-center justify-center",children:t.jsx(mt,{className:"h-5 w-5 text-orange-600"})})}),t.jsx("div",{className:"ml-4",children:t.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[D.nombre," ",D.apellido]})})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"text-sm text-gray-900 flex items-center",children:[t.jsx(zi,{className:"h-4 w-4 mr-2 text-gray-400"}),D.email]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${E(D.rol)}`,children:S(D.rol)})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("button",{onClick:()=>k(D),className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${D.activo?"bg-green-100 text-green-800 hover:bg-green-200":"bg-red-100 text-red-800 hover:bg-red-200"}`,children:D.activo?t.jsxs(t.Fragment,{children:[t.jsx(od,{className:"h-3 w-3 mr-1"}),"Activo"]}):t.jsxs(t.Fragment,{children:[t.jsx(cd,{className:"h-3 w-3 mr-1"}),"Inactivo"]})})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[t.jsx(Ta,{className:"h-4 w-4 mr-2 text-gray-400"}),D.last_sign_in_at?new Date(D.last_sign_in_at).toLocaleDateString():"Nunca"]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>q(D),className:"text-orange-600 hover:text-orange-900",children:t.jsx($i,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>V(D.id),className:"text-red-600 hover:text-red-900",children:t.jsx(Bi,{className:"h-4 w-4"})})]})})]},D.id))})]})})}),h&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:j?"Editar Usuario":"Nuevo Usuario"}),t.jsxs("form",{onSubmit:$,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),t.jsx("input",{type:"email",required:!0,value:y.email,onChange:D=>O(Al(Cl({},y),{email:D.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre"}),t.jsx("input",{type:"text",value:y.nombre,onChange:D=>O(Al(Cl({},y),{nombre:D.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Apellido"}),t.jsx("input",{type:"text",value:y.apellido,onChange:D=>O(Al(Cl({},y),{apellido:D.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rol *"}),t.jsxs("select",{required:!0,value:y.rol,onChange:D=>O(Al(Cl({},y),{rol:D.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500",children:[t.jsx("option",{value:"docente",children:"Docente"}),t.jsx("option",{value:"admin",children:"Administrador"}),t.jsx("option",{value:"estudiante",children:"Estudiante"})]})]}),!j&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contraseña *"}),t.jsx("input",{type:"password",required:!j,value:y.password,onChange:D=>O(Al(Cl({},y),{password:D.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500",placeholder:"Mínimo 6 caracteres",minLength:6})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",id:"activo",checked:y.activo,onChange:D=>O(Al(Cl({},y),{activo:D.target.checked})),className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"}),t.jsx("label",{htmlFor:"activo",className:"ml-2 block text-sm text-gray-900",children:"Usuario activo"})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{type:"button",onClick:()=>w(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancelar"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700",children:j?"Actualizar":"Crear"})]})]})]})})})]})})};var ON=Object.defineProperty,TN=Object.defineProperties,MN=Object.getOwnPropertyDescriptors,Mx=Object.getOwnPropertySymbols,RN=Object.prototype.hasOwnProperty,zN=Object.prototype.propertyIsEnumerable,Rx=(o,n,r)=>n in o?ON(o,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[n]=r,zx=(o,n)=>{for(var r in n||(n={}))RN.call(n,r)&&Rx(o,r,n[r]);if(Mx)for(var r of Mx(n))zN.call(n,r)&&Rx(o,r,n[r]);return o},kx=(o,n)=>TN(o,MN(n)),Ux=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});const kN=()=>{const o=ke(),[n,r]=v.useState(!0),[u,m]=v.useState(!1),[x,p]=v.useState(null),[f,c]=v.useState("general"),[h,w]=v.useState({nombre_sistema:"BULL-S Analysis Platform",version:"2.0.0",email_soporte:"soporte@bulls.edu",url_base:"https://bulls.edu",timezone:"America/Bogota",idioma:"es",tema_color:"blue",notificaciones_email:!0,backup_automatico:!0,retencion_logs_dias:30,max_estudiantes_grupo:50,duracion_sesion_minutos:480});v.useEffect(()=>{j()},[]);const j=()=>Ux(void 0,null,function*(){try{r(!0);const{data:q,error:k}=yield Z.from("configuraciones_sistema").select("*").single();k&&k.code!=="PGRST116"?console.error("Error al cargar configuraciones:",k):q&&w(q)}catch(q){console.error("Error al cargar configuraciones:",q)}finally{r(!1)}}),C=()=>Ux(void 0,null,function*(){try{m(!0),p(null);const q=kx(zx({},h),{updated_at:new Date().toISOString()}),{error:k}=yield Z.from("configuraciones_sistema").upsert(q,{onConflict:"id"});if(k)throw k;p({type:"success",text:"Configuraciones guardadas exitosamente"}),setTimeout(()=>p(null),3e3)}catch(q){console.error("Error al guardar configuraciones:",q),p({type:"error",text:"Error al guardar las configuraciones"})}finally{m(!1)}}),y=(q,k)=>{w(V=>kx(zx({},V),{[q]:k}))},O=[{id:"general",label:"General",icon:Ai},{id:"sistema",label:"Sistema",icon:Xx},{id:"notificaciones",label:"Notificaciones",icon:Di},{id:"seguridad",label:"Seguridad",icon:Ut},{id:"apariencia",label:"Apariencia",icon:Qp}],_=[{value:"blue",label:"Azul",color:"bg-blue-500"},{value:"green",label:"Verde",color:"bg-green-500"},{value:"purple",label:"Morado",color:"bg-purple-500"},{value:"red",label:"Rojo",color:"bg-red-500"},{value:"orange",label:"Naranja",color:"bg-orange-500"}],$=[{value:"America/Bogota",label:"Bogotá (GMT-5)"},{value:"America/Mexico_City",label:"Ciudad de México (GMT-6)"},{value:"America/Lima",label:"Lima (GMT-5)"},{value:"America/Santiago",label:"Santiago (GMT-3)"},{value:"America/Buenos_Aires",label:"Buenos Aires (GMT-3)"}];return t.jsx("div",{className:"min-h-screen bg-gray-50",children:t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("div",{className:"mb-8",children:[t.jsxs("button",{onClick:()=>o("/admin"),className:"flex items-center text-gray-600 hover:text-gray-800 mb-4",children:[t.jsx($t,{className:"h-4 w-4 mr-2"}),"Volver al Panel de Administración"]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[t.jsx(Ai,{className:"h-8 w-8 mr-3 text-gray-600"}),"Configuraciones del Sistema"]}),t.jsx("p",{className:"text-gray-600 mt-2",children:"Configurar parámetros generales y preferencias del sistema"})]}),t.jsxs("button",{onClick:C,disabled:u,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center disabled:opacity-50",children:[t.jsx(Yp,{className:"h-4 w-4 mr-2"}),u?"Guardando...":"Guardar Cambios"]})]})]}),x&&t.jsxs("div",{className:`mb-6 p-4 rounded-lg flex items-center ${x.type==="success"?"bg-green-50 border border-green-200 text-green-700":"bg-red-50 border border-red-200 text-red-700"}`,children:[x.type==="success"?t.jsx(Ri,{className:"h-5 w-5 mr-2"}):t.jsx(Ve,{className:"h-5 w-5 mr-2"}),x.text]}),t.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[t.jsx("div",{className:"lg:w-64",children:t.jsx("nav",{className:"space-y-1",children:O.map(q=>{const k=q.icon;return t.jsxs("button",{onClick:()=>c(q.id),className:`w-full flex items-center px-3 py-2 text-sm font-medium rounded-md ${f===q.id?"bg-blue-100 text-blue-700 border-r-2 border-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[t.jsx(k,{className:"h-5 w-5 mr-3"}),q.label]},q.id)})})}),t.jsx("div",{className:"flex-1",children:t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:n?t.jsx("div",{className:"flex justify-center items-center py-12",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):t.jsxs(t.Fragment,{children:[f==="general"&&t.jsxs("div",{className:"space-y-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Configuración General"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre del Sistema"}),t.jsx("input",{type:"text",value:h.nombre_sistema,onChange:q=>y("nombre_sistema",q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Versión"}),t.jsx("input",{type:"text",value:h.version,onChange:q=>y("version",q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email de Soporte"}),t.jsx("input",{type:"email",value:h.email_soporte,onChange:q=>y("email_soporte",q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL Base"}),t.jsx("input",{type:"url",value:h.url_base,onChange:q=>y("url_base",q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Zona Horaria"}),t.jsx("select",{value:h.timezone,onChange:q=>y("timezone",q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:$.map(q=>t.jsx("option",{value:q.value,children:q.label},q.value))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Idioma"}),t.jsxs("select",{value:h.idioma,onChange:q=>y("idioma",q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"es",children:"Español"}),t.jsx("option",{value:"en",children:"English"}),t.jsx("option",{value:"pt",children:"Português"})]})]})]})]}),f==="sistema"&&t.jsxs("div",{className:"space-y-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Configuración del Sistema"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Máximo Estudiantes por Grupo"}),t.jsx("input",{type:"number",min:"10",max:"100",value:h.max_estudiantes_grupo,onChange:q=>y("max_estudiantes_grupo",parseInt(q.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duración de Sesión (minutos)"}),t.jsx("input",{type:"number",min:"60",max:"1440",value:h.duracion_sesion_minutos,onChange:q=>y("duracion_sesion_minutos",parseInt(q.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Retención de Logs (días)"}),t.jsx("input",{type:"number",min:"7",max:"365",value:h.retencion_logs_dias,onChange:q=>y("retencion_logs_dias",parseInt(q.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]})]}),t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",id:"backup_automatico",checked:h.backup_automatico,onChange:q=>y("backup_automatico",q.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),t.jsx("label",{htmlFor:"backup_automatico",className:"ml-2 block text-sm text-gray-900",children:"Habilitar backup automático diario"})]})})]}),f==="notificaciones"&&t.jsxs("div",{className:"space-y-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Configuración de Notificaciones"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",id:"notificaciones_email",checked:h.notificaciones_email,onChange:q=>y("notificaciones_email",q.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),t.jsx("label",{htmlFor:"notificaciones_email",className:"ml-2 block text-sm text-gray-900",children:"Habilitar notificaciones por email"})]}),t.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[t.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Tipos de Notificaciones"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",defaultChecked:!0,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),t.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Alertas críticas de bullying"})]}),t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",defaultChecked:!0,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),t.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Reportes semanales"})]}),t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),t.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Actualizaciones del sistema"})]})]})]})]})]}),f==="seguridad"&&t.jsxs("div",{className:"space-y-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Configuración de Seguridad"}),t.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex",children:[t.jsx(Ve,{className:"h-5 w-5 text-yellow-400"}),t.jsxs("div",{className:"ml-3",children:[t.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Configuraciones de Seguridad"}),t.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:t.jsx("p",{children:"Las configuraciones de seguridad avanzadas se gestionan a través de Supabase Auth."})})]})]})}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Políticas de Contraseña"}),t.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[t.jsx("li",{children:"• Mínimo 6 caracteres"}),t.jsx("li",{children:"• Debe incluir letras y números"}),t.jsx("li",{children:"• Expiración cada 90 días (recomendado)"})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Configuraciones Actuales"}),t.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[t.jsx("li",{children:"• Autenticación de dos factores: Disponible"}),t.jsx("li",{children:"• Sesiones concurrentes: Limitadas"}),t.jsx("li",{children:"• Logs de auditoría: Habilitados"})]})]})]})]}),f==="apariencia"&&t.jsxs("div",{className:"space-y-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Configuración de Apariencia"}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Tema de Color"}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:_.map(q=>t.jsxs("button",{onClick:()=>y("tema_color",q.value),className:`flex items-center p-3 border rounded-lg hover:bg-gray-50 ${h.tema_color===q.value?"border-blue-500 bg-blue-50":"border-gray-300"}`,children:[t.jsx("div",{className:`w-4 h-4 rounded-full ${q.color} mr-3`}),t.jsx("span",{className:"text-sm font-medium",children:q.label})]},q.value))})]}),t.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[t.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Vista Previa"}),t.jsxs("div",{className:"bg-white p-4 rounded border",children:[t.jsx("div",{className:`h-2 ${h.tema_color==="blue"?"bg-blue-500":h.tema_color==="green"?"bg-green-500":h.tema_color==="purple"?"bg-purple-500":h.tema_color==="red"?"bg-red-500":"bg-orange-500"} rounded mb-2`}),t.jsx("p",{className:"text-sm text-gray-600",children:"Así se verán los elementos principales con el tema seleccionado."})]})]})]})]})})})]})]})})};var UN=Object.defineProperty,$N=Object.defineProperties,BN=Object.getOwnPropertyDescriptors,$x=Object.getOwnPropertySymbols,qN=Object.prototype.hasOwnProperty,GN=Object.prototype.propertyIsEnumerable,Bx=(o,n,r)=>n in o?UN(o,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[n]=r,LN=(o,n)=>{for(var r in n||(n={}))qN.call(n,r)&&Bx(o,r,n[r]);if($x)for(var r of $x(n))GN.call(n,r)&&Bx(o,r,n[r]);return o},PN=(o,n)=>$N(o,BN(n));const VN=({nodes:o,edges:n,clusters:r,width:u=800,height:m=600,onNodeClick:x})=>{const p=v.useRef(null),[f,c]=v.useState([]),[h,w]=v.useState(null),[j,C]=v.useState(null);v.useEffect(()=>{const E=u/2,S=m/2,D=o.map((N,M)=>{const K=M/o.length*2*Math.PI,G=Math.min(u,m)*.3;return PN(LN({},N),{x:E+Math.cos(K)*G,y:S+Math.sin(K)*G,vx:0,vy:0})});(()=>{for(let K=0;K<100;K++)D.forEach((G,J)=>{D.forEach((ae,re)=>{if(J===re)return;const T=ae.x-G.x,H=ae.y-G.y,Q=Math.sqrt(T*T+H*H);if(Q<100){const U=(100-Q)*.01,X=Math.atan2(H,T);G.vx-=Math.cos(X)*U,G.vy-=Math.sin(X)*U,ae.vx+=Math.cos(X)*U,ae.vy+=Math.sin(X)*U}})}),n.forEach(G=>{const J=D.find(re=>re.id===G.source),ae=D.find(re=>re.id===G.target);if(J&&ae){const re=ae.x-J.x,T=ae.y-J.y,H=Math.sqrt(re*re+T*T),Q=G.type==="positive"?80:120,U=(H-Q)*.001*Math.abs(G.weight),X=Math.atan2(T,re);J.vx+=Math.cos(X)*U,J.vy+=Math.sin(X)*U,ae.vx-=Math.cos(X)*U,ae.vy-=Math.sin(X)*U}}),D.forEach(G=>{G.x+=G.vx*.1,G.y+=G.vy*.1,G.vx*=.9,G.vy*=.9,G.x=Math.max(30,Math.min(u-30,G.x)),G.y=Math.max(30,Math.min(m-30,G.y))})})(),c(D)},[o,n,u,m]);const y=E=>{switch(E.socialStatus){case"popular":return"#10B981";case"rejected":return"#EF4444";case"isolated":return"#6B7280";case"controversial":return"#F59E0B";default:return"#3B82F6"}},O=E=>8+Math.min(E.popularityScore*2,12),_=E=>{switch(E.type){case"positive":return"#10B981";case"negative":return"#EF4444";default:return"#6B7280"}},$=E=>Math.max(1,Math.abs(E.weight)*.5),q=E=>h?E.source===h||E.target===h?.8:.2:E.reciprocal?.8:.5,k=E=>{w(h===E.id?null:E.id),x==null||x(E)},V=E=>{const S=f.filter(M=>E.members.includes(M.id));if(S.length<3)return null;const D=S.map(M=>({x:M.x,y:M.y})),N=F(D).map((M,K)=>`${K===0?"M":"L"} ${M.x} ${M.y}`).join(" ")+" Z";return t.jsx("path",{d:N,fill:`hsl(${E.members.length*30}, 30%, 95%)`,stroke:`hsl(${E.members.length*30}, 50%, 70%)`,strokeWidth:"1",strokeDasharray:"5,5",opacity:"0.3"},E.id)},F=E=>{if(E.length<3)return E;let S=E[0];E.forEach(M=>{(M.y>S.y||M.y===S.y&&M.x<S.x)&&(S=M)});const D=E.filter(M=>M!==S).sort((M,K)=>{const G=Math.atan2(M.y-S.y,M.x-S.x),J=Math.atan2(K.y-S.y,K.x-S.x);return G-J}),z=[S];D.forEach(M=>{for(;z.length>1;){const K=z[z.length-2],G=z[z.length-1];if((G.x-K.x)*(M.y-K.y)-(G.y-K.y)*(M.x-K.x)>0)break;z.pop()}z.push(M)});const N=z.reduce((M,K)=>({x:M.x+K.x,y:M.y+K.y}),{x:0,y:0});return N.x/=z.length,N.y/=z.length,z.map(M=>({x:N.x+(M.x-N.x)*1.2,y:N.y+(M.y-N.y)*1.2}))};return t.jsxs("div",{className:"relative",children:[t.jsxs("svg",{ref:p,width:u,height:m,className:"border border-gray-200 rounded-lg bg-white",children:[t.jsx("g",{className:"clusters",children:r.map(V)}),t.jsx("g",{className:"edges",children:n.map((E,S)=>{const D=f.find(N=>N.id===E.source),z=f.find(N=>N.id===E.target);return!D||!z?null:t.jsxs("g",{children:[t.jsx("line",{x1:D.x,y1:D.y,x2:z.x,y2:z.y,stroke:_(E),strokeWidth:$(E),opacity:q(E),strokeDasharray:E.reciprocal?"none":"3,3"}),E.reciprocal&&t.jsx("circle",{cx:(D.x+z.x)/2,cy:(D.y+z.y)/2,r:"2",fill:_(E),opacity:q(E)})]},`${E.source}-${E.target}-${S}`)})}),t.jsx("g",{className:"nodes",children:f.map(E=>t.jsxs("g",{children:[t.jsx("circle",{cx:E.x,cy:E.y,r:O(E),fill:y(E),stroke:h===E.id?"#1F2937":"#FFFFFF",strokeWidth:h===E.id?3:2,opacity:h&&h!==E.id?.6:1,className:"cursor-pointer hover:stroke-gray-800 transition-all",onClick:()=>k(E),onMouseEnter:()=>C(E.id),onMouseLeave:()=>C(null)}),(E.bullyingRisk==="high"||E.victimizationRisk==="high")&&t.jsx("circle",{cx:E.x+O(E)-2,cy:E.y-O(E)+2,r:"4",fill:"#EF4444",stroke:"#FFFFFF",strokeWidth:"1"}),(j===E.id||h===E.id)&&t.jsx("text",{x:E.x,y:E.y+O(E)+15,textAnchor:"middle",fontSize:"12",fill:"#374151",className:"font-medium",children:E.name})]},E.id))})]}),t.jsxs("div",{className:"absolute top-4 right-4 bg-white p-4 rounded-lg shadow-lg border",children:[t.jsx("h3",{className:"font-semibold text-sm mb-3",children:"Leyenda"}),t.jsxs("div",{className:"space-y-2 text-xs",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),t.jsx("span",{children:"Popular"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),t.jsx("span",{children:"Rechazado"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-500"}),t.jsx("span",{children:"Aislado"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full bg-orange-500"}),t.jsx("span",{children:"Controvertido"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),t.jsx("span",{children:"Promedio"})]})]}),t.jsx("hr",{className:"my-3"}),t.jsxs("div",{className:"space-y-2 text-xs",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-4 h-0.5 bg-green-500"}),t.jsx("span",{children:"Relación positiva"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-4 h-0.5 bg-red-500"}),t.jsx("span",{children:"Relación negativa"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-4 h-0.5 bg-green-500"}),t.jsx("div",{className:"w-1 h-1 rounded-full bg-green-500"}),t.jsx("span",{children:"Recíproca"})]})]}),t.jsx("hr",{className:"my-3"}),t.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[t.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500 relative",children:t.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full"})}),t.jsx("span",{children:"Alto riesgo"})]})]}),h&&t.jsx("div",{className:"absolute bottom-4 left-4 bg-white p-4 rounded-lg shadow-lg border max-w-xs",children:(()=>{const E=o.find(S=>S.id===h);return E?t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-sm mb-2",children:E.fullName}),t.jsxs("div",{className:"space-y-1 text-xs",children:[t.jsxs("div",{children:["Edad: ",E.age," años"]}),t.jsxs("div",{children:["Estatus: ",E.socialStatus]}),t.jsxs("div",{children:["Popularidad: ",E.popularityScore]}),t.jsxs("div",{children:["Rechazo: ",E.rejectionScore]}),t.jsxs("div",{children:["Aislamiento: ",E.isolationLevel]}),t.jsxs("div",{children:["Riesgo bullying: ",E.bullyingRisk]}),t.jsxs("div",{children:["Riesgo victimización: ",E.victimizationRisk]})]})]}):null})()})]})};var id=(o,n,r)=>new Promise((u,m)=>{var x=c=>{try{f(r.next(c))}catch(h){m(h)}},p=c=>{try{f(r.throw(c))}catch(h){m(h)}},f=c=>c.done?u(c.value):Promise.resolve(c.value).then(x,p);f((r=r.apply(o,n)).next())});const HN=()=>{const o=ke(),[n,r]=v.useState(!1),[u,m]=v.useState("1"),[x,p]=v.useState([]),[f,c]=v.useState(null),[h,w]=v.useState(null),[j,C]=v.useState(null),[y,O]=v.useState("sociogram");v.useEffect(()=>{_()},[]),v.useEffect(()=>{u&&$()},[u]);const _=()=>id(void 0,null,function*(){try{const E=yield qe.getGrupos();p(E)}catch(E){console.error("Error loading groups:",E)}}),$=()=>id(void 0,null,function*(){try{r(!0);let E=yield ua.parseBullsData(u);(!E||E.respuestas.length===0)&&(console.log("No real data found, generating example data"),E=ua.generateExampleData(u)),w(E);const S=yield ua.processSociometricData(E);c(S),yield ua.exportAnalysisData(S,E)}catch(E){console.error("Error running analysis:",E)}finally{r(!1)}}),q=E=>{C(E)},k=()=>id(void 0,null,function*(){if(!(!f||!h))try{const E=yield ua.generateAnalysisReport(f,h),S=new Blob([E],{type:"text/markdown"}),D=URL.createObjectURL(S),z=document.createElement("a");z.href=D,z.download=`analisis_sociometrico_${h.grupo_nombre}_${new Date().toISOString().split("T")[0]}.md`,document.body.appendChild(z),z.click(),document.body.removeChild(z),URL.revokeObjectURL(D)}catch(E){console.error("Error exporting report:",E)}}),V=E=>{switch(E){case"high":return"text-red-600 bg-red-100";case"medium":return"text-orange-600 bg-orange-100";default:return"text-green-600 bg-green-100"}},F=E=>{switch(E){case"popular":return"text-green-600 bg-green-100";case"rejected":return"text-red-600 bg-red-100";case"isolated":return"text-gray-600 bg-gray-100";case"controversial":return"text-orange-600 bg-orange-100";default:return"text-blue-600 bg-blue-100"}};return t.jsx("div",{className:"min-h-screen bg-gray-50",children:t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("div",{className:"mb-8",children:[t.jsxs("button",{onClick:()=>o("/admin"),className:"flex items-center text-gray-600 hover:text-gray-800 mb-4",children:[t.jsx($t,{className:"h-4 w-4 mr-2"}),"Volver al Panel de Administración"]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[t.jsx(Kc,{className:"h-8 w-8 mr-3 text-indigo-600"}),"Análisis Sociométrico BULL-S"]}),t.jsx("p",{className:"text-gray-600 mt-2",children:"Análisis de relaciones sociales y detección de riesgos de bullying"})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("select",{value:u,onChange:E=>m(E.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",children:x.map(E=>t.jsxs("option",{value:E.id,children:["Grupo ",E.nombre]},E.id))}),t.jsxs("button",{onClick:$,disabled:n,className:"flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 disabled:opacity-50",children:[n?t.jsx(RefreshCw,{className:"w-4 h-4 animate-spin"}):t.jsx(RefreshCw,{className:"w-4 h-4"}),n?"Analizando...":"Actualizar"]}),t.jsxs("button",{onClick:k,disabled:!f,className:"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 disabled:opacity-50",children:[t.jsx(Ml,{className:"w-4 h-4"}),"Exportar"]})]})]})]}),f&&h&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[t.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(ve,{className:"h-8 w-8 text-blue-500"}),t.jsxs("div",{className:"ml-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Estudiantes"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h.estudiantes.length})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Ve,{className:"h-8 w-8 text-red-500"}),t.jsxs("div",{className:"ml-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Alto Riesgo"}),t.jsx("p",{className:"text-2xl font-bold text-red-600",children:f.riskIndicators.highRiskStudents.length})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Rl,{className:"h-8 w-8 text-green-500"}),t.jsxs("div",{className:"ml-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Cohesión Grupal"}),t.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[f.groupMetrics.cohesionIndex,"%"]})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Xp,{className:"h-8 w-8 text-orange-500"}),t.jsxs("div",{className:"ml-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Aislamiento"}),t.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:[f.groupMetrics.isolationRate,"%"]})]})]})})]}),t.jsx("div",{className:"bg-white border-b mb-8",children:t.jsx("nav",{className:"flex space-x-8",children:[{id:"sociogram",label:"Sociograma",icon:Kc},{id:"metrics",label:"Métricas",icon:Rl},{id:"risks",label:"Indicadores de Riesgo",icon:Ve},{id:"report",label:"Reporte",icon:ma}].map(E=>{const S=E.icon;return t.jsxs("button",{onClick:()=>O(E.id),className:`flex items-center px-3 py-4 text-sm font-medium border-b-2 transition-colors ${y===E.id?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[t.jsx(S,{className:"h-4 w-4 mr-2"}),E.label]},E.id)})})}),n?t.jsxs("div",{className:"flex justify-center items-center py-12",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"}),t.jsx("span",{className:"ml-3 text-gray-600",children:"Procesando análisis sociométrico..."})]}):f&&h?t.jsxs("div",{children:[y==="sociogram"&&t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Sociograma - Grupo ",h.grupo_nombre]}),t.jsxs("div",{className:"text-sm text-gray-500",children:[f.nodes.length," estudiantes, ",f.edges.length," relaciones"]})]}),t.jsx(VN,{nodes:f.nodes,edges:f.edges,clusters:f.clusters,width:1e3,height:600,onNodeClick:q})]}),y==="metrics"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Métricas Grupales"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[t.jsx("h3",{className:"font-medium text-blue-900",children:"Índice de Cohesión"}),t.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[f.groupMetrics.cohesionIndex,"%"]})]}),t.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[t.jsx("h3",{className:"font-medium text-green-900",children:"Densidad de Red"}),t.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[f.groupMetrics.densityIndex,"%"]})]}),t.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg",children:[t.jsx("h3",{className:"font-medium text-purple-900",children:"Tasa de Reciprocidad"}),t.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[f.groupMetrics.reciprocityRate,"%"]})]})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Clusters Sociales"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:f.clusters.map((E,S)=>t.jsxs("div",{className:"p-4 border rounded-lg",children:[t.jsxs("h3",{className:"font-medium text-gray-900",children:["Cluster ",S+1]}),t.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[E.size," miembros, cohesión: ",E.cohesionScore.toFixed(1),"%"]}),t.jsxs("div",{className:"text-xs text-gray-500",children:["Miembros: ",E.members.map(D=>{var z;return(z=f.nodes.find(N=>N.id===D))==null?void 0:z.name}).join(", ")]})]},E.id))})]})]}),y==="risks"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Estudiantes de Alto Riesgo"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Estudiante"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Estatus Social"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Riesgo Bullying"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Riesgo Victimización"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Popularidad"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Rechazo"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.nodes.filter(E=>E.bullyingRisk==="high"||E.victimizationRisk==="high"||E.socialStatus==="rejected"||E.socialStatus==="isolated").map(E=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:E.fullName}),t.jsxs("div",{className:"text-sm text-gray-500",children:[E.age," años, ",E.gender==="M"?"Masculino":"Femenino"]})]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${F(E.socialStatus)}`,children:E.socialStatus})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${V(E.bullyingRisk)}`,children:E.bullyingRisk})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${V(E.victimizationRisk)}`,children:E.victimizationRisk})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:E.popularityScore}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:E.rejectionScore})]},E.id))})]})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Recomendaciones"}),t.jsx("div",{className:"space-y-3",children:f.recommendations.map((E,S)=>t.jsxs("div",{className:"flex items-start gap-3 p-3 bg-yellow-50 rounded-lg",children:[t.jsx(Ut,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),t.jsx("p",{className:"text-sm text-yellow-800",children:E})]},S))})]})]}),y==="report"&&t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Reporte de Análisis"}),t.jsxs("button",{onClick:k,className:"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:[t.jsx(Ml,{className:"w-4 h-4"}),"Descargar Reporte"]})]}),t.jsxs("div",{className:"prose max-w-none",children:[t.jsx("h3",{children:"Resumen Ejecutivo"}),t.jsxs("ul",{children:[t.jsxs("li",{children:["Total de estudiantes analizados: ",h.estudiantes.length]}),t.jsxs("li",{children:["Respuestas procesadas: ",h.respuestas.length]}),t.jsxs("li",{children:["Índice de cohesión grupal: ",f.groupMetrics.cohesionIndex,"%"]}),t.jsxs("li",{children:["Tasa de aislamiento: ",f.groupMetrics.isolationRate,"%"]})]}),t.jsx("h3",{children:"Indicadores de Riesgo Críticos"}),t.jsxs("ul",{children:[t.jsxs("li",{children:["Estudiantes de alto riesgo: ",f.riskIndicators.highRiskStudents.length]}),t.jsxs("li",{children:["Potenciales víctimas: ",f.riskIndicators.potentialVictims.length]}),t.jsxs("li",{children:["Potenciales agresores: ",f.riskIndicators.potentialAggressors.length]}),t.jsxs("li",{children:["Estudiantes aislados: ",f.riskIndicators.isolatedStudents.length]})]}),t.jsx("h3",{children:"Análisis de Red Social"}),t.jsxs("ul",{children:[t.jsxs("li",{children:["Densidad de la red: ",f.groupMetrics.densityIndex,"%"]}),t.jsxs("li",{children:["Tasa de reciprocidad: ",f.groupMetrics.reciprocityRate,"%"]}),t.jsxs("li",{children:["Clusters sociales identificados: ",f.clusters.length]})]}),t.jsx("h3",{children:"Recomendaciones Prioritarias"}),t.jsx("ul",{children:f.recommendations.map((E,S)=>t.jsx("li",{children:E},S))})]})]})]}):t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Kc,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),t.jsx("p",{className:"text-gray-500",children:"Selecciona un grupo para comenzar el análisis"})]})]})})};function IN(){return console.log("App.tsx: Renderizando aplicación con Router..."),t.jsx(Ab,{children:t.jsx(ey,{children:t.jsx(Kp,{children:t.jsxs(Fx,{children:[t.jsx(fe,{path:"/auth/student",element:t.jsx(cy,{})}),t.jsx(fe,{path:"/auth/admin",element:t.jsx(uy,{})}),t.jsx(fe,{path:"/auth/serverless",element:t.jsx(hy,{})}),t.jsx(fe,{path:"/auth/redirect",element:t.jsx(Jv,{})}),t.jsx(fe,{path:"/",element:t.jsx(ob,{})}),t.jsx(fe,{path:"/student/*",element:t.jsx(Hr,{children:t.jsx(Bv,{})})}),t.jsxs(fe,{path:"/admin",element:t.jsx(Hr,{children:t.jsx(qb,{})}),children:[t.jsx(fe,{index:!0,element:t.jsx(Ti,{to:"/admin/dashboard",replace:!0})}),t.jsx(fe,{path:"dashboard",element:t.jsx(rN,{})}),t.jsx(fe,{path:"instituciones",element:t.jsx(uN,{})}),t.jsx(fe,{path:"grupos",element:t.jsx(pN,{})}),t.jsx(fe,{path:"estudiantes",element:t.jsx(wN,{})}),t.jsx(fe,{path:"usuarios",element:t.jsx(DN,{})}),t.jsx(fe,{path:"configuraciones",element:t.jsx(kN,{})}),t.jsx(fe,{path:"analisis-sociometrico",element:t.jsx(HN,{})}),t.jsx(fe,{path:"dashboards",element:t.jsx(hx,{})}),t.jsx(fe,{path:"dashboard-general",element:t.jsx(hx,{})}),t.jsx(fe,{path:"dashboard-convivencia",element:t.jsx(eN,{})}),t.jsx(fe,{path:"dashboards-por-grupo",element:t.jsx(Nj,{})}),t.jsx(fe,{path:"profile",element:t.jsx(tN,{})}),t.jsx(fe,{path:"diagnostics/supabase",element:t.jsx(sN,{})}),t.jsx(fe,{path:"reports",element:t.jsx(Ly,{})}),t.jsx(fe,{path:"bulls-dashboard",element:t.jsx(Yy,{})}),t.jsxs(fe,{path:"grupo/:groupId/*",element:t.jsx(r0,{children:t.jsx(bd,{})}),children:[t.jsx(fe,{index:!0,element:t.jsx(Ei,{})}),t.jsx(fe,{path:"general",element:t.jsx(Ei,{})}),t.jsx(fe,{path:"bullying",element:t.jsx(jx,{})}),t.jsx(fe,{path:"academico",element:t.jsx(Nx,{})}),t.jsx(fe,{path:"social",element:t.jsx(wx,{})}),t.jsx(fe,{path:"convivencia",element:t.jsx(Ti,{to:"/admin/dashboard/convivencia",replace:!0})})]}),t.jsxs(fe,{path:"dashboard/:institutionSlug/:groupSlug/*",element:t.jsx(Ej,{}),children:[t.jsx(fe,{path:"general",element:t.jsx(Ei,{})}),t.jsx(fe,{path:"bullying",element:t.jsx(jx,{})}),t.jsx(fe,{path:"academico",element:t.jsx(Nx,{})}),t.jsx(fe,{path:"social",element:t.jsx(wx,{})})]})]}),t.jsx(fe,{path:"/examples/user-profile-badge",element:t.jsx(Hr,{children:t.jsx(Gv,{})})}),t.jsx(fe,{path:"/serverless",element:t.jsx(Hr,{children:t.jsx(Xv,{})})}),t.jsx(fe,{path:"/link-identity",element:t.jsx(Hr,{children:t.jsx(Zv,{})})}),t.jsx(fe,{path:"/acceso-denegado",element:t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:t.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md max-w-md w-full",children:[t.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Acceso Denegado"}),t.jsx("p",{className:"text-gray-700 mb-4",children:"No tienes los permisos necesarios para acceder a esta página."}),t.jsx("button",{onClick:()=>window.location.href="/",className:"w-full bg-blue-800 text-white py-2 px-4 rounded hover:bg-blue-900",children:"Volver al inicio"})]})})}),t.jsx(fe,{path:"/test",element:t.jsx("div",{className:"p-8",children:"Página de prueba - Si puedes ver esto, el enrutador está funcionando correctamente."})}),t.jsx(fe,{path:"*",element:t.jsx(qv,{})})]})})})})}console.log("main.tsx: Attempting to render App...");const qx=document.getElementById("root");qx?(ib.createRoot(qx).render(t.jsx(v.StrictMode,{children:t.jsx(IN,{})})),console.log("main.tsx: App rendering initiated.")):console.error("main.tsx: Root element #root not found!");
